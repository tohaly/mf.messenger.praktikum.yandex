!function(t){var e={};function n(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){t.exports=n.p+"images/chat-card__img.png"},function(t,e,n){t.exports=n.p+"images/example-user-img.jpg"},function(t,e,n){},function(t,e,n){"use strict";n.r(e),n.d(e,"auth",(function(){return Y}));n(2);class s{constructor(t,e,n){this._pathname=t,this._blockClass=e,this._block=null,this._props=n}navigate(t){this.match(t)&&(this._pathname=t,this.render())}leave(){this._block&&this._block.hide()}match(t){return e=t,n=this._pathname,e===n;var e,n}render(){if(!this._block)return this._block=new this._blockClass,void((t,e)=>{const n=document.querySelector(t);n.appendChild(e.getContent())})(this._props.rootQuery,this._block);this._block.show()}}class a{constructor(t){if(this._handleHashChange=()=>{const t=window.location.hash;this._onRoute(t)},a.__instance)return a.__instance;this.routes=[],this.history=window.history,this._currentRoute=null,this._rootQuery=t,this._defaultPath,this.isProtect=!0,a.__instance=this,window.addEventListener("hashchange",this._handleHashChange)}use(t,e){const n=new s(t,e,{rootQuery:this._rootQuery});return this.routes.push(n),this}useDefault(t,e){const n=new s(t,e,{rootQuery:this._rootQuery});return this._defaultPath=t,this.routes.push(n),this}useProtect(t,e){const n=new s(t,e,{rootQuery:this._rootQuery,protect:!0});return this.routes.push(n),this}start(){window.onpopstate=(t=>{this._onRoute(t.currentTarget.location.hash)}).bind(this),this._onRoute(window.location.hash)}_onRoute(t){const e=this.getRoute(t);e?e._props.protect&&this.isProtect?this.go(this._defaultPath):(this._currentRoute&&this._currentRoute!==e&&this._currentRoute.leave(),this._currentRoute=e,e.render()):this.go("#/notfound")}go(t){this.history.pushState({},"",t),this._onRoute(t)}back(){this.history.back()}forward(){this.history.forward()}getRoute(t){return this.routes.find(e=>e._pathname.match(t))}}const r=new a("#main-content");r.isProtect=!localStorage.getItem("login");var i=r;class o{constructor(){this.listeners={}}on(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}off(t,e){if(!this.listeners[t])throw new Error("Нет события: "+t);this.listeners[t]=this.listeners[t].filter(t=>t!==e)}emit(t,...e){if(!this.listeners[t])throw new Error("Нет события: "+t);this.listeners[t].forEach((function(t){t(...e)}))}}class l{constructor(t="div",e={}){this.EVENTS={INIT:"init",FLOW_CDM:"flow:component-did-mount",FLOW_CDU:"flow:component-did-update",FLOW_RENDER:"flow:render"},this._element=null,this._meta=null,this.setProps=t=>{t&&Object.assign(this.props,t)},this._makePropsProxy=t=>new Proxy(t,{get(t,e){const n=t[e];return"function"==typeof n?n.bind(t):n},set:(t,e,n)=>(t[e]=n,this.eventBus().emit(this.EVENTS.FLOW_CDU,Object.assign({},t),t),!0),deleteProperty(){throw new Error("No access")}});const n=new o;this._meta={tagName:t,props:e},this.props=this._makePropsProxy(e),this.eventBus=()=>n,this._registerEvents(n),n.emit(this.EVENTS.INIT),this.setProps=this.setProps.bind(this)}_registerEvents(t){t.on(this.EVENTS.INIT,this.init.bind(this)),t.on(this.EVENTS.FLOW_CDM,this._componentDidMount.bind(this)),t.on(this.EVENTS.FLOW_RENDER,this._render.bind(this)),t.on(this.EVENTS.FLOW_CDU,this._componentDidUpdate.bind(this))}_createResources(){const{tagName:t}=this._meta;this._element=this._createDocumentElement(t)}init(){this._createResources(),this.eventBus().emit(this.EVENTS.FLOW_CDM)}_componentDidMount(){this.componentDidMount(),this.eventBus().emit(this.EVENTS.FLOW_RENDER)}componentDidMount(){}_componentDidUpdate(t,e){this.componentDidUpdate()&&(this._render(),this.eventBus().emit(this.EVENTS.FLOW_RENDER))}componentDidUpdate(){return!0}get element(){return this._element}_render(){const t=this.render();this._element.innerHTML=t}render(){}getContent(){return this.element}_createDocumentElement(t){return document.createElement(t)}show(){this.getContent().style.display="block"}hide(){this.getContent().style.display="none"}}class u{constructor(t){this._TEMPLATE_REGEXP=/\{\%(.*?)\%\}/gi,this._REGEXP_CTX=/\(\)\(\%(.*?)\%\)/gi,this._template=t}compile(t){return this._compileTemplate(t)}_compileTemplate(t){let e=this._template,n=null;const s=this._TEMPLATE_REGEXP;for(;n=s.exec(e);)if(n[1]){const s=n[1].trim(),a=this.get(t,s);if("function"==typeof a){window[s]=a,e=e.replace(new RegExp(n[0],"gi"),`window.${s}()`);const t=this._REGEXP_CTX.exec(e);t&&(e=e.replace(t[0],`.${t[1].trim()}()`))}e=e.replace(new RegExp(n[0],"gi"),a)}return e}get(t,e,n){const s=e.replace("]","").split(/[\[\.]/gi);let a=t;for(let t of s){const e=a[t];if(!e)return n;a=e}return a||n}getNode(t){const e=document.createElement("div");return e.insertAdjacentHTML("beforeend",this.compile(t).trim()),e.firstChild}}const c=new u('\n    <img\n      src="{% link %}"\n      alt="{% alt %}"\n      class="{% className %}"\n    />\n');class h extends l{constructor(t){super("div",t)}render(){return c.compile({link:this.props.link,alt:this.props.alt,className:this.props.className})}}const d=new u('\n    <button {% disabled %} class="button {% className %}" >{% text %}</button>\n');class p extends l{constructor(t){super("div",t)}render(){const{text:t,className:e,isDisabled:n}=this.props;return d.compile({text:t,className:e,disabled:n?"disabled":""})}}const m=new u('\n  <div class="chat-card" onClick="{% activateHandle %}">\n    {% Avatar %}\n    <div class="chat-card__content">\n      <h2 class="chat-card__title">{% title %}</h2>\n      <p class="chat-card__text">\n        {% text %}\n      </p>\n    </div>\n  </div>\n');class _ extends l{constructor(t){super("div",t)}render(){return m.compile({activateHandle:this.props.activateHandle,Avatar:this.props.Avatar.render(),title:this.props.title,text:this.props.text})}}const g=()=>localStorage.getItem("login"),v=new u('\n  <button class="button header__button {% className %}">{% text %}</button>\n');class b extends l{constructor(t){super("div",t)}render(){return v.compile({text:this.props.text,className:this.props.className})}}const f=new u('\n  <header class="header">\n    <div class="header__logo-link">\n      <div class="header__logo-img"></div>\n      <h1 class="header__title">Simple chat</h1>   \n    </div>\n    <nav class="header__menu">\n      {% buttons %}      \n    </nav>\n  </header>\n'),w=[new b({text:"Signin",className:"header__button_signin"}),new b({text:"Signup",className:"header__button_signup"})],E=[new b({text:"Settings",className:"header__button_settings"}),new b({text:localStorage.getItem("login")+" ❌",className:"header__button_logout"})],y=g()?E:w;const x=new u('\n    <div class="form__input-wrapper">\n      <input\n      class="input auth__input {% className %}"\n      {% attributes %}\n      name="{% name %}"\n      {% value %}     \n      />\n      <span class="auth__error"></span>\n    </div>\n  ');class S extends l{constructor(t){super("div",t)}render(){const{attributes:t,name:e,className:n="",value:s}=this.props;return x.compile({attributes:t,name:e,value:s,className:n})}}const N=new u('\n  <div class="message">\n    {% avatar %}\n    <div class="message__content">\n      <h3 class="message__sender">User Name</h3>\n      <p class="message__text">\n        {% text %}\n      </p>\n    </div>\n    <time class="message__time">\n      10:44:45\n    </time>\n  </div>\n');const k=new u('<h2 class="page-title auth__title">{% text %}</h2>');class T extends l{constructor(t){super("div",t)}render(){return k.compile({className:this.props.className,text:this.props.text})}}const D=new u('\n<span\n  class="auth__error auth__error_server {% activeClass %}">\n    {% text %}\n  </span>\n');class P extends l{constructor(t){super("div",t)}render(){const{text:t}=this.props;return D.compile({activeClass:t?"auth__error_active":"",text:t})}}class C{constructor(){this.ERROR_NEED_METHOD="Need to specify a method",this.METHODS={GET:"GET",POST:"POST"},this.queryStringify=this.queryStringify.bind(this),this.request=this.request.bind(this)}getDeepParams(t,e){return Object.keys(e).reduce((n,s,a,r)=>{let i=e[s],o=`${t}[${s}]=${i}`;return"object"==typeof i&&(o=this.getDeepParams(`${t}[${s}]`,i)),`${n}${o}${a<r.length-1?"&":""}`},"")}queryStringify(t){if("object"!=typeof t)throw new Error("Data not object");const e=Object.keys(t);return e.reduce((n,s,a)=>{let r=t[s],i=`${s}=${r}`;return"object"==typeof r&&(i=this.getDeepParams(s,r)),`${n}${i}${a<e.length-1?"&":""}`},"")}get(t,e={}){return this.request(t,Object.assign(Object.assign({},e),{method:this.METHODS.GET}))}post(t,e={}){return this.request(t,Object.assign(Object.assign({},e),{method:this.METHODS.POST}))}request(t,e={}){const{headers:n={},method:s,body:a,timeout:r=5e3}=e;return new Promise(function(e,i){if(!s)return void i(this.ERROR_NEED_METHOD);const o=new XMLHttpRequest;o.withCredentials=!0;const l=s===this.METHODS.GET;o.open(s,l&&a?`${t}${this.queryStringify(a)}`:t),Object.keys(n).forEach(t=>{o.setRequestHeader(t,n[t])}),o.onload=()=>e(o),o.onabort=i,o.onerror=i,o.timeout=r,o.ontimeout=i,l||!a?o.send():o.send(JSON.stringify(a))}.bind(this))}}const V='\n  <div class="error">\n    <h1 class="error__title">{% errorCode %}</h1>\n    <p class="error__subtitle">{% errorTitle %}</p>\n    <div class="error__img"></div>\n    <a class="link error__link">back to main</a>\n  </div>\n',I=new u(V);const L=new u(V);var R=n(0),O=n.n(R);const q=new u('\n    <div class="root">\n      <main class="main-content">\n        <section class="aside-panel">\n          <form class="aside-panel__search-form">\n            <div class="aside-panel__search-icon"></div>\n            <input\n              type="text"\n              class="aside-panel__search-input"\n              placeholder="Search"\n            />\n          </form>\n          <div class="aside-panel__card-list">\n            {% chatCards %}\n          </div>\n        </section>\n        <section class="messages-window">\n          <div\n            class="messages-window__start-container messages-window__start-container_hidden"\n          >\n            <p class="messages-window__start-container-text">\n              select or create a chat to start communicate\n            </p>\n          </div>\n          <div class="messages-window__container">\n            <div class="messages-window__list">\n              <time class="messages-window__date-separator"\n                >thursday, 6 august 2020</time\n              >\n              {% message %}\n              <time class="messages-window__date-separator"\n                >thursday, 6 august 2020</time\n              >\n              {% message %}\n            </div>\n            <div class="control-panel">\n              <form class="control-panel__form">\n                <input\n                  type="text"\n                  class="input control-panel__input"\n                  placeholder="Start to write..."\n                />\n                <button class="control-panel__send-button"></button>\n              </form>\n              <div class="control-panel__media">\n                <div\n                  class="control-panel__media-item control-panel__media-item_file"\n                ></div>\n                <div\n                  class="control-panel__media-item control-panel__media-item_camera"\n                ></div>\n                <div\n                  class="control-panel__media-item control-panel__media-item_mic"\n                ></div>\n                <div class="control-panel__emojis">\n                  😄😁😡🤐🤑\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      </main>\n    </div>\n  '),B={chatCards:((t,e,n=1)=>{const s=[];let a=e?t:0;if(0===t&&void 0===e)return s;for(t<0&&(n=-1),void 0===e&&(e=t);Math.abs(a)<Math.abs(e);)0!==n?(s.push(a),a+=n):(s.push(t),a+=1);return s})(10).map(()=>new _({activateHandle(){console.log("active")},Avatar:new h({link:O.a,alt:"User avatar",className:"chat-card__img"}),title:"Title",text:"Sorry, its just that I get very ne..."})),message:new class extends l{constructor(t){super("div",t)}render(){return N.compile({avatar:this.props.avatar.render(),text:this.props.text})}}({avatar:new h({link:"./images/chat-card__img.png",alt:"User avatar",className:"message__avatar"}),text:"Why didn't he come and talk to me himself?"})};const j=(t,e)=>{if(t.validity.tooShort)e(!0,"Min password length 8 characters");else if(!t.validity.valid){if(!/[A-Z]/g.test(t.value))return void e(!0,"Need two letters in different registers");if(!/[a-z]/g.test(t.value))return void e(!0,"Need two letters in different registers");if(/[\W_]/g.test(t.value))return void e(!0,"Password must contain latin letters and numbers");if(!/[\d]/g.test(t.value))return void e(!0,"Password must contain at least one number")}},A=(t,e)=>{(t.validity.tooLong||t.validity.tooShort)&&e(!0,"Login must be from 2 to 20 characters")},M=(t,e)=>{t.validity.valid||e(!0,"Incorrect email")},U=(t,e)=>{t.validity.valid||e(!0,"Phone must start with 8 or 7 and have 11 numbs")},$=[{attributes:'\n        type="text"\n        placeholder="login"\n        minlength="2"\n        maxlength="20"\n        required\n      ',name:"login",handleBlur:A},{attributes:'\n        type="password"\n        placeholder="password"\n        pattern="(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\\s).*"\n        minlength="8"\n        autocomplete="on"\n        required\n      ',name:"password",handleBlur:j}];class F{constructor(t){this._FIELD_REQUIRED="This is felid required",this._toggleError=(t,e="")=>{const n=event.target.nextElementSibling;t?(n.classList.add("auth__error_active"),n.textContent=e):(n.classList.remove("auth__error_active"),n.textContent=e)},this.handleBlur=()=>{event.target.validity.valueMissing?this._toggleError(!0,this._FIELD_REQUIRED):this._customValidate(event.target,this._toggleError)},this.handleFocus=()=>{this._toggleError(!1)},this._customValidate=t}}class H{constructor(t,e,n=(()=>!0)){this.formIsValid=t=>{this._form.checkValidity()&&this._customValidator()?this._toggleButton(!0):this._toggleButton(!1)},this._form=t,this._button=e,this._customValidator=n}saveValue(t,e){e[t.name]=t.value}_toggleButton(t){t?this._button.removeAttribute("disabled"):this._button.setAttribute("disabled","true")}}const W=new u('\n  <div class="root">\n  <main class="main-content">\n    <div class="auth-with-container">\n      <div class="auth">\n        {% title %}\n        <form class="auth__form auth__form_signin">\n          {% inputs %}          \n          {% serverError %}\n          {% button %}\n          <a href="#" class="link auth__link auth__link_signin"\n            > {% altText %} </a\n          >\n          </form>          \n        </div>\n      </div>\n      <div class="loader {% loaderActivateClass %}">\n        <div class="loader__item"></div>\n        <p class="loader__text">Загрузка, подождите...</p>\n      </div>\n    </main>\n  </div>\n  ');const z=[{attributes:'\n        type="text" \n        placeholder="First name" \n        minlength="2"\n        maxlength="20"\n        required\n        ',name:"first_name",handleBlur:A},{attributes:'\n        type="text" \n        placeholder="Second name" \n        minlength="2"\n        maxlength="20"\n        required\n        ',name:"second_name",handleBlur:A},{attributes:'\n        type="email" \n        placeholder="email" \n        pattern="^.{1,}@([-0-9A-Za-z]{1,}\\.){1,3}[-A-Za-z]{2,}$"\n        required\n        ',name:"email",handleBlur:M},{attributes:'\n        type="text"\n        placeholder="login" \n        minlength="2"\n        maxlength="20"\n        required\n      ',name:"login",handleBlur:A},{attributes:'\n        type="password" \n        placeholder="password" \n        pattern="(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\\s).*"\n        minlength="8"\n        autocomplete="on"\n        required\n      ',name:"password",handleBlur:j},{attributes:'\n        type="phone" \n        placeholder="Phone" \n        pattern="^(7|8)\\d{10}$"\n        maxlength="11"\n        autocomplete="on"\n        required\n      ',name:"phone",handleBlur:U}],Q=new u('\n  <div class="root">\n  <main class="main-content">\n    <div class="auth-with-container">\n      <div class="auth">\n        {% title %}\n        <form class="auth__form">\n          {% inputs %}\n          {% serverError %}\n          {% button %}\n          <a href="№" class="link auth__link {% altLinkClassName %}"\n            >{% altText %}</a\n          >          \n      </form>        \n      </div>\n    </div>\n    <div class="loader {% loaderActivateClass %}">\n      <div class="loader__item"></div>\n      <p class="loader__text">Загрузка, подождите...</p>\n    </div>\n  </main>\n  </div>\n  ');const Z={userInfo:[{attributes:'\n          type="text" \n          placeholder="First name" \n          minlength="2"\n          maxlength="20"\n          required\n          ',name:"first_name",handleBlur:A},{attributes:'\n          type="text" \n          placeholder="Second name" \n          minlength="2"\n          maxlength="20"\n          required\n          ',name:"second_name",handleBlur:A},{attributes:'\n          type="email" \n          placeholder="email" \n          pattern="^.{1,}@([-0-9A-Za-z]{1,}\\.){1,3}[-A-Za-z]{2,}$"\n          required\n          ',name:"email",handleBlur:M},{attributes:'\n          type="text"\n          placeholder="login" \n          minlength="2"\n          maxlength="20"\n          required\n        ',name:"login",handleBlur:A},{attributes:'\n          type="phone" \n          placeholder="Phone" \n          pattern="^(7|8)\\d{10}$"\n          maxlength="11"\n          autocomplete="on"\n          required\n        ',name:"phone",handleBlur:U}],avatar:[{attributes:'\n      type="file"\n      placeholder="old password"\n      pattern="(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\\s).*"\n      minlength="8"\n      autocomplete="on"\n      required\n      title=" "\n    ',name:"avatar",handleBlur:j}],password:[{attributes:'\n      type="password"\n      placeholder="old password"\n      pattern="(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\\s).*"\n      minlength="8"\n      autocomplete="on"\n      required\n    ',name:"old-password",handleBlur:j},{attributes:'\n      type="password"\n      placeholder="new password"\n      pattern="(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\\s).*"\n      minlength="8"\n      autocomplete="on"\n      required\n    ',name:"new-password",handleBlur(t,e){j(t,e)}}]};var G=n(1),X=n.n(G);const J=new u('\n  <div class="root">\n  <main class="main-content">\n    <div class="auth-user-settings">\n      {% title %}\n      <div class="auth-user-settings__container">\n          <form class="auth__form auth__form_avatar" novalidate="true">            \n            {% avatar %}\n            {% inputAvatar %}\n            {% buttonAvatar %}\n          </form>\n        <div class="auth auth_user-settings ">\n          <form class="auth__form auth__form_user-info auth_right-margin" novalidate="true">\n            {% inputsUserInfo %}\n            {% buttonUserInfo %}\n          </form>\n          <form class="auth__form auth__form_user-password" novalidate="true">\n            {% inputsUserPassword %}\n            {% buttonPassword %}\n          </form>\n        </div>\n      </div>\n      <span class="auth__error auth__error_server">Server error</span>      \n    </div>\n  </main>\n</div>\n  ');const Y=new class extends class{constructor(){this._baseUrl="https://ya-praktikum.tech/api/v2",this._http=new C}getResponse(t){if(200!==t.status)throw new Error(t.response);console.log(t)}}{constructor(t){super(),this._url=this._baseUrl+t,console.log(this._url)}signup(t){const e={headers:{"Content-Type":"application/json"},body:t};return this._http.post(this._url+"signup",e).then(t=>this.getResponse(t))}signin(t){const e={headers:{"Content-Type":"application/json"},body:t};return this._http.post(this._url+"signin",e).then(t=>this.getResponse(t))}logout(){return this._http.request(this._url+"logout",{headers:{"Content-Type":"application/json"},method:"POST"}).then(t=>this.getResponse(t))}getUserInfo(){return this._http.get(this._url+"user").then(t=>this.getResponse(t))}}("/auth/");document.querySelector("#header").appendChild((new class extends l{constructor(){super("div",{buttons:y.map(t=>t.render()).join("")})}logout(){Y.logout().then(()=>{localStorage.removeItem("login")}).then(()=>{i.go("#/signin")}).catch(()=>{i.go("#/error")})}headerClickEvents(t){t.preventDefault();let e=/header__button_(.*)/gi.exec(t.target.classList[2])[1];"logout"!==e?i.go("#/"+e):this.logout()}headerLogoClickHeader(){i.go("#/")}componentDidMount(){document.addEventListener("changeLocalStorage",()=>{const t=[new b({text:"Settings",className:"header__button_settings"}),new b({text:localStorage.getItem("login")+" ❌",className:"header__button_logout"})],e=g()?t:w;this.setProps({buttons:e.map(t=>t.render()).join("")})},!1),this.eventBus().on(this.EVENTS.FLOW_RENDER,()=>{this.element.querySelectorAll(".header__button").forEach(t=>{t.onclick=this.headerClickEvents.bind(this)}),this.element.querySelector(".header__logo-link").onclick=this.headerLogoClickHeader})}render(){const{buttons:t,loginName:e}=this.props;return f.compile({buttons:t})}}).getContent()),fetch("https://ya-praktikum.tech/api/v2/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({login:"tohalb",password:"hgfrd26Y1"})}).then(t=>console.log(t)),i.useProtect("#/",class extends l{constructor(){super("div",B),this.inputElement,this.sendButton}handleInput(){const t=this.sendButton,e=this.inputElement.value,n=e.match(/\s*/)[0];e&&e!==n?t.classList.add("control-panel__send-button_active"):t.classList.remove("control-panel__send-button_active")}handleSendMessage(){event.preventDefault();const t=this.inputElement,e=t.parentNode;console.log(t.value),e.reset(),this.sendButton.classList.remove("control-panel__send-button_active")}componentDidMount(){this.eventBus().on(this.EVENTS.FLOW_RENDER,()=>{const{element:t,handleInput:e,handleSendMessage:n}=this;this.inputElement=t.querySelector(".control-panel__input"),this.sendButton=t.querySelector(".control-panel__send-button"),this.inputElement.oninput=e.bind(this),this.sendButton.onclick=n.bind(this)})}render(){return q.compile({chatCards:this.props.chatCards.map(t=>t.render()).join(""),message:this.props.message.render(),handleInput:this.props.handleInput,handleClickButton:this.props.handleClickButton})}}).useDefault("#/signin",class extends l{constructor(){super("div",{title:new T({text:"Signup"}),serverError:new P({text:""}),button:new p({text:"Signin",className:"auth__button",isDisabled:!0}),altLinkClassName:"auth__link_signin",altText:"don't have an account?",isLoad:!1}),this.inputsValue,this.validate=[],this.form}_getInputs(){return this.inputsValue=this.inputsValue||{},this.validate=this.validate||[],$.map(t=>{const{name:e,attributes:n}=t,s=this.inputsValue[e]?`value="${this.inputsValue[e]}"`:" ";return this.validate.push(new F(t.handleBlur)),new S({attributes:n,name:e,value:s}).render()}).join("")}_getInputsValue(){this.form.saveValue(event.target,this.inputsValue)}handleSigninClick(){event.preventDefault(),this.setProps({isLoad:!0}),Y.signin(this.inputsValue).then(()=>{localStorage.setItem("login",this.inputsValue.login)}).then(()=>{this.inputsValue={}}).then(()=>{i.go("#/")}).catch(t=>{const{message:e="Server error"}=t;this.inputsValue.password="",this.setProps({serverError:new P({text:e})})}).finally(()=>{this.setProps({isLoad:!1})})}goSignup(){event.preventDefault(),i.go("#/signup")}componentDidMount(){this.eventBus().on(this.EVENTS.FLOW_RENDER,()=>{const{element:t,validate:e}=this,n=t.querySelector("form"),s=t.querySelector(".auth__button"),a=t.querySelectorAll(".input"),r=t.querySelector(".auth__link_signin");this.form=new H(n,s),a.forEach((t,n)=>{t.onfocus=e[n].handleFocus,t.onblur=e[n].handleBlur}),n.onchange=this._getInputsValue.bind(this),n.oninput=this.form.formIsValid,s.onclick=this.handleSigninClick.bind(this),r.onclick=this.goSignup})}render(){const{title:t,serverError:e,isLoad:n,button:s,altLinkClassName:a,altText:r}=this.props,i=n?"loader_is-active":"";return W.compile({title:t.render(),inputs:this._getInputs(),serverError:e.render(),button:s.render(),altLinkClassName:a,altText:r,loaderActivateClass:i})}}).use("#/signup",class extends l{constructor(){super("div",{title:new T({text:"Signup"}),serverError:new P({text:""}),button:new p({text:"Signup",className:"auth__button",isDisabled:!0}),altLinkClassName:"auth__link_signup",altText:"already have an account?",isLoad:!1}),this.inputsValue,this.validate=[],this.form}_getInputs(){return this.inputsValue=this.inputsValue||{},this.validate=this.validate||[],z.map(t=>{const{name:e,attributes:n}=t,s=this.inputsValue[e]?`value="${this.inputsValue[e]}"`:" ";return this.validate.push(new F(t.handleBlur)),new S({attributes:n,name:e,value:s}).render()}).join("")}handleSigninClick(t){t.preventDefault(),this.setProps({isLoad:!0}),Y.signup(this.inputsValue).then(()=>{localStorage.setItem("login",this.inputsValue.login)}).then(()=>{this.inputsValue={}}).then(()=>{i.go("#/")}).catch(t=>{const{message:e="Server error"}=t;this.inputsValue.password="",this.setProps({serverError:new P({text:e})})}).finally(()=>{this.setProps({isLoad:!1})})}_getInputsValue(t){this.form.saveValue(t.target,this.inputsValue)}goSignin(){event.preventDefault(),i.go("#/signin")}componentDidMount(){this.eventBus().on(this.EVENTS.FLOW_RENDER,()=>{const{element:t,validate:e}=this,n=t.querySelector("form"),s=t.querySelector(".auth__button"),a=t.querySelectorAll(".input"),r=t.querySelector(".auth__link_signup");this.form=new H(n,s),a.forEach((t,n)=>{t.onfocus=e[n].handleFocus,t.onblur=e[n].handleBlur}),n.onchange=this._getInputsValue.bind(this),n.oninput=this.form.formIsValid,s.onclick=this.handleSigninClick.bind(this),r.onclick=this.goSignin})}render(){const{title:t,serverError:e,isLoad:n,button:s,altLinkClassName:a,altText:r}=this.props,i=n?"loader_is-active":"";return Q.compile({title:t.render(),inputs:this._getInputs(),serverError:e.render(),button:s.render(),altLinkClassName:a,altText:r,loaderActivateClass:i})}}).use("#/settings",class extends l{constructor(){super("div",{title:new T({text:"Signup"}).render(),avatar:new h({link:X.a,alt:"User avatar",className:"auth-user-settings__img"}).render(),inputAvatar:new S({attributes:Z.avatar[0].attributes,name:Z.avatar[0].name,className:"auth__input auth__input_avatar"}).render(),buttonAvatar:new p({text:"Load avatar",className:"auth__button auth__button_avatar",isDisabled:!1}).render(),buttonUserInfo:new p({text:"Save user info",className:"auth__button auth__button_user-setting",isDisabled:!1}).render(),buttonPassword:new p({text:"Change",className:"auth__button auth__button_password",isDisabled:!1}).render(),isLoad:!1}),this.inputsValue,this.validate=[],this.form}getUserInfoInputs(){return this.inputsValue=this.inputsValue||{},this.validate=this.validate||[],Z.userInfo.map(t=>{const{name:e,attributes:n}=t,s=this.inputsValue[e]?`value="${this.inputsValue[e]}"`:" ";return this.validate.push(new F(t.handleBlur)),new S({attributes:n,name:e,value:s}).render()}).join("")}getPasswordInputs(){return this.inputsValue=this.inputsValue||{},this.validate=this.validate||[],Z.password.map(t=>{const{name:e,attributes:n}=t,s=this.inputsValue[e]?`value="${this.inputsValue[e]}"`:" ";return this.validate.push(new F(t.handleBlur)),new S({attributes:n,name:e,value:s}).render()}).join("")}customFormValidate(){}getFormData(){}componentDidMount(){Y.getUserInfo().then(t=>console.log(t))}render(){const{title:t,avatar:e,inputAvatar:n,buttonAvatar:s,buttonUserInfo:a,buttonPassword:r}=this.props;return J.compile({title:t,avatar:e,inputAvatar:n,buttonAvatar:s,inputsUserInfo:this.getUserInfoInputs(),buttonUserInfo:a,inputsUserPassword:this.getPasswordInputs(),buttonPassword:r})}}).use("#/error",class extends l{constructor(){super("div")}render(){return I.compile({errorCode:"Error 500",errorTitle:"Problems with server"})}}).use("#/notfound",class extends l{constructor(){super("div")}render(){return L.compile({errorCode:"Error 404",errorTitle:"Not found"})}}).start();const K=new Event("changeLocalStorage"),tt=localStorage.setItem,et=localStorage.removeItem;localStorage.removeItem=function(){et.apply(this,arguments),document.dispatchEvent(K)},localStorage.setItem=function(){console.log("do"),tt.apply(this,arguments),document.dispatchEvent(K),console.log("posle")};document.addEventListener("changeLocalStorage",(function(){if(!localStorage.getItem("login"))return i.go("#/signin"),void(i.isProtect=!0);console.log("here"),i.isProtect=!1,i.go("#/")}),!1)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL2ltYWdlcy9jaGF0LWNhcmRfX2ltZy5wbmciLCJ3ZWJwYWNrOi8vLy4vc3RhdGljL2ltYWdlcy9leGFtcGxlLXVzZXItaW1nLmpwZyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvdXRpbC9yb3V0aW5nL1JvdXRlLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy91dGlsL2lzRXF1YWwvaXNFcXVhbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvdXRpbC9yZW5kZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3V0aWwvcm91dGluZy9Sb3V0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3JvdXRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvdXRpbC9FdmVudC1idXMvRXZlbnQtYnVzLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy91dGlsL0Jsb2NrL0Jsb2NrLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy91dGlsL1NpbXBsZS10ZW1wbGF0ZS1lbmdpbmUvc2ltcGxlLXRlbXBsYXRlLWVuZ2luZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvY29tcG9uZW50cy9BdmF0YXIvdGVtcGxhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvQXZhdGFyL0F2YXRhci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvY29tcG9uZW50cy9CdXR0b24vdGVtcGxhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvQnV0dG9uL0J1dHRvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvY29tcG9uZW50cy9DaGF0Q2FyZC90ZW1wbGF0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvY29tcG9uZW50cy9DaGF0Q2FyZC9DaGF0Q2FyZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvdXRpbC9pc0xvZ2luLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy9jb21wb25lbnRzL0hlYWRlci9IZWFkZXJCdXR0b24vSGVhZGVyQnV0dG9uLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy9jb21wb25lbnRzL0hlYWRlci9IZWFkZXJCdXR0b24vdGVtcGxhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvSGVhZGVyL3RlbXBsYXRlLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy9jb21wb25lbnRzL0hlYWRlci9IZWFkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvSW5wdXQvdGVtcGxhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvSW5wdXQvSW5wdXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvTWVzc2FnZS90ZW1wbGF0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvY29tcG9uZW50cy9NZXNzYWdlL01lc3NhZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvVGl0bGUvdGVtcGxhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvVGl0bGUvVGl0bGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvU2VydmVyRXJyb3IvdGVtcGxhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NvbXBvbmVudHMvU2VydmVyRXJyb3IvU2VydmVyRXJyb3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3V0aWwvSFRUUC9IVFRQLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy9wYWdlcy9FcnJvclBhZ2VzL2Vycm9yLXRlbXBsYXRlLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy9wYWdlcy9FcnJvclBhZ2VzL1NlcnZlckVycm9yLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy9wYWdlcy9FcnJvclBhZ2VzL05vdEZvdW5kLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy9wYWdlcy9NYWluUGFnZS9NYWluUGFnZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvcGFnZXMvTWFpblBhZ2UvbWFpbi1wYWdlLXRlbXBsYXRlLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy91dGlsL3JhbmdlLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy91dGlsL3ZhbGlkYXRvcnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3BhZ2VzL1NpZ25pblBhZ2UvaW5wdXRQcm9wcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvY29tcG9uZW50cy9JbnB1dC9JbnB1dFZhbGlkYXRlLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy9mb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy9wYWdlcy9TaWduaW5QYWdlL1NpZ25pblBhZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3BhZ2VzL1NpZ25pblBhZ2Uvc2lnbmluLXRlbXBsYXRlLnRzIiwid2VicGFjazovLy8uL3NyYy9qcy9wYWdlcy9TaWdudXBQYWdlL2lucHV0UHJvcHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3BhZ2VzL1NpZ251cFBhZ2UvU2lnbnVwUGFnZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvcGFnZXMvU2lnbnVwUGFnZS9zaWdudXAtdGVtcGxhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3BhZ2VzL1VzZXJTZXR0aW5ncy9pbnB1dHNQcm9wcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvcGFnZXMvVXNlclNldHRpbmdzL1VzZXJTZXR0aW5ncy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvcGFnZXMvVXNlclNldHRpbmdzL3VzZXItc2V0dGluZ3MtdGVtcGxhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9qcy9BUEkvYXV0aC1hcGkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL0FQSS9iYXNlLWFwaS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInBhdGhuYW1lIiwidmlldyIsInByb3BzIiwidGhpcyIsIl9wYXRobmFtZSIsIl9ibG9ja0NsYXNzIiwiX2Jsb2NrIiwiX3Byb3BzIiwibWF0Y2giLCJyZW5kZXIiLCJoaWRlIiwibGhzIiwicmhzIiwicXVlcnkiLCJibG9jayIsInJvb3QiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhcHBlbmRDaGlsZCIsImdldENvbnRlbnQiLCJyb290UXVlcnkiLCJzaG93IiwiX2hhbmRsZUhhc2hDaGFuZ2UiLCJwYXRoIiwid2luZG93IiwibG9jYXRpb24iLCJoYXNoIiwiX29uUm91dGUiLCJfX2luc3RhbmNlIiwicm91dGVzIiwiaGlzdG9yeSIsIl9jdXJyZW50Um91dGUiLCJfcm9vdFF1ZXJ5IiwiX2RlZmF1bHRQYXRoIiwiaXNQcm90ZWN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJvdXRlIiwicHVzaCIsInByb3RlY3QiLCJvbnBvcHN0YXRlIiwiZXZlbnQiLCJjdXJyZW50VGFyZ2V0IiwiZ2V0Um91dGUiLCJnbyIsImxlYXZlIiwicHVzaFN0YXRlIiwiYmFjayIsImZvcndhcmQiLCJmaW5kIiwicm91dGVyIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIkV2ZW50QnVzIiwibGlzdGVuZXJzIiwiY2FsbGJhY2siLCJFcnJvciIsImZpbHRlciIsImxpc3RlbmVyIiwiYXJncyIsImZvckVhY2giLCJ0YWdOYW1lIiwiRVZFTlRTIiwiSU5JVCIsIkZMT1dfQ0RNIiwiRkxPV19DRFUiLCJGTE9XX1JFTkRFUiIsIl9lbGVtZW50IiwiX21ldGEiLCJzZXRQcm9wcyIsIm5leHRQcm9wcyIsImFzc2lnbiIsIl9tYWtlUHJvcHNQcm94eSIsIlByb3h5IiwidGFyZ2V0IiwicHJvcCIsInNldCIsImV2ZW50QnVzIiwiZW1pdCIsIl9yZWdpc3RlckV2ZW50cyIsIm9uIiwiaW5pdCIsIl9jb21wb25lbnREaWRNb3VudCIsIl9yZW5kZXIiLCJfY29tcG9uZW50RGlkVXBkYXRlIiwiX2NyZWF0ZURvY3VtZW50RWxlbWVudCIsIl9jcmVhdGVSZXNvdXJjZXMiLCJjb21wb25lbnREaWRNb3VudCIsIm9sZFByb3BzIiwibmV3UHJvcHMiLCJjb21wb25lbnREaWRVcGRhdGUiLCJpbm5lckhUTUwiLCJlbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwiZGlzcGxheSIsIlNpbXBsZVRlbXBsYXRlRW5naW5lIiwidGVtcGxhdGUiLCJfVEVNUExBVEVfUkVHRVhQIiwiX1JFR0VYUF9DVFgiLCJfdGVtcGxhdGUiLCJjdHgiLCJfY29tcGlsZVRlbXBsYXRlIiwidG1wbCIsInJlZ0V4cCIsImV4ZWMiLCJ0bXBsVmFsdWUiLCJ0cmltIiwiZGF0YSIsInJlcGxhY2UiLCJSZWdFeHAiLCJrZXlDdHgiLCJvYmoiLCJkZWZhdWx0VmFsdWUiLCJrZXlzIiwic3BsaXQiLCJyZXN1bHQiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJjb21waWxlIiwiZmlyc3RDaGlsZCIsImF2YXRhciIsInN1cGVyIiwibGluayIsImFsdCIsImNsYXNzTmFtZSIsInRleHQiLCJpc0Rpc2FibGVkIiwiZGlzYWJsZWQiLCJjaGF0Q2FyZCIsImFjdGl2YXRlSGFuZGxlIiwiQXZhdGFyIiwidGl0bGUiLCJpc0xvZ2luIiwidG1wbEJ1dHRvbiIsImJ1dHRvbnNMb2dvdXQiLCJpbml0QnV0dG9ucyIsImlucHV0IiwiYXR0cmlidXRlcyIsInNlcnZlckVycm9yIiwiYWN0aXZlQ2xhc3MiLCJIVFRQIiwiRVJST1JfTkVFRF9NRVRIT0QiLCJNRVRIT0RTIiwiR0VUIiwiUE9TVCIsInF1ZXJ5U3RyaW5naWZ5IiwicmVxdWVzdCIsImtleU5hbWUiLCJyZWR1Y2UiLCJpbmRleCIsImFyciIsInBhcmFtcyIsImdldERlZXBQYXJhbXMiLCJsZW5ndGgiLCJwYXJhbSIsInVybCIsIm9wdGlvbnMiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsInRpbWVvdXQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwid2l0aENyZWRlbnRpYWxzIiwiaXNHZXQiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsIm9uYWJvcnQiLCJvbmVycm9yIiwib250aW1lb3V0Iiwic2VuZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0ZW1wbGF0ZUVuZ2luZSIsIm1haW5QYWdlIiwiY2hhdENhcmRzIiwic3RhcnQiLCJlbmQiLCJzdGVwIiwiY291bnRlciIsInVuZGVmaW5lZCIsIk1hdGgiLCJhYnMiLCJyYW5nZSIsIm1hcCIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwicGFzc3dvcmRWYWxpZGF0b3IiLCJ2YWxpZGl0eSIsInRvb1Nob3J0IiwidmFsaWQiLCJ0ZXN0Iiwic2ltcGxlVGV4dFZhbGlkYXRvciIsInRvb0xvbmciLCJlbWFpbFZhbGlkYXRvciIsInBob25lVmFsaWRhdG9yIiwiaW5wdXRzUHJvcHMiLCJoYW5kbGVCbHVyIiwiSW5wdXRWYWxpZGF0ZSIsImN1c3RvbVZhbGlkYXRlIiwiX0ZJRUxEX1JFUVVJUkVEIiwiX3RvZ2dsZUVycm9yIiwiaXNBY3RpdmUiLCJlcnIiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsInZhbHVlTWlzc2luZyIsIl9jdXN0b21WYWxpZGF0ZSIsImhhbmRsZUZvY3VzIiwiRm9ybSIsImZvcm0iLCJidXR0b24iLCJjdXN0b21WYWxpZGF0b3IiLCJmb3JtSXNWYWxpZCIsIl9mb3JtIiwiY2hlY2tWYWxpZGl0eSIsIl9jdXN0b21WYWxpZGF0b3IiLCJfdG9nZ2xlQnV0dG9uIiwiX2J1dHRvbiIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInNpZ251cFRlbXBsYXRlUGFnZSIsInVzZXJJbmZvIiwicGFzc3dvcmQiLCJ1c2VyU2V0dGluZ3NUZW1wbGF0ZVBhZ2UiLCJhdXRoIiwiX2Jhc2VVcmwiLCJfaHR0cCIsInJlcyIsInN0YXR1cyIsInJlc3BvbnNlIiwiX3VybCIsInBvc3QiLCJ0aGVuIiwiZ2V0UmVzcG9uc2UiLCJidXR0b25zIiwiaXRlbSIsImpvaW4iLCJsb2dvdXQiLCJyZW1vdmVJdGVtIiwiY2F0Y2giLCJwcmV2ZW50RGVmYXVsdCIsImJ1dHRvbnNMb2dpbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJvbmNsaWNrIiwiaGVhZGVyQ2xpY2tFdmVudHMiLCJoZWFkZXJMb2dvQ2xpY2tIZWFkZXIiLCJsb2dpbk5hbWUiLCJmZXRjaCIsImNyZWRlbnRpYWxzIiwibG9naW4iLCJ1c2VQcm90ZWN0IiwiaW5wdXRFbGVtZW50Iiwic2VuZEJ1dHRvbiIsInNwYWNlcyIsInBhcmVudE5vZGUiLCJyZXNldCIsImhhbmRsZUlucHV0IiwiaGFuZGxlU2VuZE1lc3NhZ2UiLCJvbmlucHV0IiwiaGFuZGxlQ2xpY2tCdXR0b24iLCJ1c2VEZWZhdWx0IiwiYWx0TGlua0NsYXNzTmFtZSIsImFsdFRleHQiLCJpc0xvYWQiLCJpbnB1dHNWYWx1ZSIsInZhbGlkYXRlIiwic2F2ZVZhbHVlIiwic2lnbmluIiwic2V0SXRlbSIsImZpbmFsbHkiLCJmb3JtQ29udGFpbmVyIiwiZm9ybUJ1dHRvbiIsImlucHV0cyIsImFsdEJ1dHRvbiIsIm9uZm9jdXMiLCJvbmJsdXIiLCJvbmNoYW5nZSIsIl9nZXRJbnB1dHNWYWx1ZSIsImhhbmRsZVNpZ25pbkNsaWNrIiwiZ29TaWdudXAiLCJsb2FkZXJBY3RpdmF0ZUNsYXNzIiwiX2dldElucHV0cyIsInVzZSIsInNpZ251cCIsImdvU2lnbmluIiwiaW5wdXRBdmF0YXIiLCJidXR0b25BdmF0YXIiLCJidXR0b25Vc2VySW5mbyIsImJ1dHRvblBhc3N3b3JkIiwiZ2V0VXNlckluZm8iLCJpbnB1dHNVc2VySW5mbyIsImdldFVzZXJJbmZvSW5wdXRzIiwiaW5wdXRzVXNlclBhc3N3b3JkIiwiZ2V0UGFzc3dvcmRJbnB1dHMiLCJlcnJvckNvZGUiLCJlcnJvclRpdGxlIiwiZXZlbnRJdGVtSW5zZXJ0ZWQiLCJFdmVudCIsInN0b3JhZ2VTZXRJdGVtIiwic3RvcmFnZVJlbW92ZUl0ZW0iLCJhcHBseSIsImFyZ3VtZW50cyIsImRpc3BhdGNoRXZlbnQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUs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QkosaUJBQ0FLLG1CQUFvQnpTLEtBQUswUyxvQkFDekJMLHNCRXpKSE4sSUFBSSxVakI1QlAsY0FBMEIsRUFDeEIsY0FDRTFLLE1BQU0sT0FHUixTQUNFLE9BQU93RCxFQUFlM0QsUUFBUSxDQUM1QnlMLFVBQVcsWUFDWEMsV0FBWSw0QmlCcUJmYixJQUFJLGFoQjdCUCxjQUF1QixFQUNyQixjQUNFMUssTUFBTSxPQUdSLFNBQ0UsT0FBTyxFQUFlSCxRQUFRLENBQzVCeUwsVUFBVyxZQUNYQyxXQUFZLGlCZ0JzQmY1SCxRQUVILE1BQU02SCxFQUFvQixJQUFJQyxNQUFNLHNCQUM5QkMsR0FBaUJoUSxhQUFha08sUUFDOUIrQixHQUFvQmpRLGFBQWFvTSxXQUV2Q3BNLGFBQWFvTSxXQUFhLFdBQ3hCNkQsR0FBa0JDLE1BQU1qVCxLQUFNa1QsV0FDOUJyUyxTQUFTc1MsY0FBY04sSUFHekI5UCxhQUFha08sUUFBVSxXQUNyQnhGLFFBQVFDLElBQUksTUFDWnFILEdBQWVFLE1BQU1qVCxLQUFNa1QsV0FDM0JyUyxTQUFTc1MsY0FBY04sR0FDdkJwSCxRQUFRQyxJQUFJLFVBY2Q3SyxTQUFTbUIsaUJBQWlCLHNCQVhILFdBQ3JCLElBQUtlLGFBQWFDLFFBQVEsU0FHeEIsT0FGQSxFQUFPUixHQUFHLGlCQUNWLEVBQU9ULFdBQVksR0FHckIwSixRQUFRQyxJQUFJLFFBQ1osRUFBTzNKLFdBQVksRUFDbkIsRUFBT1MsR0FBRyxTQUdvRCIsImZpbGUiOiJtYWluLjllMzdiODM0ZWU0ZGVjYTViMmEwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1hZ2VzL2NoYXQtY2FyZF9faW1nLnBuZ1wiOyIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltYWdlcy9leGFtcGxlLXVzZXItaW1nLmpwZ1wiOyIsImltcG9ydCB7IGlzRXF1YWwgfSBmcm9tIFwiLi4vaXNFcXVhbC9pc0VxdWFsXCI7XHJcbmltcG9ydCB7IHJlbmRlciB9IGZyb20gXCIuLi9yZW5kZXJcIjtcclxuaW1wb3J0IHsgSUJsb2NrIH0gZnJvbSBcIi4uL0Jsb2NrL0Jsb2NrXCI7XHJcblxyXG50eXBlIHJvdXRlUHJvcHMgPSB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xyXG50eXBlIGJsb2NrQ29uc3RydWN0b3IgPSBuZXcgKFxyXG4gIHRhZ05hbWU/OiBzdHJpbmcsXHJcbiAgcHJvcHM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB8IGJvb2xlYW4gfVxyXG4pID0+IElCbG9jaztcclxuXHJcbmludGVyZmFjZSBJUm91dGUge1xyXG4gIF9wYXRobmFtZTogc3RyaW5nO1xyXG4gIF9ibG9ja0NsYXNzOiBibG9ja0NvbnN0cnVjdG9yO1xyXG4gIF9ibG9jazogSUJsb2NrO1xyXG4gIF9wcm9wczogcm91dGVQcm9wcztcclxuXHJcbiAgbmF2aWdhdGUocGF0aG5hbWU6IHN0cmluZyk6IHZvaWQ7XHJcbiAgbGVhdmUoKTogdm9pZDtcclxuICBtYXRjaChwYXRobmFtZTogc3RyaW5nKTogYm9vbGVhbjtcclxuICByZW5kZXIoKTogdm9pZDtcclxufVxyXG5cclxuY2xhc3MgUm91dGUgaW1wbGVtZW50cyBJUm91dGUge1xyXG4gIF9wYXRobmFtZTogc3RyaW5nO1xyXG4gIF9ibG9ja0NsYXNzOiBibG9ja0NvbnN0cnVjdG9yO1xyXG4gIF9ibG9jazogSUJsb2NrO1xyXG4gIF9wcm9wczogcm91dGVQcm9wcztcclxuICBjb25zdHJ1Y3RvcihwYXRobmFtZTogc3RyaW5nLCB2aWV3OiBibG9ja0NvbnN0cnVjdG9yLCBwcm9wczogcm91dGVQcm9wcykge1xyXG4gICAgdGhpcy5fcGF0aG5hbWUgPSBwYXRobmFtZTtcclxuICAgIHRoaXMuX2Jsb2NrQ2xhc3MgPSB2aWV3O1xyXG4gICAgdGhpcy5fYmxvY2sgPSBudWxsO1xyXG4gICAgdGhpcy5fcHJvcHMgPSBwcm9wcztcclxuICB9XHJcblxyXG4gIG5hdmlnYXRlKHBhdGhuYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLm1hdGNoKHBhdGhuYW1lKSkge1xyXG4gICAgICB0aGlzLl9wYXRobmFtZSA9IHBhdGhuYW1lO1xyXG4gICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGVhdmUoKSB7XHJcbiAgICBpZiAodGhpcy5fYmxvY2spIHtcclxuICAgICAgdGhpcy5fYmxvY2suaGlkZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbWF0Y2gocGF0aG5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIGlzRXF1YWwocGF0aG5hbWUsIHRoaXMuX3BhdGhuYW1lKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5fYmxvY2spIHtcclxuICAgICAgdGhpcy5fYmxvY2sgPSBuZXcgdGhpcy5fYmxvY2tDbGFzcygpO1xyXG4gICAgICByZW5kZXIodGhpcy5fcHJvcHMucm9vdFF1ZXJ5LCB0aGlzLl9ibG9jayk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9ibG9jay5zaG93KCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBSb3V0ZSwgSVJvdXRlLCBibG9ja0NvbnN0cnVjdG9yIH07XHJcbiIsImV4cG9ydCBjb25zdCBpc0VxdWFsID0gKGxoczoge30sIHJoczoge30pOiBib29sZWFuID0+IHtcclxuICByZXR1cm4gbGhzID09PSByaHM7XHJcbn07XHJcbiIsImltcG9ydCB7IElCbG9jayB9IGZyb20gXCIuL0Jsb2NrL0Jsb2NrLmpzXCI7XHJcblxyXG5jb25zdCByZW5kZXIgPSAocXVlcnk6IHN0cmluZywgYmxvY2s6IElCbG9jayk6IEVsZW1lbnQgPT4ge1xyXG4gIGNvbnN0IHJvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHF1ZXJ5KTtcclxuXHJcbiAgcm9vdC5hcHBlbmRDaGlsZChibG9jay5nZXRDb250ZW50KCkpO1xyXG4gIHJldHVybiByb290O1xyXG59O1xyXG5cclxuZXhwb3J0IHsgcmVuZGVyIH07XHJcbiIsImltcG9ydCB7IFJvdXRlLCBJUm91dGUsIGJsb2NrQ29uc3RydWN0b3IgfSBmcm9tIFwiLi9Sb3V0ZVwiO1xyXG5pbXBvcnQgcm91dGVyIGZyb20gXCIuLi8uLi9yb3V0ZXJcIjtcclxuXHJcbmludGVyZmFjZSBJUm91dGVyIHtcclxuICByb290UXVlcnk6IHN0cmluZztcclxuICByb3V0ZXM6IElSb3V0ZVtdO1xyXG4gIGhpc3Rvcnk6IEhpc3Rvcnk7XHJcbiAgX2N1cnJlbnRSb3V0ZTogSVJvdXRlO1xyXG4gIF9yb290UXVlcnk6IHN0cmluZztcclxuICBfX2luc3RhbmNlOiBJUm91dGVyO1xyXG4gIGlzUHJvdGVjdDogYm9vbGVhbjtcclxuICBfZGVmYXVsdFBhdGg6IHN0cmluZztcclxuICBfaGFuZGxlSGFzaENoYW5nZSgpOiB2b2lkO1xyXG4gIHVzZShwYXRobmFtZTogc3RyaW5nLCBibG9jazogYmxvY2tDb25zdHJ1Y3Rvcik6IHRoaXM7XHJcbiAgdXNlRGVmYXVsdChwYXRobmFtZTogc3RyaW5nLCBibG9jazogYmxvY2tDb25zdHJ1Y3Rvcik6IHRoaXM7XHJcbiAgdXNlUHJvdGVjdChwYXRobmFtZTogc3RyaW5nLCBibG9jazogYmxvY2tDb25zdHJ1Y3Rvcik6IHRoaXM7XHJcbiAgc3RhcnQoKTogdm9pZDtcclxuICBfb25Sb3V0ZShwYXRobmFtZTogc3RyaW5nKTogdm9pZDtcclxuICBnbyhwYXRobmFtZTogc3RyaW5nKTogdm9pZDtcclxuICBiYWNrKCk6IHZvaWQ7XHJcbiAgZm9yd2FyZCgpOiB2b2lkO1xyXG4gIGdldFJvdXRlKHBhdGhuYW1lOiBzdHJpbmcpOiBJUm91dGU7XHJcbn1cclxuXHJcbmNsYXNzIFJvdXRlciBpbXBsZW1lbnRzIElSb3V0ZXIge1xyXG4gIHJvb3RRdWVyeTogc3RyaW5nO1xyXG4gIHJvdXRlczogSVJvdXRlW107XHJcbiAgaGlzdG9yeTogSGlzdG9yeTtcclxuICBfY3VycmVudFJvdXRlOiBJUm91dGU7XHJcbiAgX3Jvb3RRdWVyeTogc3RyaW5nO1xyXG4gIF9faW5zdGFuY2U6IElSb3V0ZXI7XHJcbiAgaXNQcm90ZWN0OiBib29sZWFuO1xyXG4gIF9kZWZhdWx0UGF0aDogc3RyaW5nO1xyXG4gIHN0YXRpYyBfX2luc3RhbmNlOiBJUm91dGVyO1xyXG4gIGNvbnN0cnVjdG9yKHJvb3RRdWVyeT86IHN0cmluZykge1xyXG4gICAgaWYgKFJvdXRlci5fX2luc3RhbmNlKSB7XHJcbiAgICAgIHJldHVybiBSb3V0ZXIuX19pbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJvdXRlcyA9IFtdO1xyXG4gICAgdGhpcy5oaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XHJcbiAgICB0aGlzLl9jdXJyZW50Um91dGUgPSBudWxsO1xyXG4gICAgdGhpcy5fcm9vdFF1ZXJ5ID0gcm9vdFF1ZXJ5O1xyXG4gICAgdGhpcy5fZGVmYXVsdFBhdGg7XHJcbiAgICB0aGlzLmlzUHJvdGVjdCA9IHRydWU7XHJcblxyXG4gICAgUm91dGVyLl9faW5zdGFuY2UgPSB0aGlzO1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiaGFzaGNoYW5nZVwiLCB0aGlzLl9oYW5kbGVIYXNoQ2hhbmdlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVIYXNoQ2hhbmdlID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgY29uc3QgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xyXG4gICAgdGhpcy5fb25Sb3V0ZShwYXRoKTtcclxuICB9O1xyXG5cclxuICB1c2UocGF0aG5hbWU6IHN0cmluZywgYmxvY2s6IGJsb2NrQ29uc3RydWN0b3IpOiB0aGlzIHtcclxuICAgIGNvbnN0IHJvdXRlID0gbmV3IFJvdXRlKHBhdGhuYW1lLCBibG9jaywgeyByb290UXVlcnk6IHRoaXMuX3Jvb3RRdWVyeSB9KTtcclxuICAgIHRoaXMucm91dGVzLnB1c2gocm91dGUpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICB1c2VEZWZhdWx0KHBhdGhuYW1lOiBzdHJpbmcsIGJsb2NrOiBibG9ja0NvbnN0cnVjdG9yKTogdGhpcyB7XHJcbiAgICBjb25zdCByb3V0ZSA9IG5ldyBSb3V0ZShwYXRobmFtZSwgYmxvY2ssIHtcclxuICAgICAgcm9vdFF1ZXJ5OiB0aGlzLl9yb290UXVlcnksXHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2RlZmF1bHRQYXRoID0gcGF0aG5hbWU7XHJcbiAgICB0aGlzLnJvdXRlcy5wdXNoKHJvdXRlKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgdXNlUHJvdGVjdChwYXRobmFtZTogc3RyaW5nLCBibG9jazogYmxvY2tDb25zdHJ1Y3Rvcik6IHRoaXMge1xyXG4gICAgY29uc3Qgcm91dGUgPSBuZXcgUm91dGUocGF0aG5hbWUsIGJsb2NrLCB7XHJcbiAgICAgIHJvb3RRdWVyeTogdGhpcy5fcm9vdFF1ZXJ5LFxyXG4gICAgICBwcm90ZWN0OiB0cnVlLFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnJvdXRlcy5wdXNoKHJvdXRlKTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgc3RhcnQoKTogdm9pZCB7XHJcbiAgICB3aW5kb3cub25wb3BzdGF0ZSA9ICgoZXZlbnQ6IGFueSk6IHZvaWQgPT4ge1xyXG4gICAgICB0aGlzLl9vblJvdXRlKGV2ZW50LmN1cnJlbnRUYXJnZXQubG9jYXRpb24uaGFzaCk7XHJcbiAgICB9KS5iaW5kKHRoaXMpO1xyXG5cclxuICAgIHRoaXMuX29uUm91dGUod2luZG93LmxvY2F0aW9uLmhhc2gpO1xyXG4gIH1cclxuXHJcbiAgX29uUm91dGUocGF0aG5hbWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3Qgcm91dGUgPSB0aGlzLmdldFJvdXRlKHBhdGhuYW1lKTtcclxuICAgIGlmICghcm91dGUpIHtcclxuICAgICAgdGhpcy5nbyhcIiMvbm90Zm91bmRcIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChyb3V0ZS5fcHJvcHMucHJvdGVjdCAmJiB0aGlzLmlzUHJvdGVjdCkge1xyXG4gICAgICB0aGlzLmdvKHRoaXMuX2RlZmF1bHRQYXRoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLl9jdXJyZW50Um91dGUgJiYgdGhpcy5fY3VycmVudFJvdXRlICE9PSByb3V0ZSkge1xyXG4gICAgICB0aGlzLl9jdXJyZW50Um91dGUubGVhdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9jdXJyZW50Um91dGUgPSByb3V0ZTtcclxuICAgIHJvdXRlLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgZ28ocGF0aG5hbWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgdGhpcy5oaXN0b3J5LnB1c2hTdGF0ZSh7fSwgXCJcIiwgcGF0aG5hbWUpO1xyXG4gICAgdGhpcy5fb25Sb3V0ZShwYXRobmFtZSk7XHJcbiAgfVxyXG5cclxuICBiYWNrKCk6IHZvaWQge1xyXG4gICAgdGhpcy5oaXN0b3J5LmJhY2soKTtcclxuICB9XHJcblxyXG4gIGZvcndhcmQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmhpc3RvcnkuZm9yd2FyZCgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0Um91dGUocGF0aG5hbWU6IHN0cmluZyk6IElSb3V0ZSB7XHJcbiAgICByZXR1cm4gdGhpcy5yb3V0ZXMuZmluZCgocm91dGUpID0+IHtcclxuICAgICAgcmV0dXJuIHJvdXRlLl9wYXRobmFtZS5tYXRjaChwYXRobmFtZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFJvdXRlciwgSVJvdXRlciB9O1xyXG4iLCJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiLi91dGlsL3JvdXRpbmcvUm91dGVyXCI7XHJcblxyXG5jb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKFwiI21haW4tY29udGVudFwiKTtcclxucm91dGVyLmlzUHJvdGVjdCA9ICFsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImxvZ2luXCIpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xyXG4iLCJpbnRlcmZhY2UgSUV2ZW50QnVzIHtcclxuICBsaXN0ZW5lcnM6IHsgW2tleTogc3RyaW5nXTogRnVuY3Rpb25bXSB9O1xyXG5cclxuICBvbihldmVudDogc3RyaW5nLCBjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkO1xyXG4gIG9mZihldmVudDogc3RyaW5nLCBjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkO1xyXG4gIGVtaXQoZXZlbnQ6IHN0cmluZywgLi4uYXJnczogc3RyaW5nW10pOiB2b2lkIHwgdW5rbm93bjtcclxufVxyXG5cclxuY2xhc3MgRXZlbnRCdXMgaW1wbGVtZW50cyBJRXZlbnRCdXMge1xyXG4gIGxpc3RlbmVyczogeyBba2V5OiBzdHJpbmddOiBGdW5jdGlvbltdIH07XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xyXG4gIH1cclxuXHJcbiAgb24oZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKSB7XHJcbiAgICBpZiAoIXRoaXMubGlzdGVuZXJzW2V2ZW50XSkge1xyXG4gICAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0gPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0ucHVzaChjYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICBvZmYoZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKSB7XHJcbiAgICBpZiAoIXRoaXMubGlzdGVuZXJzW2V2ZW50XSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYNCd0LXRgiDRgdC+0LHRi9GC0LjRjzogJHtldmVudH1gKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0gPSB0aGlzLmxpc3RlbmVyc1tldmVudF0uZmlsdGVyKFxyXG4gICAgICAobGlzdGVuZXIpID0+IGxpc3RlbmVyICE9PSBjYWxsYmFja1xyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGVtaXQoZXZlbnQ6IHN0cmluZywgLi4uYXJnczogc3RyaW5nW10pIHtcclxuICAgIGlmICghdGhpcy5saXN0ZW5lcnNbZXZlbnRdKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihg0J3QtdGCINGB0L7QsdGL0YLQuNGPOiAke2V2ZW50fWApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50XS5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICBsaXN0ZW5lciguLi5hcmdzKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgRXZlbnRCdXMsIElFdmVudEJ1cyB9O1xyXG4iLCJpbXBvcnQgeyBFdmVudEJ1cywgSUV2ZW50QnVzIH0gZnJvbSBcIi4uL0V2ZW50LWJ1cy9FdmVudC1idXNcIjtcclxuXHJcbnR5cGUgcHJvcHNPYmplY3QgPSB7XHJcbiAgW2tleTogc3RyaW5nXTogYW55O1xyXG59O1xyXG5cclxuaW50ZXJmYWNlIElCbG9jayB7XHJcbiAgRVZFTlRTOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xyXG4gIF9lbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICBfbWV0YTogeyB0YWdOYW1lOiBzdHJpbmc7IHByb3BzOiBwcm9wc09iamVjdCB9O1xyXG4gIHByb3BzOiBwcm9wc09iamVjdDtcclxuICBldmVudEJ1cygpOiBJRXZlbnRCdXM7XHJcblxyXG4gIF9yZWdpc3RlckV2ZW50cyhldmVudEJ1czogSUV2ZW50QnVzKTogdm9pZDtcclxuICBfY3JlYXRlUmVzb3VyY2VzKCk6IHZvaWQ7XHJcbiAgaW5pdCgpOiB2b2lkO1xyXG4gIF9jb21wb25lbnREaWRNb3VudCgpOiB2b2lkO1xyXG4gIGNvbXBvbmVudERpZE1vdW50KCk6IHZvaWQ7XHJcbiAgX2NvbXBvbmVudERpZFVwZGF0ZShvbGRQcm9wczogcHJvcHNPYmplY3QsIG5ld1Byb3BzOiBwcm9wc09iamVjdCk6IHZvaWQ7XHJcbiAgY29tcG9uZW50RGlkVXBkYXRlKG9sZFByb3BzPzogcHJvcHNPYmplY3QsIG5ld1Byb3BzPzogcHJvcHNPYmplY3QpOiBib29sZWFuO1xyXG4gIHNldFByb3BzKG5leHRQcm9wczogcHJvcHNPYmplY3QpOiB2b2lkO1xyXG4gIF9yZW5kZXIoKTogdm9pZDtcclxuICByZW5kZXIoKTogc3RyaW5nO1xyXG4gIGdldENvbnRlbnQoKTogRWxlbWVudDtcclxuICBfbWFrZVByb3BzUHJveHkocHJvcHM6IHByb3BzT2JqZWN0KTogcHJvcHNPYmplY3Q7XHJcbiAgX2NyZWF0ZURvY3VtZW50RWxlbWVudCh0YWdOYW1lOiBzdHJpbmcpOiBIVE1MRWxlbWVudDtcclxuICBzaG93KCk6IHZvaWQ7XHJcbiAgaGlkZSgpOiB2b2lkO1xyXG59XHJcblxyXG5jbGFzcyBCbG9jayBpbXBsZW1lbnRzIElCbG9jayB7XHJcbiAgRVZFTlRTOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xyXG4gICAgSU5JVDogXCJpbml0XCIsXHJcbiAgICBGTE9XX0NETTogXCJmbG93OmNvbXBvbmVudC1kaWQtbW91bnRcIixcclxuICAgIEZMT1dfQ0RVOiBcImZsb3c6Y29tcG9uZW50LWRpZC11cGRhdGVcIixcclxuICAgIEZMT1dfUkVOREVSOiBcImZsb3c6cmVuZGVyXCIsXHJcbiAgfTtcclxuXHJcbiAgX2VsZW1lbnQ6IEhUTUxFbGVtZW50ID0gbnVsbDtcclxuICBfbWV0YTogeyB0YWdOYW1lOiBzdHJpbmc7IHByb3BzOiBwcm9wc09iamVjdCB9ID0gbnVsbDtcclxuXHJcbiAgcHJvcHM6IHByb3BzT2JqZWN0O1xyXG4gIGV2ZW50QnVzOiAoKSA9PiBJRXZlbnRCdXM7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHRhZ05hbWU6IHN0cmluZyA9IFwiZGl2XCIsIHByb3BzOiBwcm9wc09iamVjdCA9IHt9KSB7XHJcbiAgICBjb25zdCBldmVudEJ1cyA9IG5ldyBFdmVudEJ1cygpO1xyXG4gICAgdGhpcy5fbWV0YSA9IHtcclxuICAgICAgdGFnTmFtZSxcclxuICAgICAgcHJvcHMsXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucHJvcHMgPSB0aGlzLl9tYWtlUHJvcHNQcm94eShwcm9wcyk7XHJcblxyXG4gICAgdGhpcy5ldmVudEJ1cyA9ICgpOiBJRXZlbnRCdXMgPT4gZXZlbnRCdXM7XHJcbiAgICB0aGlzLl9yZWdpc3RlckV2ZW50cyhldmVudEJ1cyk7XHJcbiAgICBldmVudEJ1cy5lbWl0KHRoaXMuRVZFTlRTLklOSVQpO1xyXG4gICAgdGhpcy5zZXRQcm9wcyA9IHRoaXMuc2V0UHJvcHMuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIF9yZWdpc3RlckV2ZW50cyhldmVudEJ1czogSUV2ZW50QnVzKTogdm9pZCB7XHJcbiAgICBldmVudEJ1cy5vbih0aGlzLkVWRU5UUy5JTklULCB0aGlzLmluaXQuYmluZCh0aGlzKSk7XHJcbiAgICBldmVudEJ1cy5vbih0aGlzLkVWRU5UUy5GTE9XX0NETSwgdGhpcy5fY29tcG9uZW50RGlkTW91bnQuYmluZCh0aGlzKSk7XHJcbiAgICBldmVudEJ1cy5vbih0aGlzLkVWRU5UUy5GTE9XX1JFTkRFUiwgdGhpcy5fcmVuZGVyLmJpbmQodGhpcykpO1xyXG4gICAgZXZlbnRCdXMub24odGhpcy5FVkVOVFMuRkxPV19DRFUsIHRoaXMuX2NvbXBvbmVudERpZFVwZGF0ZS5iaW5kKHRoaXMpKTtcclxuICB9XHJcblxyXG4gIF9jcmVhdGVSZXNvdXJjZXMoKTogdm9pZCB7XHJcbiAgICBjb25zdCB7IHRhZ05hbWUgfSA9IHRoaXMuX21ldGE7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fY3JlYXRlRG9jdW1lbnRFbGVtZW50KHRhZ05hbWUpO1xyXG4gIH1cclxuXHJcbiAgaW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMuX2NyZWF0ZVJlc291cmNlcygpO1xyXG4gICAgdGhpcy5ldmVudEJ1cygpLmVtaXQodGhpcy5FVkVOVFMuRkxPV19DRE0pO1xyXG4gIH1cclxuXHJcbiAgX2NvbXBvbmVudERpZE1vdW50KCk6IHZvaWQge1xyXG4gICAgdGhpcy5jb21wb25lbnREaWRNb3VudCgpO1xyXG4gICAgdGhpcy5ldmVudEJ1cygpLmVtaXQodGhpcy5FVkVOVFMuRkxPV19SRU5ERVIpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKTogdm9pZCB7fVxyXG5cclxuICBfY29tcG9uZW50RGlkVXBkYXRlKG9sZFByb3BzOiBwcm9wc09iamVjdCwgbmV3UHJvcHM6IHByb3BzT2JqZWN0KTogdm9pZCB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IHRoaXMuY29tcG9uZW50RGlkVXBkYXRlKCk7XHJcbiAgICBpZiAoIXJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuX3JlbmRlcigpO1xyXG4gICAgdGhpcy5ldmVudEJ1cygpLmVtaXQodGhpcy5FVkVOVFMuRkxPV19SRU5ERVIpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBzZXRQcm9wcyA9IChuZXh0UHJvcHM6IHByb3BzT2JqZWN0KTogdm9pZCA9PiB7XHJcbiAgICBpZiAoIW5leHRQcm9wcykge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLnByb3BzLCBuZXh0UHJvcHMpO1xyXG4gIH07XHJcblxyXG4gIGdldCBlbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlcigpOiB2b2lkIHtcclxuICAgIGNvbnN0IGJsb2NrID0gdGhpcy5yZW5kZXIoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQuaW5uZXJIVE1MID0gYmxvY2s7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKTogYW55IHt9XHJcblxyXG4gIGdldENvbnRlbnQoKTogSFRNTEVsZW1lbnQge1xyXG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9tYWtlUHJvcHNQcm94eSA9IChwcm9wczogcHJvcHNPYmplY3QpOiBwcm9wc09iamVjdCA9PiB7XHJcbiAgICByZXR1cm4gbmV3IFByb3h5KHByb3BzLCB7XHJcbiAgICAgIGdldCh0YXJnZXQ6IHByb3BzT2JqZWN0LCBwcm9wOiBzdHJpbmcgfCBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRhcmdldFtwcm9wXTtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgPyB2YWx1ZS5iaW5kKHRhcmdldCkgOiB2YWx1ZTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHNldDogKHRhcmdldDogYW55LCBwcm9wOiBzdHJpbmcgfCBudW1iZXIsIHZhbHVlOiBzdHJpbmcpOiBib29sZWFuID0+IHtcclxuICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLmV2ZW50QnVzKCkuZW1pdCh0aGlzLkVWRU5UUy5GTE9XX0NEVSwgeyAuLi50YXJnZXQgfSwgdGFyZ2V0KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSxcclxuICAgICAgZGVsZXRlUHJvcGVydHkoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gYWNjZXNzXCIpO1xyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgX2NyZWF0ZURvY3VtZW50RWxlbWVudCh0YWdOYW1lOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcclxuICB9XHJcblxyXG4gIHNob3coKTogdm9pZCB7XHJcbiAgICB0aGlzLmdldENvbnRlbnQoKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gIH1cclxuXHJcbiAgaGlkZSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZ2V0Q29udGVudCgpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IEJsb2NrLCBJQmxvY2sgfTtcclxuIiwidHlwZSBvYmplY3RLZXlTdHJpbmdOdW1iZXIgPSB7XHJcbiAgW2tleTogc3RyaW5nXTogYW55O1xyXG59O1xyXG5cclxuaW50ZXJmYWNlIElTaW1wbGVUZW1wbGF0ZUVuZ2luZSB7XHJcbiAgX1RFTVBMQVRFX1JFR0VYUDogUmVnRXhwO1xyXG4gIF9SRUdFWFBfQ1RYOiBSZWdFeHA7XHJcbiAgX3RlbXBsYXRlOiBzdHJpbmc7XHJcblxyXG4gIGNvbXBpbGUoY3R4Pzogb2JqZWN0S2V5U3RyaW5nTnVtYmVyLCBjbGFzc05hbWU/OiBzdHJpbmcpOiBzdHJpbmc7XHJcbiAgX2NvbXBpbGVUZW1wbGF0ZShjdHg/OiBvYmplY3RLZXlTdHJpbmdOdW1iZXIpOiBzdHJpbmc7XHJcbiAgZ2V0KFxyXG4gICAgb2JqOiBvYmplY3RLZXlTdHJpbmdOdW1iZXIsXHJcbiAgICBwYXRoOiBzdHJpbmcsXHJcbiAgICBkZWZhdWx0VmFsdWU/OiBzdHJpbmcgfCBib29sZWFuIHwgRnVuY3Rpb25cclxuICApOiBzdHJpbmcgfCBib29sZWFuIHwgRnVuY3Rpb247XHJcbiAgZ2V0Tm9kZShjdHg6IG9iamVjdEtleVN0cmluZ051bWJlcik6IENoaWxkTm9kZSB8IEhUTUxFbGVtZW50O1xyXG59XHJcblxyXG5jbGFzcyBTaW1wbGVUZW1wbGF0ZUVuZ2luZSBpbXBsZW1lbnRzIElTaW1wbGVUZW1wbGF0ZUVuZ2luZSB7XHJcbiAgX1RFTVBMQVRFX1JFR0VYUDogUmVnRXhwID0gL1xce1xcJSguKj8pXFwlXFx9L2dpO1xyXG4gIF9SRUdFWFBfQ1RYOiBSZWdFeHAgPSAvXFwoXFwpXFwoXFwlKC4qPylcXCVcXCkvZ2k7XHJcbiAgX3RlbXBsYXRlOiBzdHJpbmc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHRlbXBsYXRlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuX3RlbXBsYXRlID0gdGVtcGxhdGU7XHJcbiAgfVxyXG5cclxuICBjb21waWxlKGN0eD86IG9iamVjdEtleVN0cmluZ051bWJlcik6IHN0cmluZyB7XHJcbiAgICBsZXQgaHRtbCA9IHRoaXMuX2NvbXBpbGVUZW1wbGF0ZShjdHgpO1xyXG4gICAgcmV0dXJuIGh0bWw7XHJcbiAgfVxyXG5cclxuICBfY29tcGlsZVRlbXBsYXRlKGN0eDogb2JqZWN0S2V5U3RyaW5nTnVtYmVyKSB7XHJcbiAgICBsZXQgdG1wbCA9IHRoaXMuX3RlbXBsYXRlO1xyXG4gICAgbGV0IGtleSA9IG51bGw7XHJcbiAgICBjb25zdCByZWdFeHAgPSB0aGlzLl9URU1QTEFURV9SRUdFWFA7XHJcblxyXG4gICAgd2hpbGUgKChrZXkgPSByZWdFeHAuZXhlYyh0bXBsKSkpIHtcclxuICAgICAgaWYgKGtleVsxXSkge1xyXG4gICAgICAgIGNvbnN0IHRtcGxWYWx1ZTogYW55ID0ga2V5WzFdLnRyaW0oKTtcclxuICAgICAgICBjb25zdCBkYXRhOiBhbnkgPSB0aGlzLmdldChjdHgsIHRtcGxWYWx1ZSk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgIHdpbmRvd1t0bXBsVmFsdWVdID0gZGF0YTtcclxuICAgICAgICAgIHRtcGwgPSB0bXBsLnJlcGxhY2UoXHJcbiAgICAgICAgICAgIG5ldyBSZWdFeHAoa2V5WzBdLCBcImdpXCIpLFxyXG4gICAgICAgICAgICBgd2luZG93LiR7dG1wbFZhbHVlfSgpYFxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICBjb25zdCBrZXlDdHggPSB0aGlzLl9SRUdFWFBfQ1RYLmV4ZWModG1wbCk7XHJcbiAgICAgICAgICBpZiAoa2V5Q3R4KSB7XHJcbiAgICAgICAgICAgIHRtcGwgPSB0bXBsLnJlcGxhY2Uoa2V5Q3R4WzBdLCBgLiR7a2V5Q3R4WzFdLnRyaW0oKX0oKWApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0bXBsID0gdG1wbC5yZXBsYWNlKG5ldyBSZWdFeHAoa2V5WzBdLCBcImdpXCIpLCBkYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBjb250aW51ZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0bXBsO1xyXG4gIH1cclxuXHJcbiAgZ2V0KFxyXG4gICAgb2JqOiBvYmplY3RLZXlTdHJpbmdOdW1iZXIsXHJcbiAgICBwYXRoOiBzdHJpbmcsXHJcbiAgICBkZWZhdWx0VmFsdWU/OiBzdHJpbmcgfCBib29sZWFuIHwgRnVuY3Rpb25cclxuICApOiBzdHJpbmcgfCBib29sZWFuIHwgRnVuY3Rpb24ge1xyXG4gICAgY29uc3Qga2V5cyA9IHBhdGgucmVwbGFjZShcIl1cIiwgXCJcIikuc3BsaXQoL1tcXFtcXC5dL2dpKTtcclxuICAgIGxldCByZXN1bHQ6IGFueSA9IG9iajtcclxuICAgIGZvciAobGV0IGtleSBvZiBrZXlzKSB7XHJcbiAgICAgIGNvbnN0IHZhbHVlID0gcmVzdWx0W2tleV07XHJcblxyXG4gICAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcclxuICAgICAgfVxyXG4gICAgICByZXN1bHQgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQgfHwgZGVmYXVsdFZhbHVlO1xyXG4gIH1cclxuXHJcbiAgZ2V0Tm9kZShjdHg/OiBvYmplY3RLZXlTdHJpbmdOdW1iZXIpOiBIVE1MRWxlbWVudCB7XHJcbiAgICBjb25zdCBlbGVtZW50OiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG4gICAgZWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgdGhpcy5jb21waWxlKGN0eCkudHJpbSgpKTtcclxuXHJcbiAgICByZXR1cm4gZWxlbWVudC5maXJzdENoaWxkIGFzIEhUTUxFbGVtZW50O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgU2ltcGxlVGVtcGxhdGVFbmdpbmUsIG9iamVjdEtleVN0cmluZ051bWJlciB9O1xyXG4iLCJjb25zdCB0ZW1wbGF0ZTogc3RyaW5nID0gYFxyXG4gICAgPGltZ1xyXG4gICAgICBzcmM9XCJ7JSBsaW5rICV9XCJcclxuICAgICAgYWx0PVwieyUgYWx0ICV9XCJcclxuICAgICAgY2xhc3M9XCJ7JSBjbGFzc05hbWUgJX1cIlxyXG4gICAgLz5cclxuYDtcclxuXHJcbmV4cG9ydCB7IHRlbXBsYXRlIH07XHJcbiIsImltcG9ydCB7IEJsb2NrIH0gZnJvbSBcIi4uLy4uL3V0aWwvQmxvY2svQmxvY2tcIjtcclxuaW1wb3J0IHtcclxuICBTaW1wbGVUZW1wbGF0ZUVuZ2luZSxcclxuICBvYmplY3RLZXlTdHJpbmdOdW1iZXIsXHJcbn0gZnJvbSBcIi4uLy4uL3V0aWwvU2ltcGxlLXRlbXBsYXRlLWVuZ2luZS9zaW1wbGUtdGVtcGxhdGUtZW5naW5lXCI7XHJcblxyXG5pbXBvcnQgeyB0ZW1wbGF0ZSB9IGZyb20gXCIuL3RlbXBsYXRlXCI7XHJcblxyXG5jb25zdCBhdmF0YXIgPSBuZXcgU2ltcGxlVGVtcGxhdGVFbmdpbmUodGVtcGxhdGUpO1xyXG5cclxuY2xhc3MgQXZhdGFyIGV4dGVuZHMgQmxvY2sge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBvYmplY3RLZXlTdHJpbmdOdW1iZXIpIHtcclxuICAgIHN1cGVyKFwiZGl2XCIsIHByb3BzKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGF2YXRhci5jb21waWxlKHtcclxuICAgICAgbGluazogdGhpcy5wcm9wcy5saW5rLFxyXG4gICAgICBhbHQ6IHRoaXMucHJvcHMuYWx0LFxyXG4gICAgICBjbGFzc05hbWU6IHRoaXMucHJvcHMuY2xhc3NOYW1lLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBBdmF0YXIgfTtcclxuIiwiY29uc3QgdGVtcGxhdGU6IHN0cmluZyA9IGBcclxuICAgIDxidXR0b24geyUgZGlzYWJsZWQgJX0gY2xhc3M9XCJidXR0b24geyUgY2xhc3NOYW1lICV9XCIgPnslIHRleHQgJX08L2J1dHRvbj5cclxuYDtcclxuXHJcbmV4cG9ydCB7IHRlbXBsYXRlIH07XHJcbiIsImltcG9ydCB7IEJsb2NrIH0gZnJvbSBcIi4uLy4uL3V0aWwvQmxvY2svQmxvY2tcIjtcclxuaW1wb3J0IHtcclxuICBTaW1wbGVUZW1wbGF0ZUVuZ2luZSxcclxuICBvYmplY3RLZXlTdHJpbmdOdW1iZXIsXHJcbn0gZnJvbSBcIi4uLy4uL3V0aWwvU2ltcGxlLXRlbXBsYXRlLWVuZ2luZS9zaW1wbGUtdGVtcGxhdGUtZW5naW5lXCI7XHJcblxyXG5pbXBvcnQgeyB0ZW1wbGF0ZSB9IGZyb20gXCIuL3RlbXBsYXRlXCI7XHJcblxyXG5jb25zdCBidXR0b24gPSBuZXcgU2ltcGxlVGVtcGxhdGVFbmdpbmUodGVtcGxhdGUpO1xyXG5cclxuY2xhc3MgQnV0dG9uIGV4dGVuZHMgQmxvY2sge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBvYmplY3RLZXlTdHJpbmdOdW1iZXIpIHtcclxuICAgIHN1cGVyKFwiZGl2XCIsIHByb3BzKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgeyB0ZXh0LCBjbGFzc05hbWUsIGlzRGlzYWJsZWQgfSA9IHRoaXMucHJvcHM7XHJcbiAgICByZXR1cm4gYnV0dG9uLmNvbXBpbGUoe1xyXG4gICAgICB0ZXh0OiB0ZXh0LFxyXG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcclxuICAgICAgZGlzYWJsZWQ6IGlzRGlzYWJsZWQgPyBcImRpc2FibGVkXCIgOiBcIlwiLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBCdXR0b24gfTtcclxuIiwiY29uc3QgdGVtcGxhdGU6IHN0cmluZyA9IGBcclxuICA8ZGl2IGNsYXNzPVwiY2hhdC1jYXJkXCIgb25DbGljaz1cInslIGFjdGl2YXRlSGFuZGxlICV9XCI+XHJcbiAgICB7JSBBdmF0YXIgJX1cclxuICAgIDxkaXYgY2xhc3M9XCJjaGF0LWNhcmRfX2NvbnRlbnRcIj5cclxuICAgICAgPGgyIGNsYXNzPVwiY2hhdC1jYXJkX190aXRsZVwiPnslIHRpdGxlICV9PC9oMj5cclxuICAgICAgPHAgY2xhc3M9XCJjaGF0LWNhcmRfX3RleHRcIj5cclxuICAgICAgICB7JSB0ZXh0ICV9XHJcbiAgICAgIDwvcD5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG5gO1xyXG5cclxuZXhwb3J0IHsgdGVtcGxhdGUgfTtcclxuIiwiaW1wb3J0IHsgQmxvY2sgfSBmcm9tIFwiLi4vLi4vdXRpbC9CbG9jay9CbG9ja1wiO1xyXG5pbXBvcnQge1xyXG4gIFNpbXBsZVRlbXBsYXRlRW5naW5lLFxyXG4gIG9iamVjdEtleVN0cmluZ051bWJlcixcclxufSBmcm9tIFwiLi4vLi4vdXRpbC9TaW1wbGUtdGVtcGxhdGUtZW5naW5lL3NpbXBsZS10ZW1wbGF0ZS1lbmdpbmVcIjtcclxuXHJcbmltcG9ydCB7IHRlbXBsYXRlIH0gZnJvbSBcIi4vdGVtcGxhdGVcIjtcclxuXHJcbmNvbnN0IGNoYXRDYXJkID0gbmV3IFNpbXBsZVRlbXBsYXRlRW5naW5lKHRlbXBsYXRlKTtcclxuXHJcbmNsYXNzIENoYXRDYXJkIGV4dGVuZHMgQmxvY2sge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBvYmplY3RLZXlTdHJpbmdOdW1iZXIpIHtcclxuICAgIHN1cGVyKFwiZGl2XCIsIHByb3BzKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGNoYXRDYXJkLmNvbXBpbGUoe1xyXG4gICAgICBhY3RpdmF0ZUhhbmRsZTogdGhpcy5wcm9wcy5hY3RpdmF0ZUhhbmRsZSxcclxuICAgICAgQXZhdGFyOiB0aGlzLnByb3BzLkF2YXRhci5yZW5kZXIoKSxcclxuICAgICAgdGl0bGU6IHRoaXMucHJvcHMudGl0bGUsXHJcbiAgICAgIHRleHQ6IHRoaXMucHJvcHMudGV4dCxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgQ2hhdENhcmQgfTtcclxuIiwiZXhwb3J0IGNvbnN0IGlzTG9naW4gPSAoKSA9PiB7XHJcbiAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibG9naW5cIik7XHJcbn07XHJcbiIsImltcG9ydCB7IEJsb2NrIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvQmxvY2svQmxvY2tcIjtcclxuaW1wb3J0IHtcclxuICBTaW1wbGVUZW1wbGF0ZUVuZ2luZSxcclxuICBvYmplY3RLZXlTdHJpbmdOdW1iZXIsXHJcbn0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvU2ltcGxlLXRlbXBsYXRlLWVuZ2luZS9zaW1wbGUtdGVtcGxhdGUtZW5naW5lXCI7XHJcblxyXG5pbXBvcnQgeyB0ZW1wbGF0ZSB9IGZyb20gXCIuL3RlbXBsYXRlXCI7XHJcblxyXG5jb25zdCBidXR0b24gPSBuZXcgU2ltcGxlVGVtcGxhdGVFbmdpbmUodGVtcGxhdGUpO1xyXG5cclxuY2xhc3MgQnV0dG9uIGV4dGVuZHMgQmxvY2sge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBvYmplY3RLZXlTdHJpbmdOdW1iZXIpIHtcclxuICAgIHN1cGVyKFwiZGl2XCIsIHByb3BzKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGJ1dHRvbi5jb21waWxlKHtcclxuICAgICAgdGV4dDogdGhpcy5wcm9wcy50ZXh0LFxyXG4gICAgICBjbGFzc05hbWU6IHRoaXMucHJvcHMuY2xhc3NOYW1lLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBCdXR0b24gfTtcclxuIiwiY29uc3QgdGVtcGxhdGU6IHN0cmluZyA9IGBcclxuICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGhlYWRlcl9fYnV0dG9uIHslIGNsYXNzTmFtZSAlfVwiPnslIHRleHQgJX08L2J1dHRvbj5cclxuYDtcclxuXHJcbmV4cG9ydCB7IHRlbXBsYXRlIH07XHJcbiIsImNvbnN0IHRlbXBsYXRlOiBzdHJpbmcgPSBgXHJcbiAgPGhlYWRlciBjbGFzcz1cImhlYWRlclwiPlxyXG4gICAgPGRpdiBjbGFzcz1cImhlYWRlcl9fbG9nby1saW5rXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJfX2xvZ28taW1nXCI+PC9kaXY+XHJcbiAgICAgIDxoMSBjbGFzcz1cImhlYWRlcl9fdGl0bGVcIj5TaW1wbGUgY2hhdDwvaDE+ICAgXHJcbiAgICA8L2Rpdj5cclxuICAgIDxuYXYgY2xhc3M9XCJoZWFkZXJfX21lbnVcIj5cclxuICAgICAgeyUgYnV0dG9ucyAlfSAgICAgIFxyXG4gICAgPC9uYXY+XHJcbiAgPC9oZWFkZXI+XHJcbmA7XHJcblxyXG5leHBvcnQgeyB0ZW1wbGF0ZSB9O1xyXG4iLCJpbXBvcnQgeyBCbG9jayB9IGZyb20gXCIuLi8uLi91dGlsL0Jsb2NrL0Jsb2NrXCI7XHJcbmltcG9ydCB7IFNpbXBsZVRlbXBsYXRlRW5naW5lIH0gZnJvbSBcIi4uLy4uL3V0aWwvU2ltcGxlLXRlbXBsYXRlLWVuZ2luZS9zaW1wbGUtdGVtcGxhdGUtZW5naW5lXCI7XHJcbmltcG9ydCByb3V0ZXIgZnJvbSBcIi4uLy4uL3JvdXRlclwiO1xyXG5pbXBvcnQgeyBpc0xvZ2luIH0gZnJvbSBcIi4uLy4uL3V0aWwvaXNMb2dpblwiO1xyXG5pbXBvcnQgeyBhdXRoIH0gZnJvbSBcIi4uLy4uLy4uL2luZGV4XCI7XHJcblxyXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiLi9IZWFkZXJCdXR0b24vSGVhZGVyQnV0dG9uXCI7XHJcbmltcG9ydCB7IHRlbXBsYXRlIH0gZnJvbSBcIi4vdGVtcGxhdGVcIjtcclxuXHJcbmNvbnN0IHRtcGxCdXR0b24gPSBuZXcgU2ltcGxlVGVtcGxhdGVFbmdpbmUodGVtcGxhdGUpO1xyXG5cclxuY29uc3QgYnV0dG9uc0xvZ291dCA9IFtcclxuICBuZXcgQnV0dG9uKHtcclxuICAgIHRleHQ6IFwiU2lnbmluXCIsXHJcbiAgICBjbGFzc05hbWU6IFwiaGVhZGVyX19idXR0b25fc2lnbmluXCIsXHJcbiAgfSksXHJcbiAgbmV3IEJ1dHRvbih7XHJcbiAgICB0ZXh0OiBcIlNpZ251cFwiLFxyXG4gICAgY2xhc3NOYW1lOiBcImhlYWRlcl9fYnV0dG9uX3NpZ251cFwiLFxyXG4gIH0pLFxyXG5dO1xyXG5cclxuY29uc3QgYnV0dG9uc0xvZ2luID0gW1xyXG4gIG5ldyBCdXR0b24oe1xyXG4gICAgdGV4dDogXCJTZXR0aW5nc1wiLFxyXG4gICAgY2xhc3NOYW1lOiBcImhlYWRlcl9fYnV0dG9uX3NldHRpbmdzXCIsXHJcbiAgfSksXHJcbiAgbmV3IEJ1dHRvbih7XHJcbiAgICB0ZXh0OiBgJHtsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImxvZ2luXCIpfSDinYxgLFxyXG4gICAgY2xhc3NOYW1lOiBcImhlYWRlcl9fYnV0dG9uX2xvZ291dFwiLFxyXG4gIH0pLFxyXG5dO1xyXG5cclxuY29uc3QgaW5pdEJ1dHRvbnMgPSBpc0xvZ2luKCkgPyBidXR0b25zTG9naW4gOiBidXR0b25zTG9nb3V0O1xyXG5cclxuY2xhc3MgSGVhZGVyIGV4dGVuZHMgQmxvY2sge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoXCJkaXZcIiwge1xyXG4gICAgICBidXR0b25zOiBpbml0QnV0dG9ucy5tYXAoKGl0ZW0pID0+IGl0ZW0ucmVuZGVyKCkpLmpvaW4oXCJcIiksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGxvZ291dCgpIHtcclxuICAgIGF1dGhcclxuICAgICAgLmxvZ291dCgpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImxvZ2luXCIpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgcm91dGVyLmdvKFwiIy9zaWduaW5cIik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgcm91dGVyLmdvKFwiIy9lcnJvclwiKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBoZWFkZXJDbGlja0V2ZW50cyhldmVudDogRXZlbnQpOiB2b2lkIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCByZWcgPSAvaGVhZGVyX19idXR0b25fKC4qKS9naTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHJlZy5leGVjKCg8SFRNTEVsZW1lbnQ+ZXZlbnQudGFyZ2V0KS5jbGFzc0xpc3RbMl0pO1xyXG4gICAgbGV0IHBhdGggPSByZXN1bHRbMV07XHJcbiAgICBpZiAocGF0aCA9PT0gXCJsb2dvdXRcIikge1xyXG4gICAgICB0aGlzLmxvZ291dCgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICByb3V0ZXIuZ28oYCMvJHtwYXRofWApO1xyXG4gIH1cclxuXHJcbiAgaGVhZGVyTG9nb0NsaWNrSGVhZGVyKCk6IHZvaWQge1xyXG4gICAgcm91dGVyLmdvKFwiIy9cIik7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwiY2hhbmdlTG9jYWxTdG9yYWdlXCIsXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICBjb25zdCBidXR0b25zTG9naW4gPSBbXHJcbiAgICAgICAgICBuZXcgQnV0dG9uKHtcclxuICAgICAgICAgICAgdGV4dDogXCJTZXR0aW5nc1wiLFxyXG4gICAgICAgICAgICBjbGFzc05hbWU6IFwiaGVhZGVyX19idXR0b25fc2V0dGluZ3NcIixcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgbmV3IEJ1dHRvbih7XHJcbiAgICAgICAgICAgIHRleHQ6IGAke2xvY2FsU3RvcmFnZS5nZXRJdGVtKFwibG9naW5cIil9IOKdjGAsXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZTogXCJoZWFkZXJfX2J1dHRvbl9sb2dvdXRcIixcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgYnV0dG9ucyA9IGlzTG9naW4oKSA/IGJ1dHRvbnNMb2dpbiA6IGJ1dHRvbnNMb2dvdXQ7XHJcbiAgICAgICAgdGhpcy5zZXRQcm9wcyh7XHJcbiAgICAgICAgICBidXR0b25zOiBidXR0b25zLm1hcCgoaXRlbSkgPT4gaXRlbS5yZW5kZXIoKSkuam9pbihcIlwiKSxcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgZmFsc2VcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5ldmVudEJ1cygpLm9uKHRoaXMuRVZFTlRTLkZMT1dfUkVOREVSLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1lbnVCYXRvbnMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oZWFkZXJfX2J1dHRvblwiKTtcclxuICAgICAgbWVudUJhdG9ucy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgKGVsZW1lbnQgYXMgSFRNTEVsZW1lbnQpLm9uY2xpY2sgPSB0aGlzLmhlYWRlckNsaWNrRXZlbnRzLmJpbmQodGhpcyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIFwiLmhlYWRlcl9fbG9nby1saW5rXCJcclxuICAgICAgKSBhcyBIVE1MRGl2RWxlbWVudCkub25jbGljayA9IHRoaXMuaGVhZGVyTG9nb0NsaWNrSGVhZGVyO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHsgYnV0dG9ucywgbG9naW5OYW1lIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgcmV0dXJuIHRtcGxCdXR0b24uY29tcGlsZSh7XHJcbiAgICAgIGJ1dHRvbnMsXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IEhlYWRlciB9O1xyXG4iLCJjb25zdCB0ZW1wbGF0ZTogc3RyaW5nID0gYFxyXG4gICAgPGRpdiBjbGFzcz1cImZvcm1fX2lucHV0LXdyYXBwZXJcIj5cclxuICAgICAgPGlucHV0XHJcbiAgICAgIGNsYXNzPVwiaW5wdXQgYXV0aF9faW5wdXQgeyUgY2xhc3NOYW1lICV9XCJcclxuICAgICAgeyUgYXR0cmlidXRlcyAlfVxyXG4gICAgICBuYW1lPVwieyUgbmFtZSAlfVwiXHJcbiAgICAgIHslIHZhbHVlICV9ICAgICBcclxuICAgICAgLz5cclxuICAgICAgPHNwYW4gY2xhc3M9XCJhdXRoX19lcnJvclwiPjwvc3Bhbj5cclxuICAgIDwvZGl2PlxyXG4gIGA7XHJcblxyXG5leHBvcnQgeyB0ZW1wbGF0ZSB9O1xyXG4iLCJpbXBvcnQgeyBCbG9jayB9IGZyb20gXCIuLi8uLi91dGlsL0Jsb2NrL0Jsb2NrXCI7XHJcbmltcG9ydCB7XHJcbiAgU2ltcGxlVGVtcGxhdGVFbmdpbmUsXHJcbiAgb2JqZWN0S2V5U3RyaW5nTnVtYmVyLFxyXG59IGZyb20gXCIuLi8uLi91dGlsL1NpbXBsZS10ZW1wbGF0ZS1lbmdpbmUvc2ltcGxlLXRlbXBsYXRlLWVuZ2luZVwiO1xyXG5cclxuaW1wb3J0IHsgdGVtcGxhdGUgfSBmcm9tIFwiLi90ZW1wbGF0ZVwiO1xyXG5cclxuY29uc3QgaW5wdXQgPSBuZXcgU2ltcGxlVGVtcGxhdGVFbmdpbmUodGVtcGxhdGUpO1xyXG5cclxuY2xhc3MgSW5wdXQgZXh0ZW5kcyBCbG9jayB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IG9iamVjdEtleVN0cmluZ051bWJlcikge1xyXG4gICAgc3VwZXIoXCJkaXZcIiwgcHJvcHMpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCk6IHN0cmluZyB7XHJcbiAgICBjb25zdCB7IGF0dHJpYnV0ZXMsIG5hbWUsIGNsYXNzTmFtZSA9IFwiXCIsIHZhbHVlIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgcmV0dXJuIGlucHV0LmNvbXBpbGUoe1xyXG4gICAgICBhdHRyaWJ1dGVzLFxyXG4gICAgICBuYW1lLFxyXG4gICAgICB2YWx1ZSxcclxuICAgICAgY2xhc3NOYW1lLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBJbnB1dCB9O1xyXG4iLCJjb25zdCB0ZW1wbGF0ZTogc3RyaW5nID0gYFxyXG4gIDxkaXYgY2xhc3M9XCJtZXNzYWdlXCI+XHJcbiAgICB7JSBhdmF0YXIgJX1cclxuICAgIDxkaXYgY2xhc3M9XCJtZXNzYWdlX19jb250ZW50XCI+XHJcbiAgICAgIDxoMyBjbGFzcz1cIm1lc3NhZ2VfX3NlbmRlclwiPlVzZXIgTmFtZTwvaDM+XHJcbiAgICAgIDxwIGNsYXNzPVwibWVzc2FnZV9fdGV4dFwiPlxyXG4gICAgICAgIHslIHRleHQgJX1cclxuICAgICAgPC9wPlxyXG4gICAgPC9kaXY+XHJcbiAgICA8dGltZSBjbGFzcz1cIm1lc3NhZ2VfX3RpbWVcIj5cclxuICAgICAgMTA6NDQ6NDVcclxuICAgIDwvdGltZT5cclxuICA8L2Rpdj5cclxuYDtcclxuXHJcbmV4cG9ydCB7IHRlbXBsYXRlIH07XHJcbiIsImltcG9ydCB7IEJsb2NrIH0gZnJvbSBcIi4uLy4uL3V0aWwvQmxvY2svQmxvY2tcIjtcclxuaW1wb3J0IHtcclxuICBTaW1wbGVUZW1wbGF0ZUVuZ2luZSxcclxuICBvYmplY3RLZXlTdHJpbmdOdW1iZXIsXHJcbn0gZnJvbSBcIi4uLy4uL3V0aWwvU2ltcGxlLXRlbXBsYXRlLWVuZ2luZS9zaW1wbGUtdGVtcGxhdGUtZW5naW5lXCI7XHJcblxyXG5pbXBvcnQgeyB0ZW1wbGF0ZSB9IGZyb20gXCIuL3RlbXBsYXRlXCI7XHJcblxyXG5jb25zdCBtZXNzYWdlID0gbmV3IFNpbXBsZVRlbXBsYXRlRW5naW5lKHRlbXBsYXRlKTtcclxuXHJcbmNsYXNzIE1lc3NhZ2UgZXh0ZW5kcyBCbG9jayB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IG9iamVjdEtleVN0cmluZ051bWJlcikge1xyXG4gICAgc3VwZXIoXCJkaXZcIiwgcHJvcHMpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gbWVzc2FnZS5jb21waWxlKHtcclxuICAgICAgYXZhdGFyOiB0aGlzLnByb3BzLmF2YXRhci5yZW5kZXIoKSxcclxuICAgICAgdGV4dDogdGhpcy5wcm9wcy50ZXh0LFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBNZXNzYWdlIH07XHJcbiIsImNvbnN0IHRlbXBsYXRlOiBzdHJpbmcgPSBgPGgyIGNsYXNzPVwicGFnZS10aXRsZSBhdXRoX190aXRsZVwiPnslIHRleHQgJX08L2gyPmA7XHJcblxyXG5leHBvcnQgeyB0ZW1wbGF0ZSB9O1xyXG4iLCJpbXBvcnQgeyBCbG9jayB9IGZyb20gXCIuLi8uLi91dGlsL0Jsb2NrL0Jsb2NrXCI7XHJcbmltcG9ydCB7XHJcbiAgU2ltcGxlVGVtcGxhdGVFbmdpbmUsXHJcbiAgb2JqZWN0S2V5U3RyaW5nTnVtYmVyLFxyXG59IGZyb20gXCIuLi8uLi91dGlsL1NpbXBsZS10ZW1wbGF0ZS1lbmdpbmUvc2ltcGxlLXRlbXBsYXRlLWVuZ2luZVwiO1xyXG5cclxuaW1wb3J0IHsgdGVtcGxhdGUgfSBmcm9tIFwiLi90ZW1wbGF0ZVwiO1xyXG5cclxuY29uc3QgdGl0bGUgPSBuZXcgU2ltcGxlVGVtcGxhdGVFbmdpbmUodGVtcGxhdGUpO1xyXG5cclxuY2xhc3MgVGl0bGUgZXh0ZW5kcyBCbG9jayB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IG9iamVjdEtleVN0cmluZ051bWJlcikge1xyXG4gICAgc3VwZXIoXCJkaXZcIiwgcHJvcHMpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGl0bGUuY29tcGlsZSh7XHJcbiAgICAgIGNsYXNzTmFtZTogdGhpcy5wcm9wcy5jbGFzc05hbWUsXHJcbiAgICAgIHRleHQ6IHRoaXMucHJvcHMudGV4dCxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgVGl0bGUgfTtcclxuIiwiY29uc3QgdGVtcGxhdGU6IHN0cmluZyA9IGBcclxuPHNwYW5cclxuICBjbGFzcz1cImF1dGhfX2Vycm9yIGF1dGhfX2Vycm9yX3NlcnZlciB7JSBhY3RpdmVDbGFzcyAlfVwiPlxyXG4gICAgeyUgdGV4dCAlfVxyXG4gIDwvc3Bhbj5cclxuYDtcclxuXHJcbmV4cG9ydCB7IHRlbXBsYXRlIH07XHJcbiIsImltcG9ydCB7IEJsb2NrIH0gZnJvbSBcIi4uLy4uL3V0aWwvQmxvY2svQmxvY2tcIjtcclxuaW1wb3J0IHtcclxuICBTaW1wbGVUZW1wbGF0ZUVuZ2luZSxcclxuICBvYmplY3RLZXlTdHJpbmdOdW1iZXIsXHJcbn0gZnJvbSBcIi4uLy4uL3V0aWwvU2ltcGxlLXRlbXBsYXRlLWVuZ2luZS9zaW1wbGUtdGVtcGxhdGUtZW5naW5lXCI7XHJcblxyXG5pbXBvcnQgeyB0ZW1wbGF0ZSB9IGZyb20gXCIuL3RlbXBsYXRlXCI7XHJcblxyXG5jb25zdCBzZXJ2ZXJFcnJvciA9IG5ldyBTaW1wbGVUZW1wbGF0ZUVuZ2luZSh0ZW1wbGF0ZSk7XHJcblxyXG5jbGFzcyBTZXJ2ZXJFcnJvciBleHRlbmRzIEJsb2NrIHtcclxuICBhY3RpdmVDbGFzczogc3RyaW5nO1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBvYmplY3RLZXlTdHJpbmdOdW1iZXIpIHtcclxuICAgIHN1cGVyKFwiZGl2XCIsIHByb3BzKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgeyB0ZXh0IH0gPSB0aGlzLnByb3BzO1xyXG4gICAgcmV0dXJuIHNlcnZlckVycm9yLmNvbXBpbGUoe1xyXG4gICAgICBhY3RpdmVDbGFzczogdGV4dCA/IFwiYXV0aF9fZXJyb3JfYWN0aXZlXCIgOiBcIlwiLFxyXG4gICAgICB0ZXh0LFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBTZXJ2ZXJFcnJvciB9O1xyXG4iLCJ0eXBlIGhlYWRlcnNTdHJpbmdLZXkgPSB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xyXG50eXBlIGRlZXBPYmplY3QgPSB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB8IGRlZXBPYmplY3QgfTtcclxudHlwZSBtb2RlVHlwZSA9IFwic2FtZS1vcmlnaW5cIiB8IFwibm8tY29yc1wiIHwgXCJjb3JzXCI7XHJcbi8vIHR5cGUgY3JlZGVudGlhbHNUeXBlID0gXCJvbWl0XCIgfCBcInNhbWUtb3JpZ2luXCIgfCBcImluY2x1ZGVcIjtcclxudHlwZSBjYWNoZVR5cGUgPVxyXG4gIHwgXCJkZWZhdWx0wrtcIlxyXG4gIHwgXCJuby1zdG9yZVwiXHJcbiAgfCBcInJlbG9hZFwiXHJcbiAgfCBcIm5vLWNhY2hlXCJcclxuICB8IFwiZm9yY2UtY2FjaGVcIlxyXG4gIHwgXCJvbmx5LWlmLWNhY2hlZFwiO1xyXG5cclxuaW50ZXJmYWNlIElPcHRpb25zIHtcclxuICBoZWFkZXJzPzogaGVhZGVyc1N0cmluZ0tleTtcclxuICBtZXRob2Q/OiBzdHJpbmc7XHJcbiAgYm9keT86IGFueTtcclxuICBtb2RlPzogbW9kZVR5cGU7XHJcbiAgY3JlZGVudGlhbHM/OiBzdHJpbmc7XHJcbiAgY2FjaGU/OiBjYWNoZVR5cGU7XHJcbiAgdGltZW91dD86IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIElIVFRQIHtcclxuICBNRVRIT0RTOiBhbnk7XHJcbiAgRVJST1JfTkVFRF9NRVRIT0Q6IHN0cmluZztcclxuICBnZXREZWVwUGFyYW1zKGtleU5hbWU6IHN0cmluZywgb2JqZWN0OiBkZWVwT2JqZWN0KTogc3RyaW5nO1xyXG4gIHF1ZXJ5U3RyaW5naWZ5KGRhdGE6IGRlZXBPYmplY3QpOiBzdHJpbmc7XHJcbiAgZ2V0KHVybDogc3RyaW5nLCBvcHRpb25zPzogSU9wdGlvbnMpOiBQcm9taXNlPFhNTEh0dHBSZXF1ZXN0PjtcclxuICBwb3N0KHVybDogc3RyaW5nLCBvcHRpb25zPzogSU9wdGlvbnMpOiBQcm9taXNlPFhNTEh0dHBSZXF1ZXN0PjtcclxuICByZXF1ZXN0KHVybDogc3RyaW5nLCBvcHRpb25zPzogSU9wdGlvbnMpOiBQcm9taXNlPHVua25vd24+O1xyXG59XHJcblxyXG5jbGFzcyBIVFRQIGltcGxlbWVudHMgSUhUVFAge1xyXG4gIE1FVEhPRFM6IGFueTtcclxuICBFUlJPUl9ORUVEX01FVEhPRCA9IFwiTmVlZCB0byBzcGVjaWZ5IGEgbWV0aG9kXCI7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLk1FVEhPRFMgPSB7XHJcbiAgICAgIEdFVDogXCJHRVRcIixcclxuICAgICAgUE9TVDogXCJQT1NUXCIsXHJcbiAgICB9O1xyXG4gICAgdGhpcy5xdWVyeVN0cmluZ2lmeSA9IHRoaXMucXVlcnlTdHJpbmdpZnkuYmluZCh0aGlzKTtcclxuICAgIHRoaXMucmVxdWVzdCA9IHRoaXMucmVxdWVzdC5iaW5kKHRoaXMpO1xyXG4gIH1cclxuICBnZXREZWVwUGFyYW1zKGtleU5hbWU6IHN0cmluZywgb2JqZWN0OiBkZWVwT2JqZWN0KTogc3RyaW5nIHtcclxuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmplY3QpLnJlZHVjZSgocmVzdWx0LCBrZXksIGluZGV4LCBhcnIpID0+IHtcclxuICAgICAgbGV0IG9iaiA9IG9iamVjdFtrZXldO1xyXG4gICAgICBsZXQgcGFyYW1zOiBzdHJpbmcgPSBgJHtrZXlOYW1lfVske2tleX1dPSR7b2JqfWA7XHJcblxyXG4gICAgICBpZiAodHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgIHBhcmFtcyA9IHRoaXMuZ2V0RGVlcFBhcmFtcyhgJHtrZXlOYW1lfVske2tleX1dYCwgb2JqKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYCR7cmVzdWx0fSR7cGFyYW1zfSR7aW5kZXggPCBhcnIubGVuZ3RoIC0gMSA/IFwiJlwiIDogXCJcIn1gO1xyXG4gICAgfSwgXCJcIik7XHJcbiAgfVxyXG5cclxuICBxdWVyeVN0cmluZ2lmeShkYXRhOiBkZWVwT2JqZWN0KTogc3RyaW5nIHtcclxuICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gXCJvYmplY3RcIikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhIG5vdCBvYmplY3RcIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xyXG4gICAgcmV0dXJuIGtleXMucmVkdWNlKChyZXN1bHQsIGtleSwgaW5kZXgpID0+IHtcclxuICAgICAgbGV0IG9iaiA9IGRhdGFba2V5XTtcclxuICAgICAgbGV0IHBhcmFtID0gYCR7a2V5fT0ke29ian1gO1xyXG5cclxuICAgICAgaWYgKHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICBwYXJhbSA9IHRoaXMuZ2V0RGVlcFBhcmFtcyhrZXksIG9iaik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGAke3Jlc3VsdH0ke3BhcmFtfSR7aW5kZXggPCBrZXlzLmxlbmd0aCAtIDEgPyBcIiZcIiA6IFwiXCJ9YDtcclxuICAgIH0sIFwiXCIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0KHVybDogc3RyaW5nLCBvcHRpb25zOiBJT3B0aW9ucyA9IHt9KTogUHJvbWlzZTxYTUxIdHRwUmVxdWVzdD4ge1xyXG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1cmwsIHsgLi4ub3B0aW9ucywgbWV0aG9kOiB0aGlzLk1FVEhPRFMuR0VUIH0pO1xyXG4gIH1cclxuXHJcbiAgcG9zdCh1cmw6IHN0cmluZywgb3B0aW9uczogSU9wdGlvbnMgPSB7fSk6IFByb21pc2U8WE1MSHR0cFJlcXVlc3Q+IHtcclxuICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXJsLCB7IC4uLm9wdGlvbnMsIG1ldGhvZDogdGhpcy5NRVRIT0RTLlBPU1QgfSk7XHJcbiAgfVxyXG5cclxuICByZXF1ZXN0KHVybDogc3RyaW5nLCBvcHRpb25zOiBJT3B0aW9ucyA9IHt9KTogUHJvbWlzZTxYTUxIdHRwUmVxdWVzdD4ge1xyXG4gICAgY29uc3QgeyBoZWFkZXJzID0ge30sIG1ldGhvZCwgYm9keSwgdGltZW91dCA9IDUwMDAgfSA9IG9wdGlvbnM7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoXHJcbiAgICAgIGZ1bmN0aW9uIChyZXNvbHZlOiBhbnksIHJlamVjdDogYW55KSB7XHJcbiAgICAgICAgaWYgKCFtZXRob2QpIHtcclxuICAgICAgICAgIHJlamVjdCh0aGlzLkVSUk9SX05FRURfTUVUSE9EKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IGlzR2V0ID0gbWV0aG9kID09PSB0aGlzLk1FVEhPRFMuR0VUO1xyXG5cclxuICAgICAgICB4aHIub3BlbihcclxuICAgICAgICAgIG1ldGhvZCxcclxuICAgICAgICAgIGlzR2V0ICYmICEhYm9keSA/IGAke3VybH0ke3RoaXMucXVlcnlTdHJpbmdpZnkoYm9keSl9YCA6IHVybFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIE9iamVjdC5rZXlzKGhlYWRlcnMpLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBoZWFkZXJzW2tleV0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHhoci5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKHhocik7XHJcbiAgICAgICAgeGhyLm9uYWJvcnQgPSByZWplY3Q7XHJcbiAgICAgICAgeGhyLm9uZXJyb3IgPSByZWplY3Q7XHJcbiAgICAgICAgeGhyLnRpbWVvdXQgPSB0aW1lb3V0O1xyXG4gICAgICAgIHhoci5vbnRpbWVvdXQgPSByZWplY3Q7XHJcbiAgICAgICAgaWYgKGlzR2V0IHx8ICFib2R5KSB7XHJcbiAgICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShib2R5KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LmJpbmQodGhpcylcclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBIVFRQLCBJT3B0aW9ucywgSUhUVFAgfTtcclxuIiwiY29uc3QgdGVtcGxhdGU6IHN0cmluZyA9IGBcclxuICA8ZGl2IGNsYXNzPVwiZXJyb3JcIj5cclxuICAgIDxoMSBjbGFzcz1cImVycm9yX190aXRsZVwiPnslIGVycm9yQ29kZSAlfTwvaDE+XHJcbiAgICA8cCBjbGFzcz1cImVycm9yX19zdWJ0aXRsZVwiPnslIGVycm9yVGl0bGUgJX08L3A+XHJcbiAgICA8ZGl2IGNsYXNzPVwiZXJyb3JfX2ltZ1wiPjwvZGl2PlxyXG4gICAgPGEgY2xhc3M9XCJsaW5rIGVycm9yX19saW5rXCI+YmFjayB0byBtYWluPC9hPlxyXG4gIDwvZGl2PlxyXG5gO1xyXG5cclxuZXhwb3J0IHsgdGVtcGxhdGUgfTtcclxuIiwiaW1wb3J0IHsgQmxvY2sgfSBmcm9tIFwiLi4vLi4vdXRpbC9CbG9jay9CbG9ja1wiO1xyXG5pbXBvcnQgeyBTaW1wbGVUZW1wbGF0ZUVuZ2luZSB9IGZyb20gXCIuLi8uLi91dGlsL1NpbXBsZS10ZW1wbGF0ZS1lbmdpbmUvc2ltcGxlLXRlbXBsYXRlLWVuZ2luZVwiO1xyXG5cclxuaW1wb3J0IHsgdGVtcGxhdGUgfSBmcm9tIFwiLi9lcnJvci10ZW1wbGF0ZVwiO1xyXG5cclxuY29uc3QgdGVtcGxhdGVFbmdpbmUgPSBuZXcgU2ltcGxlVGVtcGxhdGVFbmdpbmUodGVtcGxhdGUpO1xyXG5cclxuY2xhc3MgU2VydmVyRXJyb3IgZXh0ZW5kcyBCbG9jayB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihcImRpdlwiKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlRW5naW5lLmNvbXBpbGUoe1xyXG4gICAgICBlcnJvckNvZGU6IFwiRXJyb3IgNTAwXCIsXHJcbiAgICAgIGVycm9yVGl0bGU6IFwiUHJvYmxlbXMgd2l0aCBzZXJ2ZXJcIixcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgU2VydmVyRXJyb3IgfTtcclxuIiwiaW1wb3J0IHsgQmxvY2sgfSBmcm9tIFwiLi4vLi4vdXRpbC9CbG9jay9CbG9ja1wiO1xyXG5pbXBvcnQgeyBTaW1wbGVUZW1wbGF0ZUVuZ2luZSB9IGZyb20gXCIuLi8uLi91dGlsL1NpbXBsZS10ZW1wbGF0ZS1lbmdpbmUvc2ltcGxlLXRlbXBsYXRlLWVuZ2luZVwiO1xyXG5cclxuaW1wb3J0IHsgdGVtcGxhdGUgfSBmcm9tIFwiLi9lcnJvci10ZW1wbGF0ZVwiO1xyXG5cclxuY29uc3QgdGVtcGxhdGVFbmdpbmUgPSBuZXcgU2ltcGxlVGVtcGxhdGVFbmdpbmUodGVtcGxhdGUpO1xyXG5cclxuY2xhc3MgTm90Rm91bmQgZXh0ZW5kcyBCbG9jayB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihcImRpdlwiKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlRW5naW5lLmNvbXBpbGUoe1xyXG4gICAgICBlcnJvckNvZGU6IFwiRXJyb3IgNDA0XCIsXHJcbiAgICAgIGVycm9yVGl0bGU6IFwiTm90IGZvdW5kXCIsXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IE5vdEZvdW5kIH07XHJcbiIsImltcG9ydCB7IEJsb2NrLCBJQmxvY2sgfSBmcm9tIFwiLi4vLi4vdXRpbC9CbG9jay9CbG9ja1wiO1xyXG5pbXBvcnQgeyBTaW1wbGVUZW1wbGF0ZUVuZ2luZSB9IGZyb20gXCIuLi8uLi91dGlsL1NpbXBsZS10ZW1wbGF0ZS1lbmdpbmUvc2ltcGxlLXRlbXBsYXRlLWVuZ2luZVwiO1xyXG5pbXBvcnQgeyByYW5nZSB9IGZyb20gXCIuLi8uLi91dGlsL3JhbmdlXCI7XHJcblxyXG5pbXBvcnQgeyBBdmF0YXIsIENoYXRDYXJkLCBNZXNzYWdlIH0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvaW5kZXhcIjtcclxuXHJcbmltcG9ydCBBVkFUQVJfTUlOSSBmcm9tIFwiLi4vLi4vLi4vLi4vc3RhdGljL2ltYWdlcy9jaGF0LWNhcmRfX2ltZy5wbmdcIjtcclxuXHJcbmltcG9ydCB0ZW1wbGF0ZSBmcm9tIFwiLi9tYWluLXBhZ2UtdGVtcGxhdGVcIjtcclxuXHJcbmNvbnN0IG1haW5QYWdlID0gbmV3IFNpbXBsZVRlbXBsYXRlRW5naW5lKHRlbXBsYXRlKTtcclxuXHJcbmNvbnN0IGRhdGEgPSB7XHJcbiAgY2hhdENhcmRzOiByYW5nZSgxMCkubWFwKFxyXG4gICAgKCkgPT5cclxuICAgICAgbmV3IENoYXRDYXJkKHtcclxuICAgICAgICBhY3RpdmF0ZUhhbmRsZSgpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgQXZhdGFyOiBuZXcgQXZhdGFyKHtcclxuICAgICAgICAgIGxpbms6IEFWQVRBUl9NSU5JLFxyXG4gICAgICAgICAgYWx0OiBcIlVzZXIgYXZhdGFyXCIsXHJcbiAgICAgICAgICBjbGFzc05hbWU6IFwiY2hhdC1jYXJkX19pbWdcIixcclxuICAgICAgICB9KSxcclxuICAgICAgICB0aXRsZTogXCJUaXRsZVwiLFxyXG4gICAgICAgIHRleHQ6IFwiU29ycnksIGl0cyBqdXN0IHRoYXQgSSBnZXQgdmVyeSBuZS4uLlwiLFxyXG4gICAgICB9KVxyXG4gICksXHJcbiAgbWVzc2FnZTogbmV3IE1lc3NhZ2Uoe1xyXG4gICAgYXZhdGFyOiBuZXcgQXZhdGFyKHtcclxuICAgICAgbGluazogXCIuL2ltYWdlcy9jaGF0LWNhcmRfX2ltZy5wbmdcIixcclxuICAgICAgYWx0OiBcIlVzZXIgYXZhdGFyXCIsXHJcbiAgICAgIGNsYXNzTmFtZTogXCJtZXNzYWdlX19hdmF0YXJcIixcclxuICAgIH0pLFxyXG4gICAgdGV4dDogXCJXaHkgZGlkbid0IGhlIGNvbWUgYW5kIHRhbGsgdG8gbWUgaGltc2VsZj9cIixcclxuICB9KSxcclxufTtcclxuXHJcbmNsYXNzIE1haW5QYWdlIGV4dGVuZHMgQmxvY2sge1xyXG4gIGlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuICBzZW5kQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKFwiZGl2XCIsIGRhdGEpO1xyXG4gICAgdGhpcy5pbnB1dEVsZW1lbnQ7XHJcbiAgICB0aGlzLnNlbmRCdXR0b247XHJcbiAgfVxyXG5cclxuICBoYW5kbGVJbnB1dCgpIHtcclxuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuc2VuZEJ1dHRvbjtcclxuICAgIGNvbnN0IHRleHQgPSB0aGlzLmlucHV0RWxlbWVudC52YWx1ZTtcclxuICAgIGNvbnN0IHNwYWNlcyA9IHRleHQubWF0Y2goL1xccyovKVswXTtcclxuICAgIGlmICh0ZXh0ICYmIHRleHQgIT09IHNwYWNlcykge1xyXG4gICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcImNvbnRyb2wtcGFuZWxfX3NlbmQtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY29udHJvbC1wYW5lbF9fc2VuZC1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlU2VuZE1lc3NhZ2UoKSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgaW5wdXQgPSB0aGlzLmlucHV0RWxlbWVudDtcclxuICAgIGNvbnN0IGZvcm0gPSBpbnB1dC5wYXJlbnROb2RlO1xyXG4gICAgY29uc29sZS5sb2coaW5wdXQudmFsdWUpO1xyXG4gICAgKGZvcm0gYXMgSFRNTEZvcm1FbGVtZW50KS5yZXNldCgpO1xyXG4gICAgdGhpcy5zZW5kQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjb250cm9sLXBhbmVsX19zZW5kLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIHRoaXMuZXZlbnRCdXMoKS5vbih0aGlzLkVWRU5UUy5GTE9XX1JFTkRFUiwgKCkgPT4ge1xyXG4gICAgICBjb25zdCB7IGVsZW1lbnQsIGhhbmRsZUlucHV0LCBoYW5kbGVTZW5kTWVzc2FnZSB9ID0gdGhpcztcclxuXHJcbiAgICAgIHRoaXMuaW5wdXRFbGVtZW50ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRyb2wtcGFuZWxfX2lucHV0XCIpO1xyXG4gICAgICB0aGlzLnNlbmRCdXR0b24gPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udHJvbC1wYW5lbF9fc2VuZC1idXR0b25cIik7XHJcblxyXG4gICAgICB0aGlzLmlucHV0RWxlbWVudC5vbmlucHV0ID0gaGFuZGxlSW5wdXQuYmluZCh0aGlzKTtcclxuICAgICAgdGhpcy5zZW5kQnV0dG9uLm9uY2xpY2sgPSBoYW5kbGVTZW5kTWVzc2FnZS5iaW5kKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBtYWluUGFnZS5jb21waWxlKHtcclxuICAgICAgY2hhdENhcmRzOiB0aGlzLnByb3BzLmNoYXRDYXJkc1xyXG4gICAgICAgIC5tYXAoKGl0ZW06IElCbG9jaykgPT4gaXRlbS5yZW5kZXIoKSlcclxuICAgICAgICAuam9pbihcIlwiKSxcclxuICAgICAgbWVzc2FnZTogdGhpcy5wcm9wcy5tZXNzYWdlLnJlbmRlcigpLFxyXG4gICAgICBoYW5kbGVJbnB1dDogdGhpcy5wcm9wcy5oYW5kbGVJbnB1dCxcclxuICAgICAgaGFuZGxlQ2xpY2tCdXR0b246IHRoaXMucHJvcHMuaGFuZGxlQ2xpY2tCdXR0b24sXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IE1haW5QYWdlIH07XHJcbiIsImNvbnN0IG1haW5QYWdlVGVtcGxhdGU6IHN0cmluZyA9IGBcclxuICAgIDxkaXYgY2xhc3M9XCJyb290XCI+XHJcbiAgICAgIDxtYWluIGNsYXNzPVwibWFpbi1jb250ZW50XCI+XHJcbiAgICAgICAgPHNlY3Rpb24gY2xhc3M9XCJhc2lkZS1wYW5lbFwiPlxyXG4gICAgICAgICAgPGZvcm0gY2xhc3M9XCJhc2lkZS1wYW5lbF9fc2VhcmNoLWZvcm1cIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFzaWRlLXBhbmVsX19zZWFyY2gtaWNvblwiPjwvZGl2PlxyXG4gICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgY2xhc3M9XCJhc2lkZS1wYW5lbF9fc2VhcmNoLWlucHV0XCJcclxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlYXJjaFwiXHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXNpZGUtcGFuZWxfX2NhcmQtbGlzdFwiPlxyXG4gICAgICAgICAgICB7JSBjaGF0Q2FyZHMgJX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvc2VjdGlvbj5cclxuICAgICAgICA8c2VjdGlvbiBjbGFzcz1cIm1lc3NhZ2VzLXdpbmRvd1wiPlxyXG4gICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICBjbGFzcz1cIm1lc3NhZ2VzLXdpbmRvd19fc3RhcnQtY29udGFpbmVyIG1lc3NhZ2VzLXdpbmRvd19fc3RhcnQtY29udGFpbmVyX2hpZGRlblwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzPVwibWVzc2FnZXMtd2luZG93X19zdGFydC1jb250YWluZXItdGV4dFwiPlxyXG4gICAgICAgICAgICAgIHNlbGVjdCBvciBjcmVhdGUgYSBjaGF0IHRvIHN0YXJ0IGNvbW11bmljYXRlXHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm1lc3NhZ2VzLXdpbmRvd19fY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZXNzYWdlcy13aW5kb3dfX2xpc3RcIj5cclxuICAgICAgICAgICAgICA8dGltZSBjbGFzcz1cIm1lc3NhZ2VzLXdpbmRvd19fZGF0ZS1zZXBhcmF0b3JcIlxyXG4gICAgICAgICAgICAgICAgPnRodXJzZGF5LCA2IGF1Z3VzdCAyMDIwPC90aW1lXHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIHslIG1lc3NhZ2UgJX1cclxuICAgICAgICAgICAgICA8dGltZSBjbGFzcz1cIm1lc3NhZ2VzLXdpbmRvd19fZGF0ZS1zZXBhcmF0b3JcIlxyXG4gICAgICAgICAgICAgICAgPnRodXJzZGF5LCA2IGF1Z3VzdCAyMDIwPC90aW1lXHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIHslIG1lc3NhZ2UgJX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250cm9sLXBhbmVsXCI+XHJcbiAgICAgICAgICAgICAgPGZvcm0gY2xhc3M9XCJjb250cm9sLXBhbmVsX19mb3JtXCI+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cImlucHV0IGNvbnRyb2wtcGFuZWxfX2lucHV0XCJcclxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJTdGFydCB0byB3cml0ZS4uLlwiXHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImNvbnRyb2wtcGFuZWxfX3NlbmQtYnV0dG9uXCI+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250cm9sLXBhbmVsX19tZWRpYVwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cImNvbnRyb2wtcGFuZWxfX21lZGlhLWl0ZW0gY29udHJvbC1wYW5lbF9fbWVkaWEtaXRlbV9maWxlXCJcclxuICAgICAgICAgICAgICAgID48L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJjb250cm9sLXBhbmVsX19tZWRpYS1pdGVtIGNvbnRyb2wtcGFuZWxfX21lZGlhLWl0ZW1fY2FtZXJhXCJcclxuICAgICAgICAgICAgICAgID48L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJjb250cm9sLXBhbmVsX19tZWRpYS1pdGVtIGNvbnRyb2wtcGFuZWxfX21lZGlhLWl0ZW1fbWljXCJcclxuICAgICAgICAgICAgICAgID48L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250cm9sLXBhbmVsX19lbW9qaXNcIj5cclxuICAgICAgICAgICAgICAgICAg8J+YhPCfmIHwn5ih8J+kkPCfpJFcclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvc2VjdGlvbj5cclxuICAgICAgPC9tYWluPlxyXG4gICAgPC9kaXY+XHJcbiAgYDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1haW5QYWdlVGVtcGxhdGU7XHJcbiIsImV4cG9ydCBjb25zdCByYW5nZSA9IChcclxuICBzdGFydDogbnVtYmVyLFxyXG4gIGVuZD86IG51bWJlcixcclxuICBzdGVwOiBudW1iZXIgPSAxXHJcbik6IG51bWJlcltdID0+IHtcclxuICBjb25zdCBhcnI6IG51bWJlcltdID0gW107XHJcbiAgbGV0IGNvdW50ZXIgPSAhZW5kID8gMCA6IHN0YXJ0O1xyXG5cclxuICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSB1bmRlZmluZWQpIHtcclxuICAgIHJldHVybiBhcnI7XHJcbiAgfVxyXG5cclxuICBpZiAoc3RhcnQgPCAwKSB7XHJcbiAgICBzdGVwID0gLTE7XHJcbiAgfVxyXG5cclxuICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHtcclxuICAgIGVuZCA9IHN0YXJ0O1xyXG4gIH1cclxuXHJcbiAgd2hpbGUgKE1hdGguYWJzKGNvdW50ZXIpIDwgTWF0aC5hYnMoZW5kKSkge1xyXG4gICAgaWYgKHN0ZXAgIT09IDApIHtcclxuICAgICAgYXJyLnB1c2goY291bnRlcik7XHJcbiAgICAgIGNvdW50ZXIgPSBjb3VudGVyICsgc3RlcDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFyci5wdXNoKHN0YXJ0KTtcclxuICAgICAgY291bnRlciArPSAxO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gYXJyO1xyXG59O1xyXG4iLCJjb25zdCBUT19TSE9SVF9QQVNTV09SRCA9IFwiTWluIHBhc3N3b3JkIGxlbmd0aCA4IGNoYXJhY3RlcnNcIjtcclxuY29uc3QgUEFTU1dPUkRfUkVHSVNURVIgPSBcIk5lZWQgdHdvIGxldHRlcnMgaW4gZGlmZmVyZW50IHJlZ2lzdGVyc1wiO1xyXG5jb25zdCBQQVNTV09SRF9VTkRFRklORSA9IFwiUGFzc3dvcmQgbXVzdCBjb250YWluIGxhdGluIGxldHRlcnMgYW5kIG51bWJlcnNcIjtcclxuY29uc3QgUEFTU1dPUkRfTlVNQkVSID0gXCJQYXNzd29yZCBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIG51bWJlclwiO1xyXG5jb25zdCBJTkNPUlJFQ1RfVEVYVCA9IFwiTG9naW4gbXVzdCBiZSBmcm9tIDIgdG8gMjAgY2hhcmFjdGVyc1wiO1xyXG5jb25zdCBJTkNPUlJFQ1RfRU1BSUwgPSBcIkluY29ycmVjdCBlbWFpbFwiO1xyXG5jb25zdCBJTkNPUlJFQ1RfUEhPTkUgPSBcIlBob25lIG11c3Qgc3RhcnQgd2l0aCA4IG9yIDcgYW5kIGhhdmUgMTEgbnVtYnNcIjtcclxuXHJcbmNvbnN0IHBhc3N3b3JkVmFsaWRhdG9yID0gKGVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsIGNhbGxiYWNrOiBGdW5jdGlvbikgPT4ge1xyXG4gIGlmIChlbGVtZW50LnZhbGlkaXR5LnRvb1Nob3J0KSB7XHJcbiAgICBjYWxsYmFjayh0cnVlLCBUT19TSE9SVF9QQVNTV09SRCk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBpZiAoIWVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgIGlmICghL1tBLVpdL2cudGVzdChlbGVtZW50LnZhbHVlKSkge1xyXG4gICAgICBjYWxsYmFjayh0cnVlLCBQQVNTV09SRF9SRUdJU1RFUik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIS9bYS16XS9nLnRlc3QoZWxlbWVudC52YWx1ZSkpIHtcclxuICAgICAgY2FsbGJhY2sodHJ1ZSwgUEFTU1dPUkRfUkVHSVNURVIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKC9bXFxXX10vZy50ZXN0KGVsZW1lbnQudmFsdWUpKSB7XHJcbiAgICAgIGNhbGxiYWNrKHRydWUsIFBBU1NXT1JEX1VOREVGSU5FKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghL1tcXGRdL2cudGVzdChlbGVtZW50LnZhbHVlKSkge1xyXG4gICAgICBjYWxsYmFjayh0cnVlLCBQQVNTV09SRF9OVU1CRVIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3Qgc2ltcGxlVGV4dFZhbGlkYXRvciA9IChlbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50LCBjYWxsYmFjazogRnVuY3Rpb24pID0+IHtcclxuICBpZiAoZWxlbWVudC52YWxpZGl0eS50b29Mb25nIHx8IGVsZW1lbnQudmFsaWRpdHkudG9vU2hvcnQpIHtcclxuICAgIGNhbGxiYWNrKHRydWUsIElOQ09SUkVDVF9URVhUKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBlbWFpbFZhbGlkYXRvciA9IChlbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50LCBjYWxsYmFjazogRnVuY3Rpb24pID0+IHtcclxuICBpZiAoIWVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgIGNhbGxiYWNrKHRydWUsIElOQ09SUkVDVF9FTUFJTCk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgcGhvbmVWYWxpZGF0b3IgPSAoZWxlbWVudDogSFRNTElucHV0RWxlbWVudCwgY2FsbGJhY2s6IEZ1bmN0aW9uKSA9PiB7XHJcbiAgaWYgKCFlbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICBjYWxsYmFjayh0cnVlLCBJTkNPUlJFQ1RfUEhPTkUpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCB7XHJcbiAgcGFzc3dvcmRWYWxpZGF0b3IsXHJcbiAgc2ltcGxlVGV4dFZhbGlkYXRvcixcclxuICBlbWFpbFZhbGlkYXRvcixcclxuICBwaG9uZVZhbGlkYXRvcixcclxufTtcclxuIiwiaW1wb3J0IHsgcGFzc3dvcmRWYWxpZGF0b3IsIHNpbXBsZVRleHRWYWxpZGF0b3IgfSBmcm9tIFwiLi4vLi4vdXRpbC92YWxpZGF0b3JzXCI7XHJcbmV4cG9ydCBjb25zdCBpbnB1dHNQcm9wcyA9IFtcclxuICB7XHJcbiAgICBhdHRyaWJ1dGVzOiBgXHJcbiAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgIHBsYWNlaG9sZGVyPVwibG9naW5cIlxyXG4gICAgICAgIG1pbmxlbmd0aD1cIjJcIlxyXG4gICAgICAgIG1heGxlbmd0aD1cIjIwXCJcclxuICAgICAgICByZXF1aXJlZFxyXG4gICAgICBgLFxyXG4gICAgbmFtZTogXCJsb2dpblwiLFxyXG4gICAgaGFuZGxlQmx1cjogc2ltcGxlVGV4dFZhbGlkYXRvcixcclxuICB9LFxyXG4gIHtcclxuICAgIGF0dHJpYnV0ZXM6IGBcclxuICAgICAgICB0eXBlPVwicGFzc3dvcmRcIlxyXG4gICAgICAgIHBsYWNlaG9sZGVyPVwicGFzc3dvcmRcIlxyXG4gICAgICAgIHBhdHRlcm49XCIoPz0uKlxcXFxkKSg/PS4qW2Etel0pKD89LipbQS1aXSkoPyEuKlxcXFxzKS4qXCJcclxuICAgICAgICBtaW5sZW5ndGg9XCI4XCJcclxuICAgICAgICBhdXRvY29tcGxldGU9XCJvblwiXHJcbiAgICAgICAgcmVxdWlyZWRcclxuICAgICAgYCxcclxuICAgIG5hbWU6IFwicGFzc3dvcmRcIixcclxuICAgIGhhbmRsZUJsdXI6IHBhc3N3b3JkVmFsaWRhdG9yLFxyXG4gIH0sXHJcbl07XHJcbiIsImludGVyZmFjZSBJSW5wdXRWYWxpZGF0ZSB7XHJcbiAgX0ZJRUxEX1JFUVVJUkVEOiBzdHJpbmc7XHJcbiAgX2N1c3RvbVZhbGlkYXRlOiBGdW5jdGlvbjtcclxuICBfdG9nZ2xlRXJyb3IoaXNBY3RpdmU6IGJvb2xlYW4sIG1lc3NhZ2U/OiBzdHJpbmcpOiB2b2lkO1xyXG4gIGhhbmRsZUJsdXIoKTogdm9pZDtcclxuICBoYW5kbGVGb2N1cygpOiB2b2lkO1xyXG59XHJcblxyXG5jbGFzcyBJbnB1dFZhbGlkYXRlIGltcGxlbWVudHMgSUlucHV0VmFsaWRhdGUge1xyXG4gIHJlYWRvbmx5IF9GSUVMRF9SRVFVSVJFRCA9IFwiVGhpcyBpcyBmZWxpZCByZXF1aXJlZFwiO1xyXG4gIHJlYWRvbmx5IF9jdXN0b21WYWxpZGF0ZTogRnVuY3Rpb247XHJcblxyXG4gIGNvbnN0cnVjdG9yKGN1c3RvbVZhbGlkYXRlOiBGdW5jdGlvbikge1xyXG4gICAgdGhpcy5fY3VzdG9tVmFsaWRhdGUgPSBjdXN0b21WYWxpZGF0ZTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVFcnJvciA9IChpc0FjdGl2ZTogYm9vbGVhbiwgbWVzc2FnZTogc3RyaW5nID0gXCJcIik6IHZvaWQgPT4ge1xyXG4gICAgY29uc3QgZXJyID0gKDxIVE1MSW5wdXRFbGVtZW50PmV2ZW50LnRhcmdldCkubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgaWYgKGlzQWN0aXZlKSB7XHJcbiAgICAgIGVyci5jbGFzc0xpc3QuYWRkKFwiYXV0aF9fZXJyb3JfYWN0aXZlXCIpO1xyXG4gICAgICBlcnIudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXJyLmNsYXNzTGlzdC5yZW1vdmUoXCJhdXRoX19lcnJvcl9hY3RpdmVcIik7XHJcbiAgICAgIGVyci50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgaGFuZGxlQmx1ciA9ICgpOiB2b2lkID0+IHtcclxuICAgIGlmICgoPEhUTUxJbnB1dEVsZW1lbnQ+ZXZlbnQudGFyZ2V0KS52YWxpZGl0eS52YWx1ZU1pc3NpbmcpIHtcclxuICAgICAgdGhpcy5fdG9nZ2xlRXJyb3IodHJ1ZSwgdGhpcy5fRklFTERfUkVRVUlSRUQpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9jdXN0b21WYWxpZGF0ZSg8SFRNTElucHV0RWxlbWVudD5ldmVudC50YXJnZXQsIHRoaXMuX3RvZ2dsZUVycm9yKTtcclxuICB9O1xyXG5cclxuICBoYW5kbGVGb2N1cyA9ICgpID0+IHtcclxuICAgIHRoaXMuX3RvZ2dsZUVycm9yKGZhbHNlKTtcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgeyBJbnB1dFZhbGlkYXRlLCBJSW5wdXRWYWxpZGF0ZSB9O1xyXG4iLCJ0eXBlIG9iamVjdEt5U3RyaW5nID0geyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcclxuXHJcbmludGVyZmFjZSBJRm9ybSB7XHJcbiAgX2Zvcm06IEhUTUxGb3JtRWxlbWVudDtcclxuICBfYnV0dG9uOiBFbGVtZW50O1xyXG4gIF9jdXN0b21WYWxpZGF0b3IoKTogYm9vbGVhbjtcclxuICBfdG9nZ2xlQnV0dG9uKGlzQWN0aXZlOiBib29sZWFuKTogdm9pZDtcclxuICBmb3JtSXNWYWxpZChldmVudDogRXZlbnQpOiB2b2lkO1xyXG4gIHNhdmVWYWx1ZShldmVudDogSFRNTElucHV0RWxlbWVudCwgb2JqOiBvYmplY3RLeVN0cmluZyk6IHZvaWQ7XHJcbn1cclxuXHJcbmNsYXNzIEZvcm0gaW1wbGVtZW50cyBJRm9ybSB7XHJcbiAgX2Zvcm06IEhUTUxGb3JtRWxlbWVudDtcclxuICBfYnV0dG9uOiBFbGVtZW50O1xyXG4gIF9jdXN0b21WYWxpZGF0b3I6ICgpID0+IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZm9ybTogSFRNTEZvcm1FbGVtZW50LFxyXG4gICAgYnV0dG9uOiBFbGVtZW50LFxyXG4gICAgY3VzdG9tVmFsaWRhdG9yID0gKCk6IGJvb2xlYW4gPT4gdHJ1ZVxyXG4gICkge1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcbiAgICB0aGlzLl9idXR0b24gPSBidXR0b247XHJcbiAgICB0aGlzLl9jdXN0b21WYWxpZGF0b3IgPSBjdXN0b21WYWxpZGF0b3I7XHJcbiAgfVxyXG5cclxuICBzYXZlVmFsdWUoaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQsIG9iajogb2JqZWN0S3lTdHJpbmcpIHtcclxuICAgIG9ialtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvbihpc0FjdGl2ZTogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgaWYgKGlzQWN0aXZlKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmb3JtSXNWYWxpZCA9IChldmVudDogRXZlbnQpOiB2b2lkID0+IHtcclxuICAgIGlmICh0aGlzLl9mb3JtLmNoZWNrVmFsaWRpdHkoKSAmJiB0aGlzLl9jdXN0b21WYWxpZGF0b3IoKSkge1xyXG4gICAgICB0aGlzLl90b2dnbGVCdXR0b24odHJ1ZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbihmYWxzZSk7XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IHsgRm9ybSwgSUZvcm0gfTtcclxuIiwiaW1wb3J0IHsgQmxvY2sgfSBmcm9tIFwiLi4vLi4vdXRpbC9CbG9jay9CbG9ja1wiO1xyXG5pbXBvcnQgeyBTaW1wbGVUZW1wbGF0ZUVuZ2luZSB9IGZyb20gXCIuLi8uLi91dGlsL1NpbXBsZS10ZW1wbGF0ZS1lbmdpbmUvc2ltcGxlLXRlbXBsYXRlLWVuZ2luZVwiO1xyXG5pbXBvcnQgcm91dGVyIGZyb20gXCIuLi8uLi9yb3V0ZXJcIjtcclxuaW1wb3J0IHsgYXV0aCB9IGZyb20gXCIuLi8uLi8uLi9pbmRleFwiO1xyXG5cclxuaW1wb3J0IHRlbXBsYXRlIGZyb20gXCIuL3NpZ25pbi10ZW1wbGF0ZVwiO1xyXG5pbXBvcnQgeyBpbnB1dHNQcm9wcyB9IGZyb20gXCIuL2lucHV0UHJvcHNcIjtcclxuaW1wb3J0IHtcclxuICBJbnB1dFZhbGlkYXRlLFxyXG4gIElJbnB1dFZhbGlkYXRlLFxyXG59IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL0lucHV0L0lucHV0VmFsaWRhdGVcIjtcclxuXHJcbmltcG9ydCB7IFRpdGxlLCBJbnB1dCwgQnV0dG9uLCBTZXJ2ZXJFcnJvciB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL2luZGV4XCI7XHJcblxyXG5pbXBvcnQgeyBGb3JtLCBJRm9ybSB9IGZyb20gXCIuLi8uLi9mb3JtXCI7XHJcblxyXG5jb25zdCBzaWduaW5QYWdlVGVtcGxhdGUgPSBuZXcgU2ltcGxlVGVtcGxhdGVFbmdpbmUodGVtcGxhdGUpO1xyXG5cclxuaW50ZXJmYWNlIElJbnB1dHNQcm9wIHtcclxuICBhdHRyaWJ1dGVzOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGhhbmRsZUJsdXIoZWxlbWVudDogSFRNTElucHV0RWxlbWVudCwgY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZDtcclxufVxyXG5cclxuY2xhc3MgU2lnbmluUGFnZSBleHRlbmRzIEJsb2NrIHtcclxuICBpbnB1dHNWYWx1ZTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcclxuICB2YWxpZGF0ZTogSUlucHV0VmFsaWRhdGVbXTtcclxuICBmb3JtOiBJRm9ybTtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihcImRpdlwiLCB7XHJcbiAgICAgIHRpdGxlOiBuZXcgVGl0bGUoeyB0ZXh0OiBcIlNpZ251cFwiIH0pLFxyXG4gICAgICBzZXJ2ZXJFcnJvcjogbmV3IFNlcnZlckVycm9yKHtcclxuICAgICAgICB0ZXh0OiBcIlwiLFxyXG4gICAgICB9KSxcclxuICAgICAgYnV0dG9uOiBuZXcgQnV0dG9uKHtcclxuICAgICAgICB0ZXh0OiBcIlNpZ25pblwiLFxyXG4gICAgICAgIGNsYXNzTmFtZTogXCJhdXRoX19idXR0b25cIixcclxuICAgICAgICBpc0Rpc2FibGVkOiB0cnVlLFxyXG4gICAgICB9KSxcclxuICAgICAgYWx0TGlua0NsYXNzTmFtZTogXCJhdXRoX19saW5rX3NpZ25pblwiLFxyXG4gICAgICBhbHRUZXh0OiBcImRvbid0IGhhdmUgYW4gYWNjb3VudD9cIixcclxuICAgICAgaXNMb2FkOiBmYWxzZSxcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuaW5wdXRzVmFsdWU7XHJcbiAgICB0aGlzLnZhbGlkYXRlID0gW107XHJcbiAgICB0aGlzLmZvcm07XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRzKCkge1xyXG4gICAgdGhpcy5pbnB1dHNWYWx1ZSA9IHRoaXMuaW5wdXRzVmFsdWUgfHwge307XHJcbiAgICB0aGlzLnZhbGlkYXRlID0gdGhpcy52YWxpZGF0ZSB8fCBbXTtcclxuICAgIHJldHVybiAoaW5wdXRzUHJvcHMgYXMgSUlucHV0c1Byb3BbXSlcclxuICAgICAgLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgbmFtZSwgYXR0cmlidXRlcyB9ID0gaXRlbTtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuaW5wdXRzVmFsdWVbbmFtZV1cclxuICAgICAgICAgID8gYHZhbHVlPVwiJHt0aGlzLmlucHV0c1ZhbHVlW25hbWVdfVwiYFxyXG4gICAgICAgICAgOiBcIiBcIjtcclxuICAgICAgICB0aGlzLnZhbGlkYXRlLnB1c2gobmV3IElucHV0VmFsaWRhdGUoaXRlbS5oYW5kbGVCbHVyKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgSW5wdXQoe1xyXG4gICAgICAgICAgYXR0cmlidXRlcyxcclxuICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICB9KS5yZW5kZXIoKTtcclxuICAgICAgfSlcclxuICAgICAgLmpvaW4oXCJcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRzVmFsdWUoKSB7XHJcbiAgICB0aGlzLmZvcm0uc2F2ZVZhbHVlKDxIVE1MSW5wdXRFbGVtZW50PmV2ZW50LnRhcmdldCwgdGhpcy5pbnB1dHNWYWx1ZSk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVTaWduaW5DbGljaygpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLnNldFByb3BzKHsgaXNMb2FkOiB0cnVlIH0pO1xyXG4gICAgYXV0aFxyXG4gICAgICAuc2lnbmluKHRoaXMuaW5wdXRzVmFsdWUpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImxvZ2luXCIsIHRoaXMuaW5wdXRzVmFsdWUubG9naW4pO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pbnB1dHNWYWx1ZSA9IHt9O1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgcm91dGVyLmdvKFwiIy9cIik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBtZXNzYWdlID0gXCJTZXJ2ZXIgZXJyb3JcIiB9ID0gZXJyO1xyXG4gICAgICAgIHRoaXMuaW5wdXRzVmFsdWUucGFzc3dvcmQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2V0UHJvcHMoe1xyXG4gICAgICAgICAgc2VydmVyRXJyb3I6IG5ldyBTZXJ2ZXJFcnJvcih7XHJcbiAgICAgICAgICAgIHRleHQ6IG1lc3NhZ2UsXHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICB9KTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0UHJvcHMoeyBpc0xvYWQ6IGZhbHNlIH0pO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGdvU2lnbnVwKCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHJvdXRlci5nbyhcIiMvc2lnbnVwXCIpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB0aGlzLmV2ZW50QnVzKCkub24odGhpcy5FVkVOVFMuRkxPV19SRU5ERVIsICgpID0+IHtcclxuICAgICAgY29uc3QgeyBlbGVtZW50LCB2YWxpZGF0ZSB9ID0gdGhpcztcclxuICAgICAgY29uc3QgZm9ybUNvbnRhaW5lciA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XHJcbiAgICAgIGNvbnN0IGZvcm1CdXR0b246IEhUTUxCdXR0b25FbGVtZW50ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIFwiLmF1dGhfX2J1dHRvblwiXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGlucHV0cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pbnB1dFwiKTtcclxuICAgICAgY29uc3QgYWx0QnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIi5hdXRoX19saW5rX3NpZ25pblwiXHJcbiAgICAgICk7XHJcblxyXG4gICAgICB0aGlzLmZvcm0gPSBuZXcgRm9ybShmb3JtQ29udGFpbmVyLCBmb3JtQnV0dG9uKTtcclxuICAgICAgaW5wdXRzLmZvckVhY2goKGlucHV0LCBpKSA9PiB7XHJcbiAgICAgICAgKGlucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLm9uZm9jdXMgPSB2YWxpZGF0ZVtpXS5oYW5kbGVGb2N1cztcclxuICAgICAgICAoaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkub25ibHVyID0gdmFsaWRhdGVbaV0uaGFuZGxlQmx1cjtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBmb3JtQ29udGFpbmVyLm9uY2hhbmdlID0gdGhpcy5fZ2V0SW5wdXRzVmFsdWUuYmluZCh0aGlzKTtcclxuICAgICAgZm9ybUNvbnRhaW5lci5vbmlucHV0ID0gdGhpcy5mb3JtLmZvcm1Jc1ZhbGlkO1xyXG4gICAgICBmb3JtQnV0dG9uLm9uY2xpY2sgPSB0aGlzLmhhbmRsZVNpZ25pbkNsaWNrLmJpbmQodGhpcyk7XHJcbiAgICAgIGFsdEJ1dHRvbi5vbmNsaWNrID0gdGhpcy5nb1NpZ251cDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCk6IHN0cmluZyB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIHRpdGxlLFxyXG4gICAgICBzZXJ2ZXJFcnJvcixcclxuICAgICAgaXNMb2FkLFxyXG4gICAgICBidXR0b24sXHJcbiAgICAgIGFsdExpbmtDbGFzc05hbWUsXHJcbiAgICAgIGFsdFRleHQsXHJcbiAgICB9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICBjb25zdCBsb2FkZXJBY3RpdmF0ZUNsYXNzID0gaXNMb2FkID8gXCJsb2FkZXJfaXMtYWN0aXZlXCIgOiBcIlwiO1xyXG5cclxuICAgIHJldHVybiBzaWduaW5QYWdlVGVtcGxhdGUuY29tcGlsZSh7XHJcbiAgICAgIHRpdGxlOiB0aXRsZS5yZW5kZXIoKSxcclxuICAgICAgaW5wdXRzOiB0aGlzLl9nZXRJbnB1dHMoKSxcclxuICAgICAgc2VydmVyRXJyb3I6IHNlcnZlckVycm9yLnJlbmRlcigpLFxyXG4gICAgICBidXR0b246IGJ1dHRvbi5yZW5kZXIoKSxcclxuICAgICAgYWx0TGlua0NsYXNzTmFtZSxcclxuICAgICAgYWx0VGV4dCxcclxuICAgICAgbG9hZGVyQWN0aXZhdGVDbGFzcyxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgU2lnbmluUGFnZSB9O1xyXG4iLCJjb25zdCBzaWduaW5QYWdlVGVtcGxhdGU6IHN0cmluZyA9IGBcclxuICA8ZGl2IGNsYXNzPVwicm9vdFwiPlxyXG4gIDxtYWluIGNsYXNzPVwibWFpbi1jb250ZW50XCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwiYXV0aC13aXRoLWNvbnRhaW5lclwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiYXV0aFwiPlxyXG4gICAgICAgIHslIHRpdGxlICV9XHJcbiAgICAgICAgPGZvcm0gY2xhc3M9XCJhdXRoX19mb3JtIGF1dGhfX2Zvcm1fc2lnbmluXCI+XHJcbiAgICAgICAgICB7JSBpbnB1dHMgJX0gICAgICAgICAgXHJcbiAgICAgICAgICB7JSBzZXJ2ZXJFcnJvciAlfVxyXG4gICAgICAgICAgeyUgYnV0dG9uICV9XHJcbiAgICAgICAgICA8YSBocmVmPVwiI1wiIGNsYXNzPVwibGluayBhdXRoX19saW5rIGF1dGhfX2xpbmtfc2lnbmluXCJcclxuICAgICAgICAgICAgPiB7JSBhbHRUZXh0ICV9IDwvYVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgPC9mb3JtPiAgICAgICAgICBcclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJsb2FkZXIgeyUgbG9hZGVyQWN0aXZhdGVDbGFzcyAlfVwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJsb2FkZXJfX2l0ZW1cIj48L2Rpdj5cclxuICAgICAgICA8cCBjbGFzcz1cImxvYWRlcl9fdGV4dFwiPtCX0LDQs9GA0YPQt9C60LAsINC/0L7QtNC+0LbQtNC40YLQtS4uLjwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L21haW4+XHJcbiAgPC9kaXY+XHJcbiAgYDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHNpZ25pblBhZ2VUZW1wbGF0ZTtcclxuIiwiaW1wb3J0IHtcclxuICBwYXNzd29yZFZhbGlkYXRvcixcclxuICBzaW1wbGVUZXh0VmFsaWRhdG9yLFxyXG4gIGVtYWlsVmFsaWRhdG9yLFxyXG4gIHBob25lVmFsaWRhdG9yLFxyXG59IGZyb20gXCIuLi8uLi91dGlsL3ZhbGlkYXRvcnNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBpbnB1dHNQcm9wcyA9IFtcclxuICB7XHJcbiAgICBhdHRyaWJ1dGVzOiBgXHJcbiAgICAgICAgdHlwZT1cInRleHRcIiBcclxuICAgICAgICBwbGFjZWhvbGRlcj1cIkZpcnN0IG5hbWVcIiBcclxuICAgICAgICBtaW5sZW5ndGg9XCIyXCJcclxuICAgICAgICBtYXhsZW5ndGg9XCIyMFwiXHJcbiAgICAgICAgcmVxdWlyZWRcclxuICAgICAgICBgLFxyXG4gICAgbmFtZTogXCJmaXJzdF9uYW1lXCIsXHJcbiAgICBoYW5kbGVCbHVyOiBzaW1wbGVUZXh0VmFsaWRhdG9yLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgYXR0cmlidXRlczogYFxyXG4gICAgICAgIHR5cGU9XCJ0ZXh0XCIgXHJcbiAgICAgICAgcGxhY2Vob2xkZXI9XCJTZWNvbmQgbmFtZVwiIFxyXG4gICAgICAgIG1pbmxlbmd0aD1cIjJcIlxyXG4gICAgICAgIG1heGxlbmd0aD1cIjIwXCJcclxuICAgICAgICByZXF1aXJlZFxyXG4gICAgICAgIGAsXHJcbiAgICBuYW1lOiBcInNlY29uZF9uYW1lXCIsXHJcbiAgICBoYW5kbGVCbHVyOiBzaW1wbGVUZXh0VmFsaWRhdG9yLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgYXR0cmlidXRlczogYFxyXG4gICAgICAgIHR5cGU9XCJlbWFpbFwiIFxyXG4gICAgICAgIHBsYWNlaG9sZGVyPVwiZW1haWxcIiBcclxuICAgICAgICBwYXR0ZXJuPVwiXi57MSx9QChbLTAtOUEtWmEtel17MSx9XFxcXC4pezEsM31bLUEtWmEtel17Mix9JFwiXHJcbiAgICAgICAgcmVxdWlyZWRcclxuICAgICAgICBgLFxyXG4gICAgbmFtZTogXCJlbWFpbFwiLFxyXG4gICAgaGFuZGxlQmx1cjogZW1haWxWYWxpZGF0b3IsXHJcbiAgfSxcclxuICB7XHJcbiAgICBhdHRyaWJ1dGVzOiBgXHJcbiAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgIHBsYWNlaG9sZGVyPVwibG9naW5cIiBcclxuICAgICAgICBtaW5sZW5ndGg9XCIyXCJcclxuICAgICAgICBtYXhsZW5ndGg9XCIyMFwiXHJcbiAgICAgICAgcmVxdWlyZWRcclxuICAgICAgYCxcclxuICAgIG5hbWU6IFwibG9naW5cIixcclxuICAgIGhhbmRsZUJsdXI6IHNpbXBsZVRleHRWYWxpZGF0b3IsXHJcbiAgfSxcclxuICB7XHJcbiAgICBhdHRyaWJ1dGVzOiBgXHJcbiAgICAgICAgdHlwZT1cInBhc3N3b3JkXCIgXHJcbiAgICAgICAgcGxhY2Vob2xkZXI9XCJwYXNzd29yZFwiIFxyXG4gICAgICAgIHBhdHRlcm49XCIoPz0uKlxcXFxkKSg/PS4qW2Etel0pKD89LipbQS1aXSkoPyEuKlxcXFxzKS4qXCJcclxuICAgICAgICBtaW5sZW5ndGg9XCI4XCJcclxuICAgICAgICBhdXRvY29tcGxldGU9XCJvblwiXHJcbiAgICAgICAgcmVxdWlyZWRcclxuICAgICAgYCxcclxuICAgIG5hbWU6IFwicGFzc3dvcmRcIixcclxuICAgIGhhbmRsZUJsdXI6IHBhc3N3b3JkVmFsaWRhdG9yLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgYXR0cmlidXRlczogYFxyXG4gICAgICAgIHR5cGU9XCJwaG9uZVwiIFxyXG4gICAgICAgIHBsYWNlaG9sZGVyPVwiUGhvbmVcIiBcclxuICAgICAgICBwYXR0ZXJuPVwiXig3fDgpXFxcXGR7MTB9JFwiXHJcbiAgICAgICAgbWF4bGVuZ3RoPVwiMTFcIlxyXG4gICAgICAgIGF1dG9jb21wbGV0ZT1cIm9uXCJcclxuICAgICAgICByZXF1aXJlZFxyXG4gICAgICBgLFxyXG4gICAgbmFtZTogXCJwaG9uZVwiLFxyXG4gICAgaGFuZGxlQmx1cjogcGhvbmVWYWxpZGF0b3IsXHJcbiAgfSxcclxuXTtcclxuIiwiaW1wb3J0IHsgQmxvY2sgfSBmcm9tIFwiLi4vLi4vdXRpbC9CbG9jay9CbG9ja1wiO1xyXG5pbXBvcnQgeyBTaW1wbGVUZW1wbGF0ZUVuZ2luZSB9IGZyb20gXCIuLi8uLi91dGlsL1NpbXBsZS10ZW1wbGF0ZS1lbmdpbmUvc2ltcGxlLXRlbXBsYXRlLWVuZ2luZVwiO1xyXG5pbXBvcnQgeyBhdXRoIH0gZnJvbSBcIi4uLy4uLy4uL2luZGV4XCI7XHJcbmltcG9ydCByb3V0ZXIgZnJvbSBcIi4uLy4uL3JvdXRlclwiO1xyXG5cclxuaW1wb3J0IHRlbXBsYXRlIGZyb20gXCIuL3NpZ251cC10ZW1wbGF0ZVwiO1xyXG5pbXBvcnQgeyBpbnB1dHNQcm9wcyB9IGZyb20gXCIuL2lucHV0UHJvcHNcIjtcclxuaW1wb3J0IHtcclxuICBJbnB1dFZhbGlkYXRlLFxyXG4gIElJbnB1dFZhbGlkYXRlLFxyXG59IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL0lucHV0L0lucHV0VmFsaWRhdGVcIjtcclxuXHJcbmltcG9ydCB7IFRpdGxlLCBJbnB1dCwgU2VydmVyRXJyb3IsIEJ1dHRvbiB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL2luZGV4XCI7XHJcblxyXG5pbXBvcnQgeyBGb3JtLCBJRm9ybSB9IGZyb20gXCIuLi8uLi9mb3JtXCI7XHJcblxyXG5pbnRlcmZhY2UgSUlucHV0c1Byb3Age1xyXG4gIGF0dHJpYnV0ZXM6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgaGFuZGxlQmx1cihlbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50LCBjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkO1xyXG59XHJcblxyXG5jb25zdCBzaWdudXBUZW1wbGF0ZVBhZ2UgPSBuZXcgU2ltcGxlVGVtcGxhdGVFbmdpbmUodGVtcGxhdGUpO1xyXG5cclxuY2xhc3MgU2lnbnVwUGFnZSBleHRlbmRzIEJsb2NrIHtcclxuICBpbnB1dHNWYWx1ZTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcclxuICB2YWxpZGF0ZTogSUlucHV0VmFsaWRhdGVbXTtcclxuICBmb3JtOiBJRm9ybTtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihcImRpdlwiLCB7XHJcbiAgICAgIHRpdGxlOiBuZXcgVGl0bGUoeyB0ZXh0OiBcIlNpZ251cFwiIH0pLFxyXG4gICAgICBzZXJ2ZXJFcnJvcjogbmV3IFNlcnZlckVycm9yKHtcclxuICAgICAgICB0ZXh0OiBcIlwiLFxyXG4gICAgICB9KSxcclxuICAgICAgYnV0dG9uOiBuZXcgQnV0dG9uKHtcclxuICAgICAgICB0ZXh0OiBcIlNpZ251cFwiLFxyXG4gICAgICAgIGNsYXNzTmFtZTogXCJhdXRoX19idXR0b25cIixcclxuICAgICAgICBpc0Rpc2FibGVkOiB0cnVlLFxyXG4gICAgICB9KSxcclxuICAgICAgYWx0TGlua0NsYXNzTmFtZTogXCJhdXRoX19saW5rX3NpZ251cFwiLFxyXG4gICAgICBhbHRUZXh0OiBcImFscmVhZHkgaGF2ZSBhbiBhY2NvdW50P1wiLFxyXG4gICAgICBpc0xvYWQ6IGZhbHNlLFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5pbnB1dHNWYWx1ZTtcclxuICAgIHRoaXMudmFsaWRhdGUgPSBbXTtcclxuICAgIHRoaXMuZm9ybTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dHMoKSB7XHJcbiAgICB0aGlzLmlucHV0c1ZhbHVlID0gdGhpcy5pbnB1dHNWYWx1ZSB8fCB7fTtcclxuICAgIHRoaXMudmFsaWRhdGUgPSB0aGlzLnZhbGlkYXRlIHx8IFtdO1xyXG4gICAgcmV0dXJuIChpbnB1dHNQcm9wcyBhcyBJSW5wdXRzUHJvcFtdKVxyXG4gICAgICAubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBuYW1lLCBhdHRyaWJ1dGVzIH0gPSBpdGVtO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5pbnB1dHNWYWx1ZVtuYW1lXVxyXG4gICAgICAgICAgPyBgdmFsdWU9XCIke3RoaXMuaW5wdXRzVmFsdWVbbmFtZV19XCJgXHJcbiAgICAgICAgICA6IFwiIFwiO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGUucHVzaChuZXcgSW5wdXRWYWxpZGF0ZShpdGVtLmhhbmRsZUJsdXIpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBJbnB1dCh7XHJcbiAgICAgICAgICBhdHRyaWJ1dGVzLFxyXG4gICAgICAgICAgbmFtZSxcclxuICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgIH0pLnJlbmRlcigpO1xyXG4gICAgICB9KVxyXG4gICAgICAuam9pbihcIlwiKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVNpZ25pbkNsaWNrKGV2ZW50OiBhbnkpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLnNldFByb3BzKHsgaXNMb2FkOiB0cnVlIH0pO1xyXG4gICAgYXV0aFxyXG4gICAgICAuc2lnbnVwKHRoaXMuaW5wdXRzVmFsdWUpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImxvZ2luXCIsIHRoaXMuaW5wdXRzVmFsdWUubG9naW4pO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5pbnB1dHNWYWx1ZSA9IHt9O1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgcm91dGVyLmdvKFwiIy9cIik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBtZXNzYWdlID0gXCJTZXJ2ZXIgZXJyb3JcIiB9ID0gZXJyO1xyXG4gICAgICAgIHRoaXMuaW5wdXRzVmFsdWUucGFzc3dvcmQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc2V0UHJvcHMoe1xyXG4gICAgICAgICAgc2VydmVyRXJyb3I6IG5ldyBTZXJ2ZXJFcnJvcih7XHJcbiAgICAgICAgICAgIHRleHQ6IG1lc3NhZ2UsXHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICB9KTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0UHJvcHMoeyBpc0xvYWQ6IGZhbHNlIH0pO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dHNWYWx1ZShldmVudDogRXZlbnQpIHtcclxuICAgIHRoaXMuZm9ybS5zYXZlVmFsdWUoPEhUTUxJbnB1dEVsZW1lbnQ+ZXZlbnQudGFyZ2V0LCB0aGlzLmlucHV0c1ZhbHVlKTtcclxuICB9XHJcblxyXG4gIGdvU2lnbmluKCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHJvdXRlci5nbyhcIiMvc2lnbmluXCIpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB0aGlzLmV2ZW50QnVzKCkub24odGhpcy5FVkVOVFMuRkxPV19SRU5ERVIsICgpID0+IHtcclxuICAgICAgY29uc3QgeyBlbGVtZW50LCB2YWxpZGF0ZSB9ID0gdGhpcztcclxuICAgICAgY29uc3QgZm9ybUNvbnRhaW5lciA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XHJcbiAgICAgIGNvbnN0IGZvcm1CdXR0b246IEhUTUxCdXR0b25FbGVtZW50ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIFwiLmF1dGhfX2J1dHRvblwiXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGlucHV0cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pbnB1dFwiKTtcclxuICAgICAgY29uc3QgYWx0QnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIi5hdXRoX19saW5rX3NpZ251cFwiXHJcbiAgICAgICk7XHJcblxyXG4gICAgICB0aGlzLmZvcm0gPSBuZXcgRm9ybShmb3JtQ29udGFpbmVyLCBmb3JtQnV0dG9uKTtcclxuICAgICAgaW5wdXRzLmZvckVhY2goKGlucHV0LCBpKSA9PiB7XHJcbiAgICAgICAgKGlucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLm9uZm9jdXMgPSB2YWxpZGF0ZVtpXS5oYW5kbGVGb2N1cztcclxuICAgICAgICAoaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkub25ibHVyID0gdmFsaWRhdGVbaV0uaGFuZGxlQmx1cjtcclxuICAgICAgfSk7XHJcbiAgICAgIGZvcm1Db250YWluZXIub25jaGFuZ2UgPSB0aGlzLl9nZXRJbnB1dHNWYWx1ZS5iaW5kKHRoaXMpO1xyXG4gICAgICBmb3JtQ29udGFpbmVyLm9uaW5wdXQgPSB0aGlzLmZvcm0uZm9ybUlzVmFsaWQ7XHJcbiAgICAgIGZvcm1CdXR0b24ub25jbGljayA9IHRoaXMuaGFuZGxlU2lnbmluQ2xpY2suYmluZCh0aGlzKTtcclxuICAgICAgYWx0QnV0dG9uLm9uY2xpY2sgPSB0aGlzLmdvU2lnbmluO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgdGl0bGUsXHJcbiAgICAgIHNlcnZlckVycm9yLFxyXG4gICAgICBpc0xvYWQsXHJcbiAgICAgIGJ1dHRvbixcclxuICAgICAgYWx0TGlua0NsYXNzTmFtZSxcclxuICAgICAgYWx0VGV4dCxcclxuICAgIH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgIGNvbnN0IGxvYWRlckFjdGl2YXRlQ2xhc3MgPSBpc0xvYWQgPyBcImxvYWRlcl9pcy1hY3RpdmVcIiA6IFwiXCI7XHJcblxyXG4gICAgcmV0dXJuIHNpZ251cFRlbXBsYXRlUGFnZS5jb21waWxlKHtcclxuICAgICAgdGl0bGU6IHRpdGxlLnJlbmRlcigpLFxyXG4gICAgICBpbnB1dHM6IHRoaXMuX2dldElucHV0cygpLFxyXG4gICAgICBzZXJ2ZXJFcnJvcjogc2VydmVyRXJyb3IucmVuZGVyKCksXHJcbiAgICAgIGJ1dHRvbjogYnV0dG9uLnJlbmRlcigpLFxyXG4gICAgICBhbHRMaW5rQ2xhc3NOYW1lLFxyXG4gICAgICBhbHRUZXh0LFxyXG4gICAgICBsb2FkZXJBY3RpdmF0ZUNsYXNzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBTaWdudXBQYWdlIH07XHJcbiIsImNvbnN0IHNpZ251cFBhZ2VUZW1wbGF0ZTogc3RyaW5nID0gYFxyXG4gIDxkaXYgY2xhc3M9XCJyb290XCI+XHJcbiAgPG1haW4gY2xhc3M9XCJtYWluLWNvbnRlbnRcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJhdXRoLXdpdGgtY29udGFpbmVyXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJhdXRoXCI+XHJcbiAgICAgICAgeyUgdGl0bGUgJX1cclxuICAgICAgICA8Zm9ybSBjbGFzcz1cImF1dGhfX2Zvcm1cIj5cclxuICAgICAgICAgIHslIGlucHV0cyAlfVxyXG4gICAgICAgICAgeyUgc2VydmVyRXJyb3IgJX1cclxuICAgICAgICAgIHslIGJ1dHRvbiAlfVxyXG4gICAgICAgICAgPGEgaHJlZj1cIuKEllwiIGNsYXNzPVwibGluayBhdXRoX19saW5rIHslIGFsdExpbmtDbGFzc05hbWUgJX1cIlxyXG4gICAgICAgICAgICA+eyUgYWx0VGV4dCAlfTwvYVxyXG4gICAgICAgICAgPiAgICAgICAgICBcclxuICAgICAgPC9mb3JtPiAgICAgICAgXHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzPVwibG9hZGVyIHslIGxvYWRlckFjdGl2YXRlQ2xhc3MgJX1cIj5cclxuICAgICAgPGRpdiBjbGFzcz1cImxvYWRlcl9faXRlbVwiPjwvZGl2PlxyXG4gICAgICA8cCBjbGFzcz1cImxvYWRlcl9fdGV4dFwiPtCX0LDQs9GA0YPQt9C60LAsINC/0L7QtNC+0LbQtNC40YLQtS4uLjwvcD5cclxuICAgIDwvZGl2PlxyXG4gIDwvbWFpbj5cclxuICA8L2Rpdj5cclxuICBgO1xyXG5leHBvcnQgZGVmYXVsdCBzaWdudXBQYWdlVGVtcGxhdGU7XHJcbiIsImltcG9ydCB7XHJcbiAgcGFzc3dvcmRWYWxpZGF0b3IsXHJcbiAgc2ltcGxlVGV4dFZhbGlkYXRvcixcclxuICBlbWFpbFZhbGlkYXRvcixcclxuICBwaG9uZVZhbGlkYXRvcixcclxufSBmcm9tIFwiLi4vLi4vdXRpbC92YWxpZGF0b3JzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgaW5wdXRzUHJvcHMgPSB7XHJcbiAgdXNlckluZm86IFtcclxuICAgIHtcclxuICAgICAgYXR0cmlidXRlczogYFxyXG4gICAgICAgICAgdHlwZT1cInRleHRcIiBcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRmlyc3QgbmFtZVwiIFxyXG4gICAgICAgICAgbWlubGVuZ3RoPVwiMlwiXHJcbiAgICAgICAgICBtYXhsZW5ndGg9XCIyMFwiXHJcbiAgICAgICAgICByZXF1aXJlZFxyXG4gICAgICAgICAgYCxcclxuICAgICAgbmFtZTogXCJmaXJzdF9uYW1lXCIsXHJcbiAgICAgIGhhbmRsZUJsdXI6IHNpbXBsZVRleHRWYWxpZGF0b3IsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBhdHRyaWJ1dGVzOiBgXHJcbiAgICAgICAgICB0eXBlPVwidGV4dFwiIFxyXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJTZWNvbmQgbmFtZVwiIFxyXG4gICAgICAgICAgbWlubGVuZ3RoPVwiMlwiXHJcbiAgICAgICAgICBtYXhsZW5ndGg9XCIyMFwiXHJcbiAgICAgICAgICByZXF1aXJlZFxyXG4gICAgICAgICAgYCxcclxuICAgICAgbmFtZTogXCJzZWNvbmRfbmFtZVwiLFxyXG4gICAgICBoYW5kbGVCbHVyOiBzaW1wbGVUZXh0VmFsaWRhdG9yLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgYXR0cmlidXRlczogYFxyXG4gICAgICAgICAgdHlwZT1cImVtYWlsXCIgXHJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cImVtYWlsXCIgXHJcbiAgICAgICAgICBwYXR0ZXJuPVwiXi57MSx9QChbLTAtOUEtWmEtel17MSx9XFxcXC4pezEsM31bLUEtWmEtel17Mix9JFwiXHJcbiAgICAgICAgICByZXF1aXJlZFxyXG4gICAgICAgICAgYCxcclxuICAgICAgbmFtZTogXCJlbWFpbFwiLFxyXG4gICAgICBoYW5kbGVCbHVyOiBlbWFpbFZhbGlkYXRvcixcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGF0dHJpYnV0ZXM6IGBcclxuICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwibG9naW5cIiBcclxuICAgICAgICAgIG1pbmxlbmd0aD1cIjJcIlxyXG4gICAgICAgICAgbWF4bGVuZ3RoPVwiMjBcIlxyXG4gICAgICAgICAgcmVxdWlyZWRcclxuICAgICAgICBgLFxyXG4gICAgICBuYW1lOiBcImxvZ2luXCIsXHJcbiAgICAgIGhhbmRsZUJsdXI6IHNpbXBsZVRleHRWYWxpZGF0b3IsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBhdHRyaWJ1dGVzOiBgXHJcbiAgICAgICAgICB0eXBlPVwicGhvbmVcIiBcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUGhvbmVcIiBcclxuICAgICAgICAgIHBhdHRlcm49XCJeKDd8OClcXFxcZHsxMH0kXCJcclxuICAgICAgICAgIG1heGxlbmd0aD1cIjExXCJcclxuICAgICAgICAgIGF1dG9jb21wbGV0ZT1cIm9uXCJcclxuICAgICAgICAgIHJlcXVpcmVkXHJcbiAgICAgICAgYCxcclxuICAgICAgbmFtZTogXCJwaG9uZVwiLFxyXG4gICAgICBoYW5kbGVCbHVyOiBwaG9uZVZhbGlkYXRvcixcclxuICAgIH0sXHJcbiAgXSxcclxuICBhdmF0YXI6IFtcclxuICAgIHtcclxuICAgICAgYXR0cmlidXRlczogYFxyXG4gICAgICB0eXBlPVwiZmlsZVwiXHJcbiAgICAgIHBsYWNlaG9sZGVyPVwib2xkIHBhc3N3b3JkXCJcclxuICAgICAgcGF0dGVybj1cIig/PS4qXFxcXGQpKD89LipbYS16XSkoPz0uKltBLVpdKSg/IS4qXFxcXHMpLipcIlxyXG4gICAgICBtaW5sZW5ndGg9XCI4XCJcclxuICAgICAgYXV0b2NvbXBsZXRlPVwib25cIlxyXG4gICAgICByZXF1aXJlZFxyXG4gICAgICB0aXRsZT1cIiBcIlxyXG4gICAgYCxcclxuICAgICAgbmFtZTogXCJhdmF0YXJcIixcclxuICAgICAgaGFuZGxlQmx1cjogcGFzc3dvcmRWYWxpZGF0b3IsXHJcbiAgICB9LFxyXG4gIF0sXHJcbiAgcGFzc3dvcmQ6IFtcclxuICAgIHtcclxuICAgICAgYXR0cmlidXRlczogYFxyXG4gICAgICB0eXBlPVwicGFzc3dvcmRcIlxyXG4gICAgICBwbGFjZWhvbGRlcj1cIm9sZCBwYXNzd29yZFwiXHJcbiAgICAgIHBhdHRlcm49XCIoPz0uKlxcXFxkKSg/PS4qW2Etel0pKD89LipbQS1aXSkoPyEuKlxcXFxzKS4qXCJcclxuICAgICAgbWlubGVuZ3RoPVwiOFwiXHJcbiAgICAgIGF1dG9jb21wbGV0ZT1cIm9uXCJcclxuICAgICAgcmVxdWlyZWRcclxuICAgIGAsXHJcbiAgICAgIG5hbWU6IFwib2xkLXBhc3N3b3JkXCIsXHJcbiAgICAgIGhhbmRsZUJsdXI6IHBhc3N3b3JkVmFsaWRhdG9yLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgYXR0cmlidXRlczogYFxyXG4gICAgICB0eXBlPVwicGFzc3dvcmRcIlxyXG4gICAgICBwbGFjZWhvbGRlcj1cIm5ldyBwYXNzd29yZFwiXHJcbiAgICAgIHBhdHRlcm49XCIoPz0uKlxcXFxkKSg/PS4qW2Etel0pKD89LipbQS1aXSkoPyEuKlxcXFxzKS4qXCJcclxuICAgICAgbWlubGVuZ3RoPVwiOFwiXHJcbiAgICAgIGF1dG9jb21wbGV0ZT1cIm9uXCJcclxuICAgICAgcmVxdWlyZWRcclxuICAgIGAsXHJcbiAgICAgIG5hbWU6IFwibmV3LXBhc3N3b3JkXCIsXHJcbiAgICAgIGhhbmRsZUJsdXIoZWxlbWVudDogSFRNTElucHV0RWxlbWVudCwgY2FsbGJhY2s6IEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgY29uc3QgUEFTU1dPUkRfQ09JTkNJREVTID0gXCJTYW1lIGFzIG9sZCBwYXNzd29yZFwiO1xyXG4gICAgICAgIHBhc3N3b3JkVmFsaWRhdG9yKGVsZW1lbnQsIGNhbGxiYWNrKTtcclxuICAgICAgICAvLyBpZiAoZWxlbWVudC52YWx1ZSA9PT0gZm9ybS52aXJ0dWFsRm9ybVtcIm9sZC1wYXNzd29yZFwiXSkge1xyXG4gICAgICAgIC8vICAgY2FsbGJhY2sodHJ1ZSwgUEFTU1dPUkRfQ09JTkNJREVTKTtcclxuICAgICAgICAvLyAgIHJldHVybjtcclxuICAgICAgICAvLyB9XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gIF0sXHJcbn07XHJcbiIsImltcG9ydCB7IEJsb2NrIH0gZnJvbSBcIi4uLy4uL3V0aWwvQmxvY2svQmxvY2tcIjtcclxuaW1wb3J0IHsgU2ltcGxlVGVtcGxhdGVFbmdpbmUgfSBmcm9tIFwiLi4vLi4vdXRpbC9TaW1wbGUtdGVtcGxhdGUtZW5naW5lL3NpbXBsZS10ZW1wbGF0ZS1lbmdpbmVcIjtcclxuaW1wb3J0IHRlbXBsYXRlIGZyb20gXCIuL3VzZXItc2V0dGluZ3MtdGVtcGxhdGVcIjtcclxuaW1wb3J0IHtcclxuICBUaXRsZSxcclxuICBJbnB1dCxcclxuICBCdXR0b24sXHJcbiAgQXZhdGFyLFxyXG4gIFNlcnZlckVycm9yLFxyXG59IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL2luZGV4XCI7XHJcbmltcG9ydCB7IGlucHV0c1Byb3BzIH0gZnJvbSBcIi4vaW5wdXRzUHJvcHNcIjtcclxuaW1wb3J0IHsgYXV0aCB9IGZyb20gXCIuLi8uLi8uLi9pbmRleFwiO1xyXG5cclxuaW1wb3J0IEFWQVRBUl9CSUcgZnJvbSBcIi4uLy4uLy4uLy4uL3N0YXRpYy9pbWFnZXMvZXhhbXBsZS11c2VyLWltZy5qcGdcIjtcclxuXHJcbmltcG9ydCB7IEZvcm0sIElGb3JtIH0gZnJvbSBcIi4uLy4uL2Zvcm1cIjtcclxuaW1wb3J0IHtcclxuICBJbnB1dFZhbGlkYXRlLFxyXG4gIElJbnB1dFZhbGlkYXRlLFxyXG59IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL0lucHV0L0lucHV0VmFsaWRhdGVcIjtcclxuXHJcbmludGVyZmFjZSBJSW5wdXRzUHJvcCB7XHJcbiAgYXR0cmlidXRlczogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBoYW5kbGVCbHVyKGVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQsIGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQ7XHJcbn1cclxuXHJcbmNvbnN0IHVzZXJTZXR0aW5nc1RlbXBsYXRlUGFnZSA9IG5ldyBTaW1wbGVUZW1wbGF0ZUVuZ2luZSh0ZW1wbGF0ZSk7XHJcblxyXG4vLyBjb25zdCBkYXRhID0ge1xyXG4vLyAgIHRpdGxlOiBuZXcgVGl0bGUoeyB0ZXh0OiBcIlVzZXIgc2V0dGluZ3NcIiB9KSxcclxuLy8gICBhdmF0YXI6IG5ldyBBdmF0YXIoe1xyXG4vLyAgICAgbGluazogQVZBVEFSX0JJRyxcclxuLy8gICAgIGFsdDogXCJVc2VyIGF2YXRhclwiLFxyXG4vLyAgICAgY2xhc3NOYW1lOiBcImF1dGgtdXNlci1zZXR0aW5nc19faW1nXCIsXHJcbi8vICAgfSksXHJcbi8vICAgaW5wdXRzOiBpbnB1dHNQcm9wcy5tYXAoKGl0ZW0pID0+IHtcclxuLy8gICAgIHZhbGlkYXRlLnB1c2gobmV3IElucHV0VmFsaWRhdGUoaXRlbS5oYW5kbGVCbHVyKSk7XHJcblxyXG4vLyAgICAgcmV0dXJuIG5ldyBJbnB1dCh7XHJcbi8vICAgICAgIGF0dHJpYnV0ZXM6IGl0ZW0uYXR0cmlidXRlcyxcclxuLy8gICAgICAgbmFtZTogaXRlbS5uYW1lLFxyXG4vLyAgICAgICBjbGFzc05hbWU6IFwiYXV0aF9faW5wdXRcIixcclxuLy8gICAgIH0pO1xyXG4vLyAgIH0pLFxyXG4vLyAgIGJ1dHRvbjogbmV3IEJ1dHRvbih7XHJcbi8vICAgICB0ZXh0OiBcIlNhdmUgY2hhbmdlc1wiLFxyXG4vLyAgICAgY2xhc3NOYW1lOiBcImJ1dHRvbiBhdXRoX19idXR0b24gYXV0aC11c2VyLXNldHRpbmdzX19idXR0b25cIixcclxuLy8gICAgIGhhbmRsZUNsaWNrKCkge1xyXG4vLyAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4vLyAgICAgICAvLyBjb25zb2xlLmxvZyhmb3JtLmdldERhdGEoKSk7XHJcbi8vICAgICB9LFxyXG4vLyAgIH0pLFxyXG4vLyB9O1xyXG5cclxuY2xhc3MgVXNlclNldHRpbmdzIGV4dGVuZHMgQmxvY2sge1xyXG4gIGlucHV0c1ZhbHVlOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xyXG4gIHZhbGlkYXRlOiBJSW5wdXRWYWxpZGF0ZVtdO1xyXG4gIGZvcm06IElGb3JtO1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoXCJkaXZcIiwge1xyXG4gICAgICB0aXRsZTogbmV3IFRpdGxlKHsgdGV4dDogXCJTaWdudXBcIiB9KS5yZW5kZXIoKSxcclxuICAgICAgYXZhdGFyOiBuZXcgQXZhdGFyKHtcclxuICAgICAgICBsaW5rOiBBVkFUQVJfQklHLFxyXG4gICAgICAgIGFsdDogXCJVc2VyIGF2YXRhclwiLFxyXG4gICAgICAgIGNsYXNzTmFtZTogXCJhdXRoLXVzZXItc2V0dGluZ3NfX2ltZ1wiLFxyXG4gICAgICB9KS5yZW5kZXIoKSxcclxuICAgICAgLy8gc2VydmVyRXJyb3I6IG5ldyBTZXJ2ZXJFcnJvcih7XHJcbiAgICAgIC8vICAgdGV4dDogXCJcIixcclxuICAgICAgLy8gfSksXHJcbiAgICAgIGlucHV0QXZhdGFyOiBuZXcgSW5wdXQoe1xyXG4gICAgICAgIGF0dHJpYnV0ZXM6IGlucHV0c1Byb3BzLmF2YXRhclswXS5hdHRyaWJ1dGVzLFxyXG4gICAgICAgIG5hbWU6IGlucHV0c1Byb3BzLmF2YXRhclswXS5uYW1lLFxyXG4gICAgICAgIGNsYXNzTmFtZTogXCJhdXRoX19pbnB1dCBhdXRoX19pbnB1dF9hdmF0YXJcIixcclxuICAgICAgfSkucmVuZGVyKCksXHJcbiAgICAgIGJ1dHRvbkF2YXRhcjogbmV3IEJ1dHRvbih7XHJcbiAgICAgICAgdGV4dDogXCJMb2FkIGF2YXRhclwiLFxyXG4gICAgICAgIGNsYXNzTmFtZTogXCJhdXRoX19idXR0b24gYXV0aF9fYnV0dG9uX2F2YXRhclwiLFxyXG4gICAgICAgIGlzRGlzYWJsZWQ6IGZhbHNlLFxyXG4gICAgICB9KS5yZW5kZXIoKSxcclxuICAgICAgYnV0dG9uVXNlckluZm86IG5ldyBCdXR0b24oe1xyXG4gICAgICAgIHRleHQ6IFwiU2F2ZSB1c2VyIGluZm9cIixcclxuICAgICAgICBjbGFzc05hbWU6IFwiYXV0aF9fYnV0dG9uIGF1dGhfX2J1dHRvbl91c2VyLXNldHRpbmdcIixcclxuICAgICAgICBpc0Rpc2FibGVkOiBmYWxzZSxcclxuICAgICAgfSkucmVuZGVyKCksXHJcbiAgICAgIGJ1dHRvblBhc3N3b3JkOiBuZXcgQnV0dG9uKHtcclxuICAgICAgICB0ZXh0OiBcIkNoYW5nZVwiLFxyXG4gICAgICAgIGNsYXNzTmFtZTogXCJhdXRoX19idXR0b24gYXV0aF9fYnV0dG9uX3Bhc3N3b3JkXCIsXHJcbiAgICAgICAgaXNEaXNhYmxlZDogZmFsc2UsXHJcbiAgICAgIH0pLnJlbmRlcigpLFxyXG4gICAgICBpc0xvYWQ6IGZhbHNlLFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5pbnB1dHNWYWx1ZTtcclxuICAgIHRoaXMudmFsaWRhdGUgPSBbXTtcclxuICAgIHRoaXMuZm9ybTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvSW5wdXRzKCkge1xyXG4gICAgdGhpcy5pbnB1dHNWYWx1ZSA9IHRoaXMuaW5wdXRzVmFsdWUgfHwge307XHJcbiAgICB0aGlzLnZhbGlkYXRlID0gdGhpcy52YWxpZGF0ZSB8fCBbXTtcclxuICAgIHJldHVybiAoaW5wdXRzUHJvcHMudXNlckluZm8gYXMgSUlucHV0c1Byb3BbXSlcclxuICAgICAgLm1hcCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgbmFtZSwgYXR0cmlidXRlcyB9ID0gaXRlbTtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuaW5wdXRzVmFsdWVbbmFtZV1cclxuICAgICAgICAgID8gYHZhbHVlPVwiJHt0aGlzLmlucHV0c1ZhbHVlW25hbWVdfVwiYFxyXG4gICAgICAgICAgOiBcIiBcIjtcclxuICAgICAgICB0aGlzLnZhbGlkYXRlLnB1c2gobmV3IElucHV0VmFsaWRhdGUoaXRlbS5oYW5kbGVCbHVyKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgSW5wdXQoe1xyXG4gICAgICAgICAgYXR0cmlidXRlcyxcclxuICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICB9KS5yZW5kZXIoKTtcclxuICAgICAgfSlcclxuICAgICAgLmpvaW4oXCJcIik7XHJcbiAgfVxyXG5cclxuICBnZXRQYXNzd29yZElucHV0cygpIHtcclxuICAgIHRoaXMuaW5wdXRzVmFsdWUgPSB0aGlzLmlucHV0c1ZhbHVlIHx8IHt9O1xyXG4gICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMudmFsaWRhdGUgfHwgW107XHJcbiAgICByZXR1cm4gKGlucHV0c1Byb3BzLnBhc3N3b3JkIGFzIElJbnB1dHNQcm9wW10pXHJcbiAgICAgIC5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICBjb25zdCB7IG5hbWUsIGF0dHJpYnV0ZXMgfSA9IGl0ZW07XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmlucHV0c1ZhbHVlW25hbWVdXHJcbiAgICAgICAgICA/IGB2YWx1ZT1cIiR7dGhpcy5pbnB1dHNWYWx1ZVtuYW1lXX1cImBcclxuICAgICAgICAgIDogXCIgXCI7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZS5wdXNoKG5ldyBJbnB1dFZhbGlkYXRlKGl0ZW0uaGFuZGxlQmx1cikpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IElucHV0KHtcclxuICAgICAgICAgIGF0dHJpYnV0ZXMsXHJcbiAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgfSkucmVuZGVyKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5qb2luKFwiXCIpO1xyXG4gIH1cclxuXHJcbiAgY3VzdG9tRm9ybVZhbGlkYXRlKCkge1xyXG4gICAgLy8gY29uc3QgeyB2aXJ0dWFsRm9ybSB9ID0gZm9ybTtcclxuICAgIC8vIGlmICh2aXJ0dWFsRm9ybVtcIm5ldy1wYXNzd29yZFwiXSAhPT0gdmlydHVhbEZvcm1bXCJyZXBlYXQtcGFzc3dvcmRcIl0pXHJcbiAgICAvLyAgIHJldHVybiBmYWxzZTtcclxuICAgIC8vIGlmICh2aXJ0dWFsRm9ybVtcIm9sZC1wYXNzd29yZFwiXSA9PT0gdmlydHVhbEZvcm1bXCJuZXctcGFzc3dvcmRcIl0pXHJcbiAgICAvLyAgIHJldHVybiBmYWxzZTtcclxuICAgIC8vIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZ2V0Rm9ybURhdGEoKSB7XHJcbiAgICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gY29uc29sZS5sb2coZm9ybS5nZXREYXRhKCkpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICBhdXRoLmdldFVzZXJJbmZvKCkudGhlbigocmVzKSA9PiBjb25zb2xlLmxvZyhyZXMpKTtcclxuICAgIC8vIHRoaXMuZXZlbnRCdXMoKS5vbih0aGlzLkVWRU5UUy5GTE9XX1JFTkRFUiwgKCkgPT4ge1xyXG4gICAgLy8gICBjb25zdCB7IGVsZW1lbnQgfSA9IHRoaXM7XHJcbiAgICAvLyAgIGNvbnN0IGZvcm1Db250YWluZXIgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xyXG4gICAgLy8gICBjb25zdCBpbnB1dHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaW5wdXRcIik7XHJcbiAgICAvLyAgIGNvbnN0IGZvcm1CdXR0b246IEhUTUxCdXR0b25FbGVtZW50ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgLy8gICAgIFwiLmF1dGgtdXNlci1zZXR0aW5nc19fYnV0dG9uXCJcclxuICAgIC8vICAgKTtcclxuICAgIC8vICAgLy8gZm9ybSA9IG5ldyBGb3JtKGZvcm1Db250YWluZXIsIGZvcm1CdXR0b24sIHRoaXMuY3VzdG9tRm9ybVZhbGlkYXRlKTtcclxuICAgIC8vICAgaW5wdXRzLmZvckVhY2goKGlucHV0LCBpKSA9PiB7XHJcbiAgICAvLyAgICAgKGlucHV0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLm9uZm9jdXMgPSB2YWxpZGF0ZVtpXS5oYW5kbGVGb2N1cztcclxuICAgIC8vICAgICAoaW5wdXQgYXMgSFRNTElucHV0RWxlbWVudCkub25ibHVyID0gdmFsaWRhdGVbaV0uaGFuZGxlQmx1cjtcclxuICAgIC8vICAgfSk7XHJcbiAgICAvLyAgIC8vIGZvcm1Db250YWluZXIub25pbnB1dCA9IGZvcm0uZm9ybUlzVmFsaWQ7XHJcbiAgICAvLyAgIGZvcm1CdXR0b24ub25jbGljayA9IHRoaXMuZ2V0Rm9ybURhdGE7XHJcbiAgICAvLyB9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpOiBzdHJpbmcge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICB0aXRsZSxcclxuICAgICAgYXZhdGFyLFxyXG4gICAgICBpbnB1dEF2YXRhcixcclxuICAgICAgYnV0dG9uQXZhdGFyLFxyXG4gICAgICBidXR0b25Vc2VySW5mbyxcclxuICAgICAgYnV0dG9uUGFzc3dvcmQsXHJcbiAgICB9ID0gdGhpcy5wcm9wcztcclxuICAgIHJldHVybiB1c2VyU2V0dGluZ3NUZW1wbGF0ZVBhZ2UuY29tcGlsZSh7XHJcbiAgICAgIHRpdGxlLFxyXG4gICAgICBhdmF0YXIsXHJcbiAgICAgIGlucHV0QXZhdGFyLFxyXG4gICAgICBidXR0b25BdmF0YXIsXHJcbiAgICAgIGlucHV0c1VzZXJJbmZvOiB0aGlzLmdldFVzZXJJbmZvSW5wdXRzKCksXHJcbiAgICAgIGJ1dHRvblVzZXJJbmZvLFxyXG4gICAgICBpbnB1dHNVc2VyUGFzc3dvcmQ6IHRoaXMuZ2V0UGFzc3dvcmRJbnB1dHMoKSxcclxuICAgICAgYnV0dG9uUGFzc3dvcmQsXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFVzZXJTZXR0aW5ncyB9O1xyXG4iLCJjb25zdCB1c2VyU2V0dGluZ3NQYWdlVGVtcGxhdGU6IHN0cmluZyA9IGBcclxuICA8ZGl2IGNsYXNzPVwicm9vdFwiPlxyXG4gIDxtYWluIGNsYXNzPVwibWFpbi1jb250ZW50XCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwiYXV0aC11c2VyLXNldHRpbmdzXCI+XHJcbiAgICAgIHslIHRpdGxlICV9XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJhdXRoLXVzZXItc2V0dGluZ3NfX2NvbnRhaW5lclwiPlxyXG4gICAgICAgICAgPGZvcm0gY2xhc3M9XCJhdXRoX19mb3JtIGF1dGhfX2Zvcm1fYXZhdGFyXCIgbm92YWxpZGF0ZT1cInRydWVcIj4gICAgICAgICAgICBcclxuICAgICAgICAgICAgeyUgYXZhdGFyICV9XHJcbiAgICAgICAgICAgIHslIGlucHV0QXZhdGFyICV9XHJcbiAgICAgICAgICAgIHslIGJ1dHRvbkF2YXRhciAlfVxyXG4gICAgICAgICAgPC9mb3JtPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJhdXRoIGF1dGhfdXNlci1zZXR0aW5ncyBcIj5cclxuICAgICAgICAgIDxmb3JtIGNsYXNzPVwiYXV0aF9fZm9ybSBhdXRoX19mb3JtX3VzZXItaW5mbyBhdXRoX3JpZ2h0LW1hcmdpblwiIG5vdmFsaWRhdGU9XCJ0cnVlXCI+XHJcbiAgICAgICAgICAgIHslIGlucHV0c1VzZXJJbmZvICV9XHJcbiAgICAgICAgICAgIHslIGJ1dHRvblVzZXJJbmZvICV9XHJcbiAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICA8Zm9ybSBjbGFzcz1cImF1dGhfX2Zvcm0gYXV0aF9fZm9ybV91c2VyLXBhc3N3b3JkXCIgbm92YWxpZGF0ZT1cInRydWVcIj5cclxuICAgICAgICAgICAgeyUgaW5wdXRzVXNlclBhc3N3b3JkICV9XHJcbiAgICAgICAgICAgIHslIGJ1dHRvblBhc3N3b3JkICV9XHJcbiAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8c3BhbiBjbGFzcz1cImF1dGhfX2Vycm9yIGF1dGhfX2Vycm9yX3NlcnZlclwiPlNlcnZlciBlcnJvcjwvc3Bhbj4gICAgICBcclxuICAgIDwvZGl2PlxyXG4gIDwvbWFpbj5cclxuPC9kaXY+XHJcbiAgYDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHVzZXJTZXR0aW5nc1BhZ2VUZW1wbGF0ZTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHJvdXRlciBmcm9tIFwiLi9qcy9yb3V0ZXJcIjtcclxuaW1wb3J0IHsgSGVhZGVyIH0gZnJvbSBcIi4vanMvY29tcG9uZW50cy9cIjtcclxuaW1wb3J0IHsgQXV0aEFwaSB9IGZyb20gXCIuL2pzL0FQSS9hdXRoLWFwaVwiOyAvLyBURVNUSU5HXHJcblxyXG5pbXBvcnQge1xyXG4gIFNlcnZlckVycm9yLFxyXG4gIE5vdEZvdW5kLFxyXG4gIE1haW5QYWdlLFxyXG4gIFNpZ25pblBhZ2UsXHJcbiAgU2lnbnVwUGFnZSxcclxuICBVc2VyU2V0dGluZ3MsXHJcbn0gZnJvbSBcIi4vanMvcGFnZXMvaW5kZXhcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBhdXRoID0gbmV3IEF1dGhBcGkoXCIvYXV0aC9cIik7XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2hlYWRlclwiKS5hcHBlbmRDaGlsZChuZXcgSGVhZGVyKCkuZ2V0Q29udGVudCgpKTtcclxuXHJcbmZldGNoKFwiaHR0cHM6Ly95YS1wcmFrdGlrdW0udGVjaC9hcGkvdjIvYXV0aC9zaWduaW5cIiwge1xyXG4gIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxuICBjcmVkZW50aWFsczogXCJpbmNsdWRlXCIsXHJcbiAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgbG9naW46IFwidG9oYWxiXCIsXHJcbiAgICBwYXNzd29yZDogXCJoZ2ZyZDI2WTFcIixcclxuICB9KSxcclxufSkudGhlbigocmVzKSA9PiBjb25zb2xlLmxvZyhyZXMpKTtcclxuXHJcbnJvdXRlclxyXG4gIC51c2VQcm90ZWN0KFwiIy9cIiwgTWFpblBhZ2UpXHJcbiAgLnVzZURlZmF1bHQoXCIjL3NpZ25pblwiLCBTaWduaW5QYWdlKVxyXG4gIC51c2UoXCIjL3NpZ251cFwiLCBTaWdudXBQYWdlKVxyXG4gIC51c2UoXCIjL3NldHRpbmdzXCIsIFVzZXJTZXR0aW5ncylcclxuICAudXNlKFwiIy9lcnJvclwiLCBTZXJ2ZXJFcnJvcilcclxuICAudXNlKFwiIy9ub3Rmb3VuZFwiLCBOb3RGb3VuZClcclxuICAuc3RhcnQoKTtcclxuXHJcbmNvbnN0IGV2ZW50SXRlbUluc2VydGVkID0gbmV3IEV2ZW50KFwiY2hhbmdlTG9jYWxTdG9yYWdlXCIpO1xyXG5jb25zdCBzdG9yYWdlU2V0SXRlbSA9IGxvY2FsU3RvcmFnZS5zZXRJdGVtO1xyXG5jb25zdCBzdG9yYWdlUmVtb3ZlSXRlbSA9IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtO1xyXG5cclxubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgc3RvcmFnZVJlbW92ZUl0ZW0uYXBwbHkodGhpcywgYXJndW1lbnRzIGFzIGFueSk7XHJcbiAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldmVudEl0ZW1JbnNlcnRlZCk7XHJcbn07XHJcblxyXG5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSA9IGZ1bmN0aW9uICgpIHtcclxuICBjb25zb2xlLmxvZyhcImRvXCIpO1xyXG4gIHN0b3JhZ2VTZXRJdGVtLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyBhcyBhbnkpO1xyXG4gIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnRJdGVtSW5zZXJ0ZWQpO1xyXG4gIGNvbnNvbGUubG9nKFwicG9zbGVcIik7XHJcbn07XHJcblxyXG5jb25zdCBzdG9yYWdlSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICBpZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibG9naW5cIikpIHtcclxuICAgIHJvdXRlci5nbyhcIiMvc2lnbmluXCIpO1xyXG4gICAgcm91dGVyLmlzUHJvdGVjdCA9IHRydWU7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIGNvbnNvbGUubG9nKFwiaGVyZVwiKTtcclxuICByb3V0ZXIuaXNQcm90ZWN0ID0gZmFsc2U7XHJcbiAgcm91dGVyLmdvKFwiIy9cIik7XHJcbn07XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlTG9jYWxTdG9yYWdlXCIsIHN0b3JhZ2VIYW5kbGVyLCBmYWxzZSk7XHJcbiIsImltcG9ydCB7IEJhc2VBUEkgfSBmcm9tIFwiLi9iYXNlLWFwaVwiO1xyXG5cclxuY2xhc3MgQXV0aEFwaSBleHRlbmRzIEJhc2VBUEkge1xyXG4gIF91cmw6IHN0cmluZztcclxuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZykge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuX3VybCA9IHRoaXMuX2Jhc2VVcmwgKyB1cmw7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl91cmwpO1xyXG4gIH1cclxuXHJcbiAgc2lnbnVwKGJvZHk6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pIHtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keSxcclxuICAgIH07XHJcbiAgICBjb25zdCByb3V0ZSA9IFwic2lnbnVwXCI7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2h0dHBcclxuICAgICAgLnBvc3QodGhpcy5fdXJsICsgcm91dGUsIG9wdGlvbnMpXHJcbiAgICAgIC50aGVuKChyZXM6IGFueSkgPT4gdGhpcy5nZXRSZXNwb25zZShyZXMpKTtcclxuICB9XHJcblxyXG4gIHNpZ25pbihib2R5OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHksXHJcbiAgICB9O1xyXG4gICAgY29uc3Qgcm91dGUgPSBcInNpZ25pblwiO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9odHRwXHJcbiAgICAgIC5wb3N0KHRoaXMuX3VybCArIHJvdXRlLCBvcHRpb25zKVxyXG4gICAgICAudGhlbigocmVzOiBhbnkpID0+IHRoaXMuZ2V0UmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICBsb2dvdXQoKSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICB9O1xyXG4gICAgY29uc3Qgcm91dGUgPSBcImxvZ291dFwiO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9odHRwXHJcbiAgICAgIC5yZXF1ZXN0KHRoaXMuX3VybCArIHJvdXRlLCBvcHRpb25zKVxyXG4gICAgICAudGhlbigocmVzOiBhbnkpID0+IHRoaXMuZ2V0UmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHJvdXRlID0gXCJ1c2VyXCI7XHJcbiAgICByZXR1cm4gdGhpcy5faHR0cFxyXG4gICAgICAuZ2V0KHRoaXMuX3VybCArIHJvdXRlKVxyXG4gICAgICAudGhlbigocmVzOiBhbnkpID0+IHRoaXMuZ2V0UmVzcG9uc2UocmVzKSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBBdXRoQXBpIH07XHJcbiIsImltcG9ydCB7IEhUVFAsIElIVFRQIH0gZnJvbSBcIi4uL3V0aWwvSFRUUC9IVFRQXCI7XHJcblxyXG5pbnRlcmZhY2UgSUJhc2VBUEkge1xyXG4gIF9iYXNlVXJsOiBzdHJpbmc7XHJcbiAgX2h0dHA6IElIVFRQO1xyXG4gIGdldFJlc3BvbnNlKHJlczogWE1MSHR0cFJlcXVlc3QpOiB2b2lkO1xyXG59XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBCYXNlQVBJIGltcGxlbWVudHMgSUJhc2VBUEkge1xyXG4gIF9iYXNlVXJsOiBzdHJpbmc7XHJcbiAgX2h0dHA6IElIVFRQO1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IFwiaHR0cHM6Ly95YS1wcmFrdGlrdW0udGVjaC9hcGkvdjJcIjtcclxuICAgIHRoaXMuX2h0dHAgPSBuZXcgSFRUUCgpO1xyXG4gIH1cclxuICBnZXRSZXNwb25zZShyZXM6IFhNTEh0dHBSZXF1ZXN0KSB7XHJcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcihyZXMucmVzcG9uc2UpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHsgQmFzZUFQSSB9O1xyXG4iXSwic291cmNlUm9vdCI6IiJ9